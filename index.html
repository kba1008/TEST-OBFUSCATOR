<!-- LIGHT (20%) -->
<script>document.write(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9Im1zIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+U2lzdGVtIFBlbGF3YXQgJiBLZWhhZGlyYW4gdjIyLjkgKEF1dG8gTW9kZSk8L3RpdGxlPgogICAgCiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLS0+CiAgICA8IS0tICAgICAgICAgICAgICAgICBSVUFOR0FOIEVESVQgUEVOR0dVTkEgKG1hbnRhcCkgICAgICAgICAgICAgICAgLS0+CiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLS0+CiAgICA8c2NyaXB0PgogICAgICAgIC8vIDEuIE1hc3Vra2FuIExpbmsgR29vZ2xlIEFwcHMgU2NyaXB0IChXZWIgQXBwIFVSTCkgZGkgc2luaQogICAgICAgIGNvbnN0IEFQSV9VUkwgPSAnaHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J5N0VaVDQxRldMcERNaDI3cUdmcGZKWVpFbkpQczJtTXFOMGxTOFVZU1ZvZ2lvZkswWHU4dEczdWNYMkZEeWJBQkkvZXhlYyc7IAogICAgICAgIAogICAgICAgIC8vIDIuIEthdGEgTGFsdWFuIHVudHVrIEFkbWluIC8gTWFudWFsIE92ZXJyaWRlCiAgICAgICAgY29uc3QgUEFTU0NPREUgPSAiMTAxMDEwIjsKICAgICAgICAgCiAgICAgICAgLy8gMy4gS29vcmRpbmF0IExva2FzaSAoQW1iaWwgZGFyaSBHb29nbGUgTWFwcykKICAgICAgICBjb25zdCBTQ0hPT0xfTEFUID0gNS4yMjc2OTE5NjUxNjA5MDY7IAogICAgICAgIGNvbnN0IFNDSE9PTF9MTkcgPSAxMDAuNjk5MDMzNzc4OTA2NDM7IAogICAgICAgIAogICAgICAgIC8vIDQuIEphcmFrIFJhZGl1cyB5YW5nIGRpYmVuYXJrYW4gKGRhbGFtIG1ldGVyKQogICAgICAgIGNvbnN0IFJBRElVU19NRVRFUiA9IDEwMDsgCgogICAgICAgIC8vIDUuIEFudGktU3BhbSBDaGVjay1DaGVjazogQmVyYXBhIG1pbml0IGRhbGFtIGthd2FzYW4gYmFydSBhdXRvLW1hc3VrPyAoRWxhayBzcGFtKQogICAgICAgIGNvbnN0IE1JTklUX0FOVElfU1BBTV9NQVNVSyA9IDAuMDAwMTsKCiAgICAgICAgLy8gNi4gQXV0byBDaGVja291dCBEZWxheTogQmVyYXBhIG1pbml0IGx1YXIga2F3YXNhbiBiYXJ1IGF1dG8ta2VsdWFyPyAoU21vb3RoKQogICAgICAgIGNvbnN0IE1JTklUX0RFTEFZX0tFTFVBUiA9IDAuMTsKCiAgICAgICAgLy8gNy4gSmFyYWsgUmVzZXQgQXV0by1JbjogUGVuZ2d1bmEgcGVybHUga2VsdWFyIHNlamF1aCBpbmkgKG1ldGVyKSB1bnR1ayBha3RpZmthbiBzZW11bGEgYXV0by1pbiBzZWxlcGFzIGNoZWNrLW91dAogICAgICAgIGNvbnN0IFJBRElVU19SRVNFVF9BVVRPX0lOID0gMzAwOwogICAgPC9zY3JpcHQ+CiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLS0+CgogICAgPGxpbmsgcmVsPSJtYW5pZmVzdCIgaHJlZj0ibWFuaWZlc3QuanNvbiI+CiAgICA8bWV0YSBuYW1lPSJ0aGVtZS1jb2xvciIgY29udGVudD0iIzFlM2M3MiI+CiAgICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PVBvcHBpbnM6d2dodEAzMDA7NDAwOzUwMDs2MDA7NzAwOzgwMCZkaXNwbGF5PXN3YXAiIHJlbD0ic3R5bGVzaGVldCI+CiAgICAKICAgIDxzdHlsZT4KICAgICAgICBib2R5IHsgZm9udC1mYW1pbHk6ICdQb3BwaW5zJywgc2Fucy1zZXJpZjsgYmFja2dyb3VuZDogI2YwZjJmNTsgY29sb3I6ICMzMzM7IG1hcmdpbjogMDsgcGFkZGluZzogMTVweDsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IG1pbi1oZWlnaHQ6IDEwMHZoOyB9CiAgICAgICAgLmNvbnRhaW5lciB7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAwOyBib3JkZXItcmFkaXVzOiAyNXB4OyB3aWR0aDogMTAwJTsgbWF4LXdpZHRoOiA0MjBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBwb3NpdGlvbjogcmVsYXRpdmU7IGJveC1zaGFkb3c6IDAgMTVweCAzNXB4IHJnYmEoMCwwLDAsMC4xKTsgb3ZlcmZsb3c6IGhpZGRlbjsgcGFkZGluZy1ib3R0b206IDMwcHg7IH0KICAgICAgICAKICAgICAgICAuaGVhZGVyLWJnIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjMTQxZTMwLCAjMjQzYjU1KTsgcGFkZGluZzogMTVweCAyMHB4IDMwcHggMjBweDsgY29sb3I6IHdoaXRlOyBib3JkZXItcmFkaXVzOiAwIDAgMjVweCAyNXB4OyBib3gtc2hhZG93OiAwIDEwcHggMjVweCByZ2JhKDAsMCwwLDAuMik7IG1hcmdpbi1ib3R0b206IDI1cHg7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQogICAgICAgIC50b3AtYmFyLXJvdyB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDEwcHg7IGZvbnQtc2l6ZTogMTFweDsgY29sb3I6ICNjZmQ4ZGM7IGZvbnQtd2VpZ2h0OiA0MDA7IGxldHRlci1zcGFjaW5nOiAwLjVweDsgcGFkZGluZy1ib3R0b206IDE1cHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMSk7IG1hcmdpbi1ib3R0b206IDIwcHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IH0KICAgICAgICAKICAgICAgICAubWFpbi10aXRsZS1ibG9jayB7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IH0KICAgICAgICAudGl0bGUtc21hbGwgeyBmb250LXNpemU6IDEwcHg7IGxldHRlci1zcGFjaW5nOiAzcHg7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IGNvbG9yOiAjNmRkNWVkOyBtYXJnaW4tYm90dG9tOiA1cHg7IGZvbnQtd2VpZ2h0OiA2MDA7IH0KICAgICAgICAudGl0bGUtYmlnIHsgZm9udC1zaXplOiAyNHB4OyBmb250LXdlaWdodDogODAwOyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBsZXR0ZXItc3BhY2luZzogMXB4OyBsaW5lLWhlaWdodDogMS4xOyBiYWNrZ3JvdW5kOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudCgjZmZmLCAjYThjMGZmKTsgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHRleHQ7IC13ZWJraXQtdGV4dC1maWxsLWNvbG9yOiB0cmFuc3BhcmVudDsgdGV4dC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjIpOyBtYXJnaW46IDJweCAwOyB9CgogICAgICAgIC5jb250ZW50LXBhZGRpbmcgeyBwYWRkaW5nOiAwIDIwcHg7IH0KICAgICAgICBzZWxlY3QsIGlucHV0LCB0ZXh0YXJlYSB7IHdpZHRoOiAxMDAlOyBwYWRkaW5nOiAxNHB4OyBtYXJnaW4tYm90dG9tOiAxMnB4OyBib3JkZXI6IDJweCBzb2xpZCAjZjFmM2Y1OyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBib3JkZXItcmFkaXVzOiAxMnB4OyBmb250LXNpemU6IDE0cHg7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IGZvbnQtZmFtaWx5OiBpbmhlcml0OyBvdXRsaW5lOiBub25lOyB0cmFuc2l0aW9uOiAwLjNzOyBjb2xvcjogIzMzMzsgfQogICAgICAgIHNlbGVjdDpmb2N1cywgaW5wdXQ6Zm9jdXMgeyBib3JkZXItY29sb3I6ICMxZTNjNzI7IGJhY2tncm91bmQ6ICNmZmY7IH0KICAgICAgICB0ZXh0YXJlYSB7IHJlc2l6ZTogdmVydGljYWw7IG1pbi1oZWlnaHQ6IDgwcHg7IGRpc3BsYXk6IG5vbmU7IGJvcmRlcjogMnB4IHNvbGlkICNmMzljMTI7IGJhY2tncm91bmQ6ICNmZmZjZjU7IH0gLyogSElEREVOIEFMQVNBTiAqLwoKICAgICAgICAvKiA9PT0gTkVXIENTUyBGT1IgTkFNRSBMT0NLICYgQVZBVEFSID09PSAqLwogICAgICAgIC5pbnB1dC1ncm91cCB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgd2lkdGg6IDEwMCU7IG1hcmdpbi1ib3R0b206IDEycHg7IH0KICAgICAgICAvKiBUYW1iYWggcGFkZGluZyByaWdodCBzdXBheWEgZHVhIGJ1dGFuZyBtdWF0ICovCiAgICAgICAgLmlucHV0LWdyb3VwIGlucHV0IHsgbWFyZ2luLWJvdHRvbTogMDsgcGFkZGluZy1yaWdodDogOTBweDsgfQogICAgICAgIAogICAgICAgIC5sb2NrLWJ0biB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgcmlnaHQ6IDVweDsgdG9wOiA1MCU7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsgY3Vyc29yOiBwb2ludGVyOyBiYWNrZ3JvdW5kOiAjZWNmMGYxOyBib3JkZXI6IG5vbmU7IHotaW5kZXg6IDU7IHBhZGRpbmc6IDZweDsgYm9yZGVyLXJhZGl1czogNTAlOyB0cmFuc2l0aW9uOiAwLjJzOyB3aWR0aDogMzVweDsgaGVpZ2h0OiAzNXB4OyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgfQogICAgICAgIC5sb2NrLWJ0bjpob3ZlciB7IGJhY2tncm91bmQ6ICNkZmU2ZTk7IH0KICAgICAgICAubG9jay1idG46YWN0aXZlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpIHNjYWxlKDAuOSk7IH0KICAgICAgICAubG9jay1idG46ZGlzYWJsZWQgeyBvcGFjaXR5OiAwLjU7IGN1cnNvcjogbm90LWFsbG93ZWQ7IH0KICAgICAgICAKICAgICAgICAuYXZhdGFyLWJ0biB7IHJpZ2h0OiA0OHB4OyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgfSAvKiBCdXRhbmcgYXZhdGFyIHNlYmVsYWggYnV0YW5nIGxvY2sgKi8KCiAgICAgICAgLyogU3R5bGUgS2hhcyBiaWxhIGxvY2sgYWt0aWYgKEt1bmluZykgKi8KICAgICAgICAuYnRuLXllbGxvdyB7IGJhY2tncm91bmQ6ICNmMWM0MGYgIWltcG9ydGFudDsgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgyNDEsIDE5NiwgMTUsIDAuNSk7IGJvcmRlcjogMnB4IHNvbGlkICNmMzljMTI7IH0KCiAgICAgICAgLyogU3R5bGUgTW9kYWwgQXZhdGFyIEdyaWQgKi8KICAgICAgICAuYXZhdGFyLWdyaWQgeyBkaXNwbGF5OiBncmlkOyBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCg1LCAxZnIpOyBnYXA6IDEwcHg7IG1heC1oZWlnaHQ6IDMwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyBwYWRkaW5nOiAxMHB4OyB9CiAgICAgICAgLmF2YXRhci1vcHRpb24geyB3aWR0aDogMTAwJTsgYXNwZWN0LXJhdGlvOiAxLzE7IGN1cnNvcjogcG9pbnRlcjsgYm9yZGVyLXJhZGl1czogNTAlOyBib3JkZXI6IDJweCBzb2xpZCB0cmFuc3BhcmVudDsgdHJhbnNpdGlvbjogMC4yczsgcGFkZGluZzogMnB4OyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyB9CiAgICAgICAgLmF2YXRhci1vcHRpb246aG92ZXIgeyBib3JkZXItY29sb3I6ICMxZTNjNzI7IGJhY2tncm91bmQ6ICNlOGY1ZTk7IHRyYW5zZm9ybTogc2NhbGUoMS4xKTsgfQogICAgICAgIC5hdmF0YXItb3B0aW9uLnNlbGVjdGVkIHsgYm9yZGVyLWNvbG9yOiAjMjdhZTYwOyBiYWNrZ3JvdW5kOiAjZDRlZGRhOyBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDM5LCAxNzQsIDk2LCAwLjMpOyB9CiAgICAgICAgLmF2YXRhci1vcHRpb24gaW1nIHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgb2JqZWN0LWZpdDogY29udGFpbjsgfQogICAgICAgIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKICAgICAgICAuYnRuIHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDE2cHg7IGJhY2tncm91bmQ6ICMxZTNjNzI7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyOiBub25lOyBib3JkZXItcmFkaXVzOiAxMnB4OyBmb250LXNpemU6IDE1cHg7IGZvbnQtd2VpZ2h0OiA2MDA7IGN1cnNvcjogcG9pbnRlcjsgbWFyZ2luLXRvcDogOHB4OyBib3gtc2hhZG93OiAwIDRweCAxMHB4IHJnYmEoMzAsIDYwLCAxMTQsIDAuMik7IHRyYW5zaXRpb246IDAuMnM7IGxldHRlci1zcGFjaW5nOiAwLjVweDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGdhcDogOHB4OyB9CiAgICAgICAgLmJ0bjphY3RpdmUgeyB0cmFuc2Zvcm06IHNjYWxlKDAuOTgpOyB9CiAgICAgICAgLmJ0bjpkaXNhYmxlZCB7IGJhY2tncm91bmQ6ICNiZGMzYzc7IGN1cnNvcjogbm90LWFsbG93ZWQ7IGJveC1zaGFkb3c6IG5vbmU7IG9wYWNpdHk6IDAuNzsgfQogICAgICAgIC5idG4ta2VsdWFyIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjY2IyZDNlLCAjZWY0NzNhKTsgfQogICAgICAgIC5idG4tcGVsYXdhdCB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzExOTk4ZSwgIzM4ZWY3ZCk7IG1hcmdpbi10b3A6IDE1cHg7IH0gCiAgICAgICAgLmJ0bi1jYW5jZWwgeyBiYWNrZ3JvdW5kOiAjN2Y4YzhkOyBtYXJnaW4tdG9wOiAxMHB4OyB9CiAgICAgICAgCiAgICAgICAgI2Rhc2hib2FyZFBhbmVsIHsgZGlzcGxheTogbm9uZTsgYmFja2dyb3VuZDogI2ZmZjsgcGFkZGluZzogMjBweDsgYm9yZGVyLXJhZGl1czogMTVweDsgYm9yZGVyOiAxcHggc29saWQgI2UxZTRlODsgbWFyZ2luLWJvdHRvbTogMjBweDsgYm94LXNoYWRvdzogMCA1cHggMTVweCByZ2JhKDAsMCwwLDAuMDMpOyB9CiAgICAgICAgLnVzZXItd2VsY29tZSB7IGZvbnQtc2l6ZTogMThweDsgZm9udC13ZWlnaHQ6IDcwMDsgY29sb3I6ICMxZTNjNzI7IG1hcmdpbi1ib3R0b206IDJweDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGdhcDogOHB4O30KICAgICAgICAubG9ja2VkLW1zZyB7IGZvbnQtc2l6ZTogMTFweDsgY29sb3I6ICM5NWE1YTY7IG1hcmdpbi1ib3R0b206IDE1cHg7IH0KICAgICAgICAKICAgICAgICAjcGVsYXdhdFBhbmVsIHsgZGlzcGxheTogbm9uZTsgYm9yZGVyOiAycHggZGFzaGVkICMyN2FlNjA7IHBhZGRpbmc6IDE1cHg7IGJvcmRlci1yYWRpdXM6IDE1cHg7IGJhY2tncm91bmQ6ICNmMGZkZjQ7IG1hcmdpbi1ib3R0b206IDIwcHg7IH0KICAgICAgICAKICAgICAgICAvKiBTVFlMTyBHSUFOVCBDQU1FUkEgQ1NTICovCiAgICAgICAgLmdpYW50LWNhbS1idG4geyAKICAgICAgICAgICAgd2lkdGg6IDEwMCU7IGhlaWdodDogMTYwcHg7IAogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMTM0ZTVlLCAjNzFiMjgwKTsgCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7IAogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMTBweCAyMHB4IHJnYmEoMCwwLDAsMC4xNSk7IAogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7IHRyYW5zaXRpb246IDAuMnM7IGJvcmRlcjogMnB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4zKTsKICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOyBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgIH0KICAgICAgICAuZ2lhbnQtY2FtLWJ0bjphY3RpdmUgeyB0cmFuc2Zvcm06IHNjYWxlKDAuOTYpOyB9CiAgICAgICAgLmdpYW50LWNhbS1pY29uIHsgd2lkdGg6IDcwcHg7IGhlaWdodDogNzBweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgZmlsdGVyOiBkcm9wLXNoYWRvdygwIDJweCA1cHggcmdiYSgwLDAsMCwwLjIpKTsgfQogICAgICAgIC5naWFudC1jYW0tdGV4dCB7IGZvbnQtc2l6ZTogMTJweDsgZm9udC13ZWlnaHQ6IDgwMDsgY29sb3I6IHdoaXRlOyBsZXR0ZXItc3BhY2luZzogMS41cHg7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IH0KICAgICAgICAuZ2lhbnQtcHVsc2UgeyBhbmltYXRpb246IHB1bHNlR2xvdyAycyBpbmZpbml0ZTsgfQogICAgICAgIEBrZXlmcmFtZXMgcHVsc2VHbG93IHsgMCUgeyBib3gtc2hhZG93OiAwIDAgMCAwIHJnYmEoMTEzLCAxNzgsIDEyOCwgMC40KTsgfSA3MCUgeyBib3gtc2hhZG93OiAwIDAgMCAxMHB4IHJnYmEoMTEzLCAxNzgsIDEyOCwgMCk7IH0gMTAwJSB7IGJveC1zaGFkb3c6IDAgMCAwIDAgcmdiYSgxMTMsIDE3OCwgMTI4LCAwKTsgfSB9CgogICAgICAgICNwcmV2aWV3SW1nIHsgd2lkdGg6IDEwMCU7IG1hcmdpbi10b3A6IDEwcHg7IGJvcmRlci1yYWRpdXM6IDEwcHg7IGRpc3BsYXk6IG5vbmU7IGJvcmRlcjogMnB4IHNvbGlkICMzMzM7IG1heC1oZWlnaHQ6IDI1MHB4OyBvYmplY3QtZml0OiBjb3ZlcjsgfQogICAgICAgIAogICAgICAgIC5saXN0LWhlYWRlciB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLXRvcDogMjVweDsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNmMWYxZjE7IHBhZGRpbmctYm90dG9tOiAxMHB4OyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9CiAgICAgICAgLmxpc3QtaGVhZGVyIHNwYW4geyBmb250LXdlaWdodDogNzAwOyBjb2xvcjogIzFlM2M3MjsgZm9udC1zaXplOiAxNHB4OyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDVweDsgfQogICAgICAgIC5saXN0LWNvbnRhaW5lciB7IHRleHQtYWxpZ246IGxlZnQ7IG1hcmdpbi10b3A6IDVweDsgbWF4LWhlaWdodDogMzAwcHg7IG92ZXJmbG93LXk6IGF1dG87IH0KICAgICAgICAKICAgICAgICAudXNlci1jYXJkIHsgYmFja2dyb3VuZDogI2ZmZjsgcGFkZGluZzogMTJweDsgYm9yZGVyOiAxcHggc29saWQgI2YwZjBmMDsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBib3JkZXItbGVmdDogNHB4IHNvbGlkICMxZTNjNzI7IGJvcmRlci1yYWRpdXM6IDhweDsgbWFyZ2luLWJvdHRvbTogOHB4OyBib3gtc2hhZG93OiAwIDJweCA1cHggcmdiYSgwLDAsMCwwLjAzKTsgfQogICAgICAgIC51c2VyLWNhcmQub2ZmbGluZS1pdGVtIHsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZTY3ZTIyOyBiYWNrZ3JvdW5kOiAjZmZmY2Y1OyB9CiAgICAgICAgLnVzZXItaW5mbyB7IGZsZXgtZ3JvdzogMTsgbWluLXdpZHRoOiAwOyBwYWRkaW5nLXJpZ2h0OiA4cHg7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGp1c3RpZnktY29udGVudDogY2VudGVyOyB9CiAgICAgICAgLnVzZXItaW5mbyBzdHJvbmcgeyBmb250LXNpemU6IDEzcHg7IGNvbG9yOiAjMmMzZTUwOyB3aGl0ZS1zcGFjZTogbm93cmFwOyBvdmVyZmxvdzogaGlkZGVuOyB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgfQogICAgICAgIC51c2VyLWRldGFpbHMgeyBmb250LXNpemU6IDExcHg7IGNvbG9yOiAjN2Y4YzhkOyBtYXJnaW4tdG9wOiAzcHg7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNXB4OyB9CiAgICAgICAgCiAgICAgICAgLyogU1RZTEUgSkFNIFJBTkRJSyAqLwogICAgICAgIC5saXZlLXRpbWVyIHsgCiAgICAgICAgICAgIGNvbG9yOiAjZDM1NDAwOyAKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDcwMDsgCiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBDb3VyaWVyLCBtb25vc3BhY2U7IAogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmNWU2OyAKICAgICAgICAgICAgcGFkZGluZzogMnB4IDhweDsgCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsgCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNmYWU1ZDM7IAogICAgICAgICAgICBtaW4td2lkdGg6IDcwcHg7IAogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IAogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICAgICAgICAgICAgZ2FwOiA0cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsgCiAgICAgICAgfQoKICAgICAgICAubGlzdC1hY3Rpb25zIHsgZGlzcGxheTogZmxleDsgZ2FwOiA1cHg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGZsZXgtc2hyaW5rOiAwOyB9CiAgICAgICAgLmljb24tYnRuIHsgY3Vyc29yOiBwb2ludGVyOyBmb250LXNpemU6IDE0cHg7IHdpZHRoOiAyOHB4OyBoZWlnaHQ6IDI4cHg7IGJvcmRlci1yYWRpdXM6IDZweDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGJhY2tncm91bmQ6ICNmOGY5ZmE7IGJvcmRlcjogMXB4IHNvbGlkICNlZWU7IHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4yczsgfQogICAgICAgIC5pY29uLWJ0bjpob3ZlciB7IGJhY2tncm91bmQ6ICNlMmU2ZWE7IH0KCiAgICAgICAgI3NjaGVkdWxlSW5mbyB7IGRpc3BsYXk6IG5vbmU7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyBwYWRkaW5nOiAwOyBtYXJnaW4tYm90dG9tOiAxNXB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGFuaW1hdGlvbjogZmFkZUluIDAuNXM7IH0KICAgICAgICAuc2NoZWR1bGUtbWluaW1hbCB7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBnYXA6IDEwcHg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IH0KICAgICAgICAudGltZS1waWxsIHsgYmFja2dyb3VuZDogI2YxZjNmNTsgcGFkZGluZzogNnB4IDEycHg7IGJvcmRlci1yYWRpdXM6IDIwcHg7IGZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IDYwMDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNlOWVjZWY7IH0KICAgICAgICAKICAgICAgICBAa2V5ZnJhbWVzIGZhZGVJbiB7IGZyb20geyBvcGFjaXR5OiAwOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTVweCk7IH0gdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0gfQoKICAgICAgICAjaW1hZ2VNb2RhbCB7IGRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiBmaXhlZDsgei1pbmRleDogOTk5OTsgbGVmdDogMDsgdG9wOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBvdmVyZmxvdzogYXV0bzsgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjkpOyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgfQogICAgICAgIC5tb2RhbC1jb250ZW50IHsgbWFyZ2luOiBhdXRvOyBkaXNwbGF5OiBibG9jazsgbWF4LXdpZHRoOiA5MCU7IG1heC1oZWlnaHQ6IDgwJTsgYm9yZGVyLXJhZGl1czogMTBweDsgYm9yZGVyOiAycHggc29saWQgd2hpdGU7IH0KICAgICAgICAuY2xvc2UtbW9kYWwgeyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMjBweDsgcmlnaHQ6IDM1cHg7IGNvbG9yOiAjZjFmMWYxOyBmb250LXNpemU6IDQwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IH0KCiAgICAgICAgI3dhcm5pbmdCb3ggeyBkaXNwbGF5OiBub25lOyBwb3NpdGlvbjogZml4ZWQ7IGJvdHRvbTogMDsgbGVmdDogMDsgd2lkdGg6IDEwMCU7IGJhY2tncm91bmQ6ICNjMDM5MmI7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgdGV4dC1hbGlnbjogY2VudGVyOyB6LWluZGV4OiA5OTk5OyBmb250LXdlaWdodDogYm9sZDsgYm94LXNoYWRvdzogMCAtNXB4IDE1cHggcmdiYSgwLDAsMCwwLjIpOyBhbmltYXRpb246IHB1bHNlV2FybiAxcyBpbmZpbml0ZTsgfQogICAgICAgIEBrZXlmcmFtZXMgcHVsc2VXYXJuIHsgMCUgeyBiYWNrZ3JvdW5kOiAjYzAzOTJiOyB9IDUwJSB7IGJhY2tncm91bmQ6ICNlNzRjM2M7IH0gMTAwJSB7IGJhY2tncm91bmQ6ICNjMDM5MmI7IH0gfQogICAgICAgIAogICAgICAgICNsb2FkaW5nQ29uZmlnIHsgZm9udC1zaXplOiAxMXB4OyBjb2xvcjogI2U2N2UyMjsgZGlzcGxheTogbm9uZTsgbWFyZ2luLWJvdHRvbTogNXB4OyBmb250LXN0eWxlOiBpdGFsaWM7IH0KICAgICAgICAjc3RhdHVzVGV4dCB7IGZvbnQtc2l6ZTogMTFweDsgZm9udC13ZWlnaHQ6IDYwMDsgbWFyZ2luLWJvdHRvbTogMTVweDsgY29sb3I6ICM5NWE1YTY7IGJhY2tncm91bmQ6ICNmOGY5ZmE7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgcGFkZGluZzogNHB4IDEycHg7IGJvcmRlci1yYWRpdXM6IDE1cHg7IGRpc3BsYXk6IGlubGluZS1mbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDVweDsgfQoKICAgICAgICAvKiAtLS0gM0QgSUNPTlMgU1RZTEVTIC0tLSAqLwogICAgICAgIC5pY29uLTNkLW1pbmkgeyB3aWR0aDogMTZweDsgaGVpZ2h0OiAxNnB4OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBtYXJnaW4tcmlnaHQ6IDJweDsgZmlsdGVyOiBkcm9wLXNoYWRvdygwIDFweCAxcHggcmdiYSgwLDAsMCwwLjIpKTsgfQogICAgICAgIC5pY29uLTNkLXN0ZCB7IHdpZHRoOiAyMnB4OyBoZWlnaHQ6IDIycHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IG1hcmdpbi1yaWdodDogNXB4OyBmaWx0ZXI6IGRyb3Atc2hhZG93KDAgMnB4IDJweCByZ2JhKDAsMCwwLDAuMSkpOyB9CiAgICAgICAgLmljb24tM2QtbGcgeyB3aWR0aDogMzJweDsgaGVpZ2h0OiAzMnB4OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyB9CiAgICAgICAgLmljb24tM2QteGwgeyB3aWR0aDogNjRweDsgaGVpZ2h0OiA2NHB4OyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9CiAgICAgICAgCiAgICAgICAgQGtleWZyYW1lcyBzcGluM2QgeyAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9IDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9IH0KICAgICAgICAuc3Bpbi0zZCB7IGFuaW1hdGlvbjogc3BpbjNkIDJzIGxpbmVhciBpbmZpbml0ZTsgfQoKICAgICAgICAjY3VzdG9tTW9kYWwsICNhdmF0YXJNb2RhbENvbnRhaW5lciB7IGRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiBmaXhlZDsgei1pbmRleDogMTAwMDA7IGxlZnQ6IDA7IHRvcDogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLDAsMCwwLjYpOyBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNXB4KTsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFuaW1hdGlvbjogZmFkZUluIDAuM3M7IH0KICAgICAgICAuY3VzdG9tLW1vZGFsLWNvbnRlbnQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMzBweCAyNXB4OyBib3JkZXItcmFkaXVzOiAyMHB4OyB3aWR0aDogODUlOyBtYXgtd2lkdGg6IDM1MHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJveC1zaGFkb3c6IDAgMjBweCA1MHB4IHJnYmEoMCwwLDAsMC4zKTsgdHJhbnNmb3JtOiBzY2FsZSgwLjkpOyBhbmltYXRpb246IHBvcFVwIDAuM3MgZm9yd2FyZHM7IH0KICAgICAgICBAa2V5ZnJhbWVzIHBvcFVwIHsgdG8geyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9IH0KICAgICAgICAubW9kYWwtaWNvbi10b3AgeyBmb250LXNpemU6IDUwcHg7IG1hcmdpbi1ib3R0b206IDE1cHg7IGRpc3BsYXk6IGJsb2NrOyB9CiAgICAgICAgLm1vZGFsLXRpdGxlIHsgZm9udC1zaXplOiAxOHB4OyBmb250LXdlaWdodDogNzAwOyBjb2xvcjogIzJjM2U1MDsgbWFyZ2luLWJvdHRvbTogMTBweDsgfQogICAgICAgIC5tb2RhbC1tc2cgeyBmb250LXNpemU6IDEzcHg7IGNvbG9yOiAjNTU1OyBtYXJnaW4tYm90dG9tOiAyMHB4OyBsaW5lLWhlaWdodDogMS41OyB9CiAgICAgICAgLm1vZGFsLWJ0bi1yb3cgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDEwcHg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyB9CiAgICAgICAgLm1vZGFsLWJ0biB7IGZsZXg6IDE7IHBhZGRpbmc6IDEycHg7IGJvcmRlci1yYWRpdXM6IDEwcHg7IGJvcmRlcjogbm9uZTsgZm9udC13ZWlnaHQ6IDYwMDsgY3Vyc29yOiBwb2ludGVyOyBmb250LXNpemU6IDEzcHg7IH0KICAgICAgICAuYnRuLW9rIHsgYmFja2dyb3VuZDogIzFlM2M3MjsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgLmJ0bi1jYW5jZWwtbW9kYWwgeyBiYWNrZ3JvdW5kOiAjZWNmMGYxOyBjb2xvcjogIzdmOGM4ZDsgfQoKICAgICAgICAvKiBTdGF0dXMgQmFyIHVudHVrIE9mZmxpbmUvU3luYyAqLwogICAgICAgICNzeW5jU3RhdHVzQmFyIHsgZGlzcGxheTogbm9uZTsgcG9zaXRpb246IGZpeGVkOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBwYWRkaW5nOiAxMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IHotaW5kZXg6IDEwMDAxOyBmb250LXNpemU6IDEycHg7IGZvbnQtd2VpZ2h0OiA2MDA7IGNvbG9yOiB3aGl0ZTsgYm94LXNoYWRvdzogMCAycHggMTBweCByZ2JhKDAsMCwwLDAuMik7IH0KICAgICAgICAKICAgICAgICAjYXV0b01vZGVJbmRpY2F0b3IgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICM2YTExY2IsICMyNTc1ZmMpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDVweDsgZm9udC1zaXplOiAxMHB4OyBmb250LXdlaWdodDogNzAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDE1cHg7IGJvcmRlci1yYWRpdXM6IDVweDsgYm94LXNoYWRvdzogMCAzcHggNnB4IHJnYmEoMCwwLDAsMC4xKTsgZGlzcGxheTogbm9uZTsgfQoKICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHkgb25jb250ZXh0bWVudT0icmV0dXJuIGZhbHNlOyI+IAoKICAgIDxkaXYgaWQ9InN5bmNTdGF0dXNCYXIiPjwvZGl2PgogICAgPGRpdiBpZD0id2FybmluZ0JveCI+IEFNQVJBTiEgS0VMVUFSIFpPTi48YnI+QVVUTy1DSEVDS09VVCBEQUxBTSA8c3BhbiBpZD0iY291bnREb3duIj4xMDwvc3Bhbj5TPC9kaXY+CgogICAgPGRpdiBpZD0iY3VzdG9tTW9kYWwiPgogICAgICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1jb250ZW50Ij4KICAgICAgICAgICAgPHNwYW4gaWQ9Im1vZGFsSWNvbiIgY2xhc3M9Im1vZGFsLWljb24tdG9wIj48L3NwYW4+CiAgICAgICAgICAgIDxkaXYgaWQ9Im1vZGFsVGl0bGUiIGNsYXNzPSJtb2RhbC10aXRsZSI+VGFqdWs8L2Rpdj4KICAgICAgICAgICAgPGRpdiBpZD0ibW9kYWxNc2ciIGNsYXNzPSJtb2RhbC1tc2ciPk1lc2VqIGRpIHNpbmkuLi48L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYnRuLXJvdyIgaWQ9Im1vZGFsQnRuUm93Ij4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im1vZGFsLWJ0biBidG4tb2siIG9uY2xpY2s9ImNsb3NlQ3VzdG9tTW9kYWwoKSI+RmFoYW08L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8IS0tIE1PREFMIFBJTElIIEFWQVRBUiAtLT4KICAgIDxkaXYgaWQ9ImF2YXRhck1vZGFsQ29udGFpbmVyIj4KICAgICAgICA8ZGl2IGNsYXNzPSJjdXN0b20tbW9kYWwtY29udGVudCI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLXRpdGxlIj5QSUxJSCBBVkFUQVIgQU5EQTwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1tc2ciPlBpbGloIGlrb24geWFuZyBzZXN1YWkgZGVuZ2FuIGdheWEgYW5kYS48L2Rpdj4KICAgICAgICAgICAgPGRpdiBpZD0iYXZhdGFyR3JpZCIgY2xhc3M9ImF2YXRhci1ncmlkIj4KICAgICAgICAgICAgICAgIDwhLS0gSUNPTlMgSU5KRUNURUQgVklBIEpTIC0tPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtYnRuLXJvdyIgc3R5bGU9Im1hcmdpbi10b3A6MTVweDsiPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibW9kYWwtYnRuIGJ0bi1jYW5jZWwtbW9kYWwiIG9uY2xpY2s9ImNsb3NlQXZhdGFyTW9kYWwoKSI+VHV0dXA8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGlkPSJpbWFnZU1vZGFsIj4KICAgICAgICA8c3BhbiBjbGFzcz0iY2xvc2UtbW9kYWwiIG9uY2xpY2s9ImNsb3NlTW9kYWwoKSI+JnRpbWVzOzwvc3Bhbj4KICAgICAgICA8aW1nIGNsYXNzPSJtb2RhbC1jb250ZW50IiBpZD0iaW1nRnVsbCI+CiAgICA8L2Rpdj4KCiAgICA8ZGl2IGNsYXNzPSJjb250YWluZXIiPgogICAgICAgIAogICAgICAgIDxkaXYgY2xhc3M9ImhlYWRlci1iZyI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9InRvcC1iYXItcm93Ij4KICAgICAgICAgICAgICAgIDxzcGFuPgogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MjUwLzQyNTAzMjAucG5nIiBjbGFzcz0iaWNvbi0zZC1taW5pIj4gCiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImRhdGVEaXNwbGF5Ij4tLS8tLS8tLTwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvc3Bhbj4gCiAgICAgICAgICAgICAgICA8c3Bhbj58PC9zcGFuPiAKICAgICAgICAgICAgICAgIDxzcGFuPgogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8yMDg4LzIwODg2MTcucG5nIiBjbGFzcz0iaWNvbi0zZC1taW5pIj4gCiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImNsb2NrRGlzcGxheSI+LS06LS08L3NwYW4+CiAgICAgICAgICAgICAgICA8L3NwYW4+IAogICAgICAgICAgICAgICAgPHNwYW4+fDwvc3Bhbj4gCiAgICAgICAgICAgICAgICA8c3Bhbj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDM1OC80MzU4NjY3LnBuZyIgY2xhc3M9Imljb24tM2QtbWluaSI+IAogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJoaWpyaURpc3BsYXkiPi4uLjwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtYWluLXRpdGxlLWJsb2NrIj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRpdGxlLXNtYWxsIj5TSVNURU0gUEVOR1VSVVNBTjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGl0bGUtYmlnIj5FLUhBRElSPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0aXRsZS1iaWciPlNLIFNFTEFNQSAoSyk8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9ImNvbnRlbnQtcGFkZGluZyI+CiAgICAgICAgICAgIDxkaXYgaWQ9ImF1dG9Nb2RlSW5kaWNhdG9yIj5NT0RFIEFVVE88L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgICAgIDxkaXYgaWQ9InN0YXR1c1RleHQiPgogICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzkwNzcvOTA3Nzk3NS5wbmciIGNsYXNzPSJpY29uLTNkLW1pbmkgc3Bpbi0zZCI+IAogICAgICAgICAgICAgICAgTWVuY2FyaSBHUFMuLi4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGlkPSJkYXNoYm9hcmRQYW5lbCI+CiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0idXNlci13ZWxjb21lIj4KICAgICAgICAgICAgICAgICAgICA8aW1nIGlkPSJ1c2VyQXZhdGFyRGFzaCIgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MTQwLzQxNDAwNDcucG5nIiBjbGFzcz0iaWNvbi0zZC1sZyI+IAogICAgICAgICAgICAgICAgICAgIEhhaSwgPHNwYW4gaWQ9InNlc3Npb25OYW1lIj4tLTwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImxvY2tlZC1tc2ciPkF1dG8gQ2hlY2stSW4gQmVyamF5YS48L2Rpdj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGRpdiBpZD0iZGFzaGJvYXJkU2NoZWR1bGUiIHN0eWxlPSJmb250LXNpemU6MTJweDsgY29sb3I6IzJjM2U1MDsgYmFja2dyb3VuZDojZmZmM2NkOyBwYWRkaW5nOjEwcHg7IGJvcmRlci1yYWRpdXM6OHB4OyBtYXJnaW4tYm90dG9tOjE1cHg7IGRpc3BsYXk6bm9uZTsgYm9yZGVyOiAxcHggc29saWQgI2ZmZWViYTsiPgogICAgICAgICAgICAgICAgICAgIFdha3R1IFB1bGFuZyBSYXNtaTogPHNwYW4gaWQ9InVzZXJFeGl0VGltZSIgc3R5bGU9ImZvbnQtd2VpZ2h0OmJvbGQ7Ij4tLTotLTwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxwIGlkPSJkeW5hbWljU3RhdHVzIiBzdHlsZT0ibWFyZ2luOjAgMCAxNXB4IDA7IGZvbnQtc2l6ZToxMXB4OyBjb2xvcjojMjdhZTYwOyBmb250LXdlaWdodDo3MDA7IGxldHRlci1zcGFjaW5nOjAuNXB4OyB0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7Ij5TVEFUVVM6IFNFREFORyBCRVJUVUdBUzwvcD4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPCEtLSBISURERU4gQUxBU0FOIElOUFVUIEZPUiBBVVRPIE1PREUgLS0+CiAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9ImFsYXNhbktlbHVhciIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIHBsYWNlaG9sZGVyPSJNb2hvbiBueWF0YWthbiBzZWJhYiBwdWxhbmcgYXdhbCB1bnR1ayBtYWtsdW1hbiBwZW50YWRiaXIuLi4iPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bktlbHVhciIgY2xhc3M9ImJ0biBidG4ta2VsdWFyIiBvbmNsaWNrPSJoYW50YXJLZWx1YXIoZmFsc2UpIj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMzU4MC8zNTgwMTU0LnBuZyIgY2xhc3M9Imljb24tM2Qtc3RkIj4gREFGVEFSIEtFTFVBUiAoTUFOVUFMKQogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDIwcHg7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZWVlOyBwYWRkaW5nLXRvcDogMTVweDsiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tcGVsYXdhdCIgb25jbGljaz0ic2hvd1BlbGF3YXRGb3JtKCkiIHN0eWxlPSJmb250LXNpemU6MTNweDsgcGFkZGluZzogMTJweDsiPgogICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMzEzNS8zMTM1NzY4LnBuZyIgY2xhc3M9Imljb24tM2Qtc3RkIj4gQkFOVFUgREFGVEFSIFBFTEFXQVQKICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9ImRlZmF1bHRGb3JtIj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImxvYWRpbmdDb25maWciPgogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8xODkvMTg5NzkyLnBuZyIgY2xhc3M9Imljb24tM2QtbWluaSBzcGluLTNkIj4gU2VkYW5nIG1lbnllbWFrIGphZHVhbCB0ZXJraW5pLi4uCiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgaWQ9InNjaGVkdWxlSW5mbyI+PC9kaXY+CiAgICAgICAgICAgICAgICA8c2VsZWN0IGlkPSJrYXRlZ29yaSIgb25jaGFuZ2U9ImNoZWNrS2F0ZWdvcmkoKTsgdXBkYXRlU2NoZWR1bGVJbmZvKCk7Ij4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSIiIGRpc2FibGVkIHNlbGVjdGVkPi0tIFBJTElIIEtBVEVHT1JJIC0tPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iR1VSVSI+R1VSVTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkFLUCI+QUtQPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iS0VCRVJTSUhBTiI+S0VCRVJTSUhBTjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlBFTEFXQVQiPlBFTEFXQVQgKEFXQU0pPC9vcHRpb24+CiAgICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPCEtLSBJTlBVVCBOQU1BIFdJVEggTE9DSyAmIEFWQVRBUiBCVVRUT05TIC0tPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtZ3JvdXAiPgogICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ibmFtYSIgcGxhY2Vob2xkZXI9Ik5BTUEgUEVOVUggKEhVUlVGIEJFU0FSKSIgc3R5bGU9InRleHQtdHJhbnNmb3JtOnVwcGVyY2FzZSI+CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgPCEtLSBBVkFUQVIgQlVUVE9OIC0tPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImF2YXRhckJ0biIgY2xhc3M9ImxvY2stYnRuIGF2YXRhci1idG4iIG9uY2xpY2s9Im9wZW5BdmF0YXJNb2RhbCgpIiB0aXRsZT0iUGlsaWggQXZhdGFyIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBpZD0iY3VycmVudEF2YXRhck1pbmkiIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDE0MC80MTQwMDQ4LnBuZyIgY2xhc3M9Imljb24tM2QtbWluaSI+CiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CgogICAgICAgICAgICAgICAgICAgIDwhLS0gTE9DSyBCVVRUT04gLS0+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0ibG9ja0J0biIgY2xhc3M9ImxvY2stYnRuIiBvbmNsaWNrPSJ0b2dnbGVMb2NrTmFtZSgpIiB0aXRsZT0iS3VuY2kgTmFtYSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8yODg5LzI4ODk2NzYucG5nIiBjbGFzcz0iaWNvbi0zZC1taW5pIiBpZD0ibG9ja0ljb25JbWciIHN0eWxlPSJmaWx0ZXI6b3BhY2l0eSgwLjQpIj4KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8IS0tIEhJRERFTiBBTEFTQU4gSU5QVVQgRk9SIEFVVE8gTU9ERSAtLT4KICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0iYWxhc2FuTWFzdWsiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IiBwbGFjZWhvbGRlcj0iTWFhZiwgYW5kYSBsZXdhdCBzZWRpa2l0LiBNb2hvbiBueWF0YWthbiBzZWJhYjoiPjwvdGV4dGFyZWE+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImZvbnQtc2l6ZToxMHB4OyBjb2xvcjojZTY3ZTIyOyBtYXJnaW4tYm90dG9tOjEwcHg7Ij5TaWxhIHRla2FuICdLVU5DSScgTmFtYSAmIEthdGVnb3JpIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0bk1haW5TdWJtaXQiIGNsYXNzPSJidG4iIG9uY2xpY2s9ImhhbnRhck1hc3VrKGZhbHNlKSI+CiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4Lzk0MDIvOTQwMjM0Mi5wbmciIGNsYXNzPSJpY29uLTNkLXN0ZCI+IERBRlRBUiBNQVNVSyAoTUFOVUFMKQogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBpZD0icGVsYXdhdFBhbmVsIj4KICAgICAgICAgICAgICAgIDxoMyBzdHlsZT0iY29sb3I6IzI3YWU2MDsgbWFyZ2luOjAgMCA1cHggMDsgZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IGp1c3RpZnktY29udGVudDpjZW50ZXI7IGdhcDo1cHg7Ij4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMzY4Ny8zNjg3NDE2LnBuZyIgY2xhc3M9Imljb24tM2QtbGciPiBNT0QgUEVMQVdBVAogICAgICAgICAgICAgICAgPC9oMz4KICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6MTFweDsgY29sb3I6IzY2NjsgbWFyZ2luLWJvdHRvbToxNXB4OyI+U2lsYSBhbWJpbCBnYW1iYXIgJiBpc2kgbmFtYSBwZWxhd2F0LjwvcD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ibmFtYVBlbGF3YXRJbnB1dCIgcGxhY2Vob2xkZXI9Ik5BTUEgUEVOVUggUEVMQVdBVCIgc3R5bGU9InRleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTsiPgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW46IDE1cHggMDsiPgogICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz0iZ2lhbnQtY2FtLWJ0biBnaWFudC1wdWxzZSI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8zNjg3LzM2ODc0MTYucG5nIiBjbGFzcz0iZ2lhbnQtY2FtLWljb24iPgogICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0iZ2lhbnQtY2FtLXRleHQiPlNOQVAgRk9UTzwvc3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImZpbGUiIGFjY2VwdD0iaW1hZ2UvKiIgY2FwdHVyZT0iZW52aXJvbm1lbnQiIHN0eWxlPSJkaXNwbGF5Om5vbmUiIG9uY2hhbmdlPSJwcm9jZXNzSW1hZ2UodGhpcykiPgogICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8aW1nIGlkPSJwcmV2aWV3SW1nIj4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIGlkPSJiYXNlNjRGb3RvIj4KICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImJ0blBlbGF3YXRTdWJtaXQiIGNsYXNzPSJidG4gYnRuLXBlbGF3YXQiIG9uY2xpY2s9ImhhbnRhclBlbGF3YXQoKSI+CiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4Lzk0MDIvOTQwMjM0Mi5wbmciIGNsYXNzPSJpY29uLTNkLXN0ZCI+IEhBTlRBUiBEQVRBCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tY2FuY2VsIiBvbmNsaWNrPSJjYW5jZWxQZWxhd2F0KCkiPkJBVEFMPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGlzdC1oZWFkZXIiPgogICAgICAgICAgICAgICAgPHNwYW4+CiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4Lzk0Mi85NDI3OTkucG5nIiBjbGFzcz0iaWNvbi0zZC1zdGQiPiAKICAgICAgICAgICAgICAgICAgICBSZWtvZCBIYXJpIEluaSAoPHNwYW4gaWQ9ImNvdW50Ij4wPC9zcGFuPikKICAgICAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0ibG9hZExpc3QoKSIgc3R5bGU9ImJvcmRlcjpub25lOyBiYWNrZ3JvdW5kOm5vbmU7IGN1cnNvcjpwb2ludGVyOyI+CiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzMwMzEvMzAzMTcxOC5wbmciIGNsYXNzPSJpY29uLTNkLXN0ZCI+CiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgaWQ9Imxpc3RDb250YWluZXIiIGNsYXNzPSJsaXN0LWNvbnRhaW5lciI+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJwYWRkaW5nOjIwcHg7IGNvbG9yOiM5OTk7IGZvbnQtc2l6ZToxMnB4OyI+TWVtdWF0a2FuIGRhdGEuLi48L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgIDwvZGl2PgogICAgPC9kaXY+Cgo8c2NyaXB0PgogICAgbGV0IGphbUNvbmZpZyA9IG51bGw7IAogICAgbGV0IGlzSW5ab25lID0gZmFsc2U7IAogICAgbGV0IGN1cnJlbnREaXN0ID0gMDsgCiAgICBsZXQgbGFzdExhdCA9IDAsIGxhc3RMbmcgPSAwOwogICAgbGV0IGN1cnJlbnRMaXN0ID0gW107IAogICAgbGV0IGlzU3VibWl0dGluZyA9IGZhbHNlOyAKICAgIGxldCBoYXNOb3RpZmllZFdha2UgPSBmYWxzZTsgLy8gRmxhZyB1bnR1ayBub3RpZmlrYXNpIHNla2FsaSBzZWhhcmkKICAgIAogICAgLy8gVkFSSUFCTEVTIFVOVFVLIEFVVE8tTE9HSUMgJiBBTlRJLVNQQU0KICAgIGxldCBpblpvbmVTdGFydCA9IDA7IC8vIFRpbWVzdGFtcCBtYXN1ayBrYXdhc2FuCiAgICBsZXQgb3V0Wm9uZVN0YXJ0ID0gMDsgLy8gVGltZXN0YW1wIGtlbHVhciBrYXdhc2FuCiAgICBsZXQgd2FrZUxvY2sgPSBudWxsOwoKICAgIC8vIFZBUklBQkxFUyBOT1RJRklLQVNJIFNJVFVBU0kKICAgIGxldCBoYXNOb3RpZmllZEVudHJ5ID0gZmFsc2U7CiAgICBsZXQgaGFzTm90aWZpZWRFeGl0ID0gZmFsc2U7CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyAgICAgICBMT0dJSyBNT0QgT0ZGTElORSAmIFNZTkMgUElOVEFSCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIAogICAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHsKICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJ3N3LmpzJykudGhlbihyZWcgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NXIEJlcmpheWE6JywgcmVnLnNjb3BlKTsKICAgICAgICAgICAgICAgIGlmICgnU3luY01hbmFnZXInIGluIHdpbmRvdykgewogICAgICAgICAgICAgICAgICAgIHJlZy5zeW5jLnJlZ2lzdGVyKCdzeW5jLWF0dGVuZGFuY2UnKS5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coIlN5bmMgYmcgZ2FnYWwiLCBlcnIpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKCdTVyBHYWdhbDonLCBlcnIpKTsKICAgICAgICB9KTsKICAgIH0KCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb25saW5lJywgKCkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCJJbnRlcm5ldCBkaWtlc2FuISBNZW11bGFrYW4gc2lua3JvbmlzYXNpLi4uIik7CiAgICAgICAgc2hvd1N5bmNCYXIoIkludGVybmV0IEtlbWJhbGkgUHVsaWguIE1lbnllZ2VyYWtrYW4gZGF0YS4uLiIsICIjMmVjYzcxIik7CiAgICAgICAgaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IgJiYgJ1N5bmNNYW5hZ2VyJyBpbiB3aW5kb3cpIHsKICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHkudGhlbihzdyA9PiB7IHJldHVybiBzdy5zeW5jLnJlZ2lzdGVyKCdzeW5jLWF0dGVuZGFuY2UnKTsgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZmV0Y2goJy9zdy5qcycpOyAKICAgICAgICB9CiAgICAgICAgc3luY09mZmxpbmVEYXRhKCk7CiAgICB9KTsKCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb2ZmbGluZScsICgpID0+IHsKICAgICAgICBzaG93U3luY0JhcigiTU9EIE9GRkxJTkU6IERhdGEgYWthbiBkaXNpbXBhbiBkYWxhbSB0ZWxlZm9uLiIsICIjZTc0YzNjIik7CiAgICB9KTsKCiAgICBmdW5jdGlvbiBzaG93U3luY0Jhcihtc2csIGNvbG9yKSB7CiAgICAgICAgY29uc3QgYmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N5bmNTdGF0dXNCYXInKTsKICAgICAgICBiYXIuaW5uZXJUZXh0ID0gbXNnOwogICAgICAgIGJhci5zdHlsZS5iYWNrZ3JvdW5kID0gY29sb3I7CiAgICAgICAgYmFyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIGlmKGNvbG9yID09PSAiIzJlY2M3MSIpIHNldFRpbWVvdXQoKCkgPT4geyBiYXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfSwgNDAwMCk7CiAgICB9CgogICAgZnVuY3Rpb24gc3luY09mZmxpbmVEYXRhKCkgewogICAgICAgIGlmICghbmF2aWdhdG9yLm9uTGluZSkgcmV0dXJuOwogICAgICAgIGxldCBvZmZsaW5lUXVldWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfb2ZmbGluZV9xdWV1ZScpIHx8ICJbXSIpOwogICAgICAgIGlmIChvZmZsaW5lUXVldWUubGVuZ3RoID09PSAwKSByZXR1cm47IAoKICAgICAgICBzaG93U3luY0JhcigiTWVuZ2hhbnRhciAiICsgb2ZmbGluZVF1ZXVlLmxlbmd0aCArICIgZGF0YSB0ZXJ0YW5nZ3VoLi4uIiwgIiMzNDk4ZGIiKTsKICAgICAgICBsZXQgaXRlbVRvU3luYyA9IG9mZmxpbmVRdWV1ZVswXTsKICAgICAgICBpZiAoIWl0ZW1Ub1N5bmMua2F0ZWdvcmkgfHwgaXRlbVRvU3luYy5rYXRlZ29yaSA9PT0gInVuZGVmaW5lZCIgfHwgaXRlbVRvU3luYy5rYXRlZ29yaSA9PT0gbnVsbCkgewogICAgICAgICAgICBpdGVtVG9TeW5jLmthdGVnb3JpID0gIlBFTEFXQVQiOwogICAgICAgIH0KCiAgICAgICAgZmV0Y2goQVBJX1VSTCwgeyBtZXRob2Q6ICJQT1NUIiwgYm9keTogSlNPTi5zdHJpbmdpZnkoaXRlbVRvU3luYykgfSkKICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgaWYgKHJlcy5yZXN1bHQgPT09ICJzdWNjZXNzIikgewogICAgICAgICAgICAgICAgb2ZmbGluZVF1ZXVlLnNoaWZ0KCk7IAogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VoYWRpcl9vZmZsaW5lX3F1ZXVlJywgSlNPTi5zdHJpbmdpZnkob2ZmbGluZVF1ZXVlKSk7CiAgICAgICAgICAgICAgICBpZiAob2ZmbGluZVF1ZXVlLmxlbmd0aCA+IDApIHsgc3luY09mZmxpbmVEYXRhKCk7IH0gCiAgICAgICAgICAgICAgICBlbHNlIHsgc2hvd1N5bmNCYXIoIj8gU2VtdWEgZGF0YSBvZmZsaW5lIHRlbGFoIGJlcmpheWEgZGloYW50YXIhIiwgIiMyN2FlNjAiKTsgbG9hZExpc3QoKTsgfQogICAgICAgICAgICB9IGVsc2UgeyBzaG93U3luY0JhcigiUmFsYXQgU2VydmVyOiAiICsgcmVzLm1zZywgIiNjMDM5MmIiKTsgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGVyciA9PiB7IHNob3dTeW5jQmFyKCJSYWxhdCBOZXR3b3JrLiBBa2FuIGN1YmEgc2ViZW50YXIgbGFnaS4iLCAiI2U2N2UyMiIpOyB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzaG93TW9kZXJuQWxlcnQodGl0bGUsIG1zZywgdHlwZSwgY2FsbGJhY2spIHsKICAgICAgICAvLyBPdmVycmlkZSBmb3IgQXV0byBNb2RlOiBEb24ndCBibG9jayBpZiBBdXRvCiAgICAgICAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbU1vZGFsJyk7CiAgICAgICAgbGV0IG1UaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbFRpdGxlJyk7CiAgICAgICAgbGV0IG1Nc2cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWxNc2cnKTsKICAgICAgICBsZXQgbUljb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWxJY29uJyk7CiAgICAgICAgbGV0IG1CdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsQnRuUm93Jyk7CgogICAgICAgIG1UaXRsZS5pbm5lclRleHQgPSB0aXRsZTsKICAgICAgICBtTXNnLmlubmVySFRNTCA9IG1zZzsgCiAgICAgICAgCiAgICAgICAgaWYodHlwZSA9PT0gJ2Vycm9yJykgewogICAgICAgICAgICBtSWNvbi5pbm5lclRleHQgPSAiIjsgbVRpdGxlLnN0eWxlLmNvbG9yID0gIiNjMDM5MmIiOwogICAgICAgICAgICBtQnRucy5pbm5lckhUTUwgPSBgPGJ1dHRvbiBjbGFzcz0ibW9kYWwtYnRuIGJ0bi1vayIgb25jbGljaz0iY2xvc2VDdXN0b21Nb2RhbCgpIj5GYWhhbTwvYnV0dG9uPmA7CiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09ICdzdWNjZXNzJykgewogICAgICAgICAgICBtSWNvbi5pbm5lclRleHQgPSAiPyI7IG1UaXRsZS5zdHlsZS5jb2xvciA9ICIjMjdhZTYwIjsKICAgICAgICAgICAgbUJ0bnMuaW5uZXJIVE1MID0gYDxidXR0b24gY2xhc3M9Im1vZGFsLWJ0biBidG4tb2siIG9uY2xpY2s9ImNsb3NlQ3VzdG9tTW9kYWwoKSI+VGVyYmFpazwvYnV0dG9uPmA7CiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09ICdpbmZvJykgewogICAgICAgICAgICBtSWNvbi5pbm5lclRleHQgPSAiIjsgbVRpdGxlLnN0eWxlLmNvbG9yID0gIiMyOTgwYjkiOwogICAgICAgICAgICBtQnRucy5pbm5lckhUTUwgPSBgPGJ1dHRvbiBjbGFzcz0ibW9kYWwtYnRuIGJ0bi1vayIgb25jbGljaz0iY2xvc2VDdXN0b21Nb2RhbCgpIj5PSzwvYnV0dG9uPmA7CiAgICAgICAgfSBlbHNlIGlmKHR5cGUgPT09ICdjb25maXJtJykgewogICAgICAgICAgICBtSWNvbi5pbm5lclRleHQgPSAiIjsgbVRpdGxlLnN0eWxlLmNvbG9yID0gIiMxZTNjNzIiOwogICAgICAgICAgICB3aW5kb3cudGVtcENhbGxiYWNrID0gY2FsbGJhY2s7CiAgICAgICAgICAgIG1CdG5zLmlubmVySFRNTCA9IGA8YnV0dG9uIGNsYXNzPSJtb2RhbC1idG4gYnRuLWNhbmNlbC1tb2RhbCIgb25jbGljaz0iY2xvc2VDdXN0b21Nb2RhbCgpIj5CYXRhbDwvYnV0dG9uPjxidXR0b24gY2xhc3M9Im1vZGFsLWJ0biBidG4tb2siIG9uY2xpY2s9ImNvbmZpcm1BY3Rpb24oKSI+VGVydXNrYW48L2J1dHRvbj5gOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1JY29uLmlubmVyVGV4dCA9ICIiOyBtVGl0bGUuc3R5bGUuY29sb3IgPSAiIzJjM2U1MCI7CiAgICAgICAgICAgIG1CdG5zLmlubmVySFRNTCA9IGA8YnV0dG9uIGNsYXNzPSJtb2RhbC1idG4gYnRuLW9rIiBvbmNsaWNrPSJjbG9zZUN1c3RvbU1vZGFsKCkiPlR1dHVwPC9idXR0b24+YDsKICAgICAgICB9CiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsKICAgIH0KCiAgICBmdW5jdGlvbiBjbG9zZUN1c3RvbU1vZGFsKCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOyB9CiAgICBmdW5jdGlvbiBjb25maXJtQWN0aW9uKCkgeyBjbG9zZUN1c3RvbU1vZGFsKCk7IGlmKHdpbmRvdy50ZW1wQ2FsbGJhY2spIHdpbmRvdy50ZW1wQ2FsbGJhY2soKTsgfQoKICAgIGZ1bmN0aW9uIHNlbmROb3RpZmljYXRpb24odGl0bGUsIGJvZHksIHRhZykgewogICAgICAgIGlmKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSAiZ3JhbnRlZCIpIHsKICAgICAgICAgICAgaWYoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikgewogICAgICAgICAgICAgICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHkudGhlbihyZWcgPT4gewogICAgICAgICAgICAgICAgICAgIHJlZy5zaG93Tm90aWZpY2F0aW9uKHRpdGxlLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IGJvZHksCiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC85NDAyLzk0MDIzNDIucG5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiB0YWcsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlbm90aWZ5OiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICB2aWJyYXRlOiBbMjAwLCAxMDAsIDIwMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgdXJsOiBsb2NhdGlvbi5ocmVmIH0gCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIG5ldyBOb3RpZmljYXRpb24odGl0bGUsIHsgYm9keTogYm9keSwgdGFnOiB0YWcgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgIHN0YXJ0Q2xvY2soKTsKICAgICAgICBzdGFydFJhZGFyKCk7CiAgICAgICAgZmV0Y2hDb25maWcoKTsgCiAgICAgICAgZ2V0SGlqcmlEYXRlKCk7CiAgICAgICAgaW5pdExvY2tOYW1lKCk7IAogICAgICAgIGluaXRBdmF0YXIoKTsgLy8gSW5pdCBhdmF0YXIKICAgICAgICBpbml0QmFja2dyb3VuZFNlcnZpY2UoKTsgLy8gSW5pdGlhbGl6ZSBXYWtlTG9jayAmIFBlcm1pc3Npb24KICAgICAgICAKICAgICAgICBpZighbmF2aWdhdG9yLm9uTGluZSkgc2hvd1N5bmNCYXIoIk1PRCBPRkZMSU5FOiBEYXRhIGFrYW4gZGlzaW1wYW4gZGFsYW0gdGVsZWZvbi4iLCAiI2U3NGMzYyIpOwogICAgICAgIGVsc2Ugc3luY09mZmxpbmVEYXRhKCk7IAoKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgY2hlY2tTZXNzaW9uKCk7CiAgICAgICAgICAgIHNldEludGVydmFsKHVwZGF0ZURhc2hib2FyZEluZm8sIDUwMDApOyAKICAgICAgICB9LCAyMDAwKTsKCiAgICAgICAgbG9hZExpc3QoKTsKICAgICAgICBzZXRJbnRlcnZhbCh1cGRhdGVMaXZlVGltZXJzLCAxMDAwKTsKICAgICAgICAKICAgICAgICAvLyAtLS0gVUJBSCBTVUFJIFNVUkdJS0FMOiBXRUIgV09SS0VSIFVOVFVLIEVMQUsgVEhST1RUTElORyBESSBMQVRBUiBCRUxBS0FORyAtLS0KICAgICAgICAvLyBNZW5nZ2FudGlrYW4gc2V0SW50ZXJ2YWwgYmlhc2EgeWFuZyBha2FuICdiZWt1JyBqaWthIHBob25lIGRpa3VuY2kKICAgICAgICBjb25zdCB3b3JrZXJCbG9iID0gbmV3IEJsb2IoWyJzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkgeyBzZXRJbnRlcnZhbChmdW5jdGlvbigpeyBzZWxmLnBvc3RNZXNzYWdlKCd0aWNrJyk7IH0sIDEwMDApOyB9Il0sIHsgdHlwZTogInRleHQvamF2YXNjcmlwdCIgfSk7CiAgICAgICAgY29uc3Qgd29ya2VyID0gbmV3IFdvcmtlcihVUkwuY3JlYXRlT2JqZWN0VVJMKHdvcmtlckJsb2IpKTsKICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24oZSkgeyBtb25pdG9yQXV0b0xvZ2ljKCk7IH07CiAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKCJzdGFydCIpOwogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIH07CgogICAgLy8gLS0tIElOSVQgQkFDS0dST1VORCBTRVJWSUNFIChXQUtFTE9DSyAmIFBFUk1JU1NJT05TKSAtLS0KICAgIGFzeW5jIGZ1bmN0aW9uIGluaXRCYWNrZ3JvdW5kU2VydmljZSgpIHsKICAgICAgICAvLyAxLiBSZXF1ZXN0IE5vdGlmaWNhdGlvbiAoVVRBTUE6IFVudHVrICdLZWp1dGthbicgQXBwKQogICAgICAgIGlmICgiTm90aWZpY2F0aW9uIiBpbiB3aW5kb3cpIHsKICAgICAgICAgICAgIGlmKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSAiZ3JhbnRlZCIpIHsKICAgICAgICAgICAgICAgICAgYXdhaXQgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7CiAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIDIuIFJlcXVlc3QgV2FrZUxvY2sgKEtlZXAgTG9naWMgQWxpdmUpCiAgICAgICAgaWYgKCd3YWtlTG9jaycgaW4gbmF2aWdhdG9yKSB7CiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RMb2NrID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB3YWtlTG9jayA9IGF3YWl0IG5hdmlnYXRvci53YWtlTG9jay5yZXF1ZXN0KCdzY3JlZW4nKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXV0b01vZGVJbmRpY2F0b3InKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICAgICAgICAgICAgICB3YWtlTG9jay5hZGRFdmVudExpc3RlbmVyKCdyZWxlYXNlJywgKCkgPT4geyBjb25zb2xlLmxvZygnV2FrZSBMb2NrIFJlbGVhc2VkJyk7IH0pOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7IGNvbnNvbGUuZXJyb3IoYCR7ZXJyLm5hbWV9LCAke2Vyci5tZXNzYWdlfWApOyB9CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIAogICAgICAgICAgICBhd2FpdCByZXF1ZXN0TG9jaygpOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gUmUtYWNxdWlyZSBsb2NrIG9uIHZpc2liaWxpdHkgY2hhbmdlIChCaWxhIHVzZXIgbWluaW1pemUvbWF4aW1pemUpCiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAod2FrZUxvY2sgIT09IG51bGwgJiYgZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09PSAndmlzaWJsZScpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCByZXF1ZXN0TG9jaygpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgLy8gQ3ViYSBwYWtzYSBsb2NrIGRhbGFtIGJhY2tncm91bmQgKGJlcmdhbnR1bmcgcGFkYSBPUykKICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVxdWVzdExvY2soKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfQoKICAgIC8vIC0tLSBBVkFUQVIgTE9HSUMgKDEwIE9GRklDRSBUSEVNRUQpIC0tLQogICAgY29uc3QgQVZBVEFSUyA9IFsKICAgICAgICAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDE0MC80MTQwMDQ4LnBuZyIsIC8vIE1hbGUgT2ZmaWNlCiAgICAgICAgImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQxNDAvNDE0MDA0Ny5wbmciLCAvLyBGZW1hbGUgT2ZmaWNlCiAgICAgICAgImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQxNDAvNDE0MDAzNy5wbmciLCAvLyBNYWxlIFRpZQogICAgICAgICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MTQwLzQxNDAwNTEucG5nIiwgLy8gRmVtYWxlIEJsYXplcgogICAgICAgICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MTQwLzQxNDAwNDAucG5nIiwgLy8gTWFsZSBHbGFzc2VzCiAgICAgICAgImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQxNDAvNDE0MDA2MS5wbmciLCAvLyBGZW1hbGUgU2NhcmYKICAgICAgICAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDE0MC80MTQwMDUyLnBuZyIsIC8vIE1hbGUgTWFuYWdlcgogICAgICAgICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MTQwLzQxNDAwNDIucG5nIiwgLy8gRmVtYWxlIE1hbmFnZXIKICAgICAgICAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDE0MC80MTQwMDQ2LnBuZyIsIC8vIE1hbGUgWW91bmcKICAgICAgICAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDE0MC80MTQwMDU3LnBuZyIgIC8vIEZlbWFsZSBHbGFzc2VzCiAgICBdOwoKICAgIGZ1bmN0aW9uIGluaXRBdmF0YXIoKSB7CiAgICAgICAgbGV0IHNhdmVkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl91c2VyX2F2YXRhcicpOwogICAgICAgIGlmKHNhdmVkKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudEF2YXRhck1pbmknKS5zcmMgPSBzYXZlZDsKICAgICAgICAvLyBHZW5lcmF0ZSBHcmlkCiAgICAgICAgbGV0IGdyaWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXZhdGFyR3JpZCcpOwogICAgICAgIGdyaWQuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgQVZBVEFSUy5mb3JFYWNoKHVybCA9PiB7CiAgICAgICAgICAgIGxldCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9ICJhdmF0YXItb3B0aW9uIjsKICAgICAgICAgICAgaWYodXJsID09PSBzYXZlZCkgZGl2LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJyk7CiAgICAgICAgICAgIGRpdi5pbm5lckhUTUwgPSBgPGltZyBzcmM9IiR7dXJsfSI+YDsKICAgICAgICAgICAgZGl2Lm9uY2xpY2sgPSAoKSA9PiBzZWxlY3RBdmF0YXIodXJsKTsKICAgICAgICAgICAgZ3JpZC5hcHBlbmRDaGlsZChkaXYpOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIG9wZW5BdmF0YXJNb2RhbCgpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F2YXRhck1vZGFsQ29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgfQogICAgZnVuY3Rpb24gY2xvc2VBdmF0YXJNb2RhbCgpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F2YXRhck1vZGFsQ29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfQoKICAgIGZ1bmN0aW9uIHNlbGVjdEF2YXRhcih1cmwpIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZWhhZGlyX3VzZXJfYXZhdGFyJywgdXJsKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudEF2YXRhck1pbmknKS5zcmMgPSB1cmw7CiAgICAgICAgaW5pdEF2YXRhcigpOyAvLyBSZWZyZXNoIGdyaWQgc3RhdGUKICAgICAgICBjbG9zZUF2YXRhck1vZGFsKCk7CiAgICB9CgogICAgLy8gLS0tIExPR0lLIExPQ0sgTkFNQSAmIEFVVE8gU1lOQyAtLS0KICAgIGZ1bmN0aW9uIGluaXRMb2NrTmFtZSgpIHsKICAgICAgICBsZXQgbG9ja2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9sb2NrZWRfbmFtZScpOwogICAgICAgIGxldCBsb2NrZWRLYXQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX2xvY2tlZF9rYXQnKTsgLy8gTG9hZCBjYXRlZ29yeSB0b28KICAgICAgICBsZXQgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtYScpOwogICAgICAgIGxldCBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2F0ZWdvcmknKTsKICAgICAgICBsZXQgYnRuSW1nID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvY2tJY29uSW1nJyk7CiAgICAgICAgbGV0IGJ0bkxvY2sgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9ja0J0bicpOwogICAgICAgIGxldCBhdmF0YXJCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXZhdGFyQnRuJyk7IC8vIEF2YXRhciBCdXR0b24KICAgICAgICAKICAgICAgICAvLyAtLS0gTU9EIEVESVQ6IFNUUklDVCBWQUxJREFUSU9OIC0tLQogICAgICAgIC8vIEppa2Egc2FsYWggc2F0dSB0aWFkYSAodGlkYWsgbGVuZ2thcCksIGFuZ2dhcCBkYXRhIHJvc2FrIC0+IEJ1a2EgS3VuY2kKICAgICAgICBpZiAoIWxvY2tlZCB8fCAhbG9ja2VkS2F0KSB7CiAgICAgICAgICAgIGlmKGxvY2tlZCB8fCBsb2NrZWRLYXQpIHsgLy8gSmlrYSBzZXBhcmEgYWRhCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZWhhZGlyX2xvY2tlZF9uYW1lJyk7CiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZWhhZGlyX2xvY2tlZF9rYXQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsb2NrZWQgPSBudWxsOyAKICAgICAgICAgICAgbG9ja2VkS2F0ID0gbnVsbDsKICAgICAgICB9CiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgICAgICAgaWYgKGxvY2tlZCAmJiBsb2NrZWRLYXQpIHsKICAgICAgICAgICAgaW5wdXQudmFsdWUgPSBsb2NrZWQ7CiAgICAgICAgICAgIHNlbC52YWx1ZSA9IGxvY2tlZEthdDsKICAgICAgICAgICAgaW5wdXQucmVhZE9ubHkgPSB0cnVlOwogICAgICAgICAgICBzZWwuZGlzYWJsZWQgPSB0cnVlOyAvLyBMb2NrIGNhdGVnb3J5CiAgICAgICAgICAgIGF2YXRhckJ0bi5kaXNhYmxlZCA9IHRydWU7IC8vIExPQ0sgQVZBVEFSIFNFTEVDVElPTgogICAgICAgICAgICBpbnB1dC5zdHlsZS5iYWNrZ3JvdW5kID0gIiNmZmY4ZTEiOyAKICAgICAgICAgICAgLy8gVVBEQVRFRCBMT0NLIElDT04gJiBZRUxMT1cgQlROCiAgICAgICAgICAgIGJ0bkltZy5zcmMgPSAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMjkxMy8yOTEzMTMzLnBuZyI7IAogICAgICAgICAgICBidG5JbWcuc3R5bGUuZmlsdGVyID0gIm9wYWNpdHkoMSkiOwogICAgICAgICAgICBidG5Mb2NrLmNsYXNzTGlzdC5hZGQoJ2J0bi15ZWxsb3cnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBpbnB1dC5yZWFkT25seSA9IGZhbHNlOwogICAgICAgICAgICBzZWwuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgYXZhdGFyQnRuLmRpc2FibGVkID0gZmFsc2U7IC8vIFVOTE9DSyBBVkFUQVIKICAgICAgICAgICAgaW5wdXQuc3R5bGUuYmFja2dyb3VuZCA9ICIjZjhmOWZhIjsKICAgICAgICAgICAgLy8gVVBEQVRFRCBVTkxPQ0sgSUNPTiAmIFJFTU9WRSBZRUxMT1cKICAgICAgICAgICAgYnRuSW1nLnNyYyA9ICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8yODg5LzI4ODk2NzYucG5nIjsgCiAgICAgICAgICAgIGJ0bkltZy5zdHlsZS5maWx0ZXIgPSAib3BhY2l0eSgwLjQpIjsKICAgICAgICAgICAgYnRuTG9jay5jbGFzc0xpc3QucmVtb3ZlKCdidG4teWVsbG93Jyk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHRvZ2dsZUxvY2tOYW1lKCkgewogICAgICAgIGxldCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1hJyk7CiAgICAgICAgbGV0IHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrYXRlZ29yaScpOwogICAgICAgIGxldCBhdmF0YXJCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXZhdGFyQnRuJyk7CiAgICAgICAgbGV0IGN1cnJlbnQgPSBpbnB1dC52YWx1ZS50cmltKCkudG9VcHBlckNhc2UoKTsKICAgICAgICBsZXQgY3VycmVudEthdCA9IHNlbC52YWx1ZTsKICAgICAgICAKICAgICAgICBpZighY3VycmVudCB8fCAhY3VycmVudEthdCkgeyBzaG93TW9kZXJuQWxlcnQoIktvc29uZyIsICJTaWxhIGlzaSBOYW1hIGRhbiBwaWxpaCBLYXRlZ29yaSBkYWh1bHUuIiwgImVycm9yIik7IHJldHVybjsgfQogICAgICAgIAogICAgICAgIGlmIChpbnB1dC5yZWFkT25seSkgewogICAgICAgICAgICAvLyBVTkxPQ0sKICAgICAgICAgICAgaW5wdXQucmVhZE9ubHkgPSBmYWxzZTsKICAgICAgICAgICAgc2VsLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgIGF2YXRhckJ0bi5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICBpbnB1dC5zdHlsZS5iYWNrZ3JvdW5kID0gIiNmOGY5ZmEiOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZWhhZGlyX2xvY2tlZF9uYW1lJyk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdlaGFkaXJfbG9ja2VkX2thdCcpOwogICAgICAgICAgICBzaG93TW9kZXJuQWxlcnQoIk55YWgtS3VuY2kiLCAiQXV0byBDaGVjay1JbiBEaWJhdGFsa2FuLiIsICJpbmZvIik7CiAgICAgICAgICAgIGluaXRMb2NrTmFtZSgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIExPQ0sKICAgICAgICAgICAgaW5wdXQucmVhZE9ubHkgPSB0cnVlOwogICAgICAgICAgICBzZWwuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICBhdmF0YXJCdG4uZGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICBpbnB1dC5zdHlsZS5iYWNrZ3JvdW5kID0gIiNmZmY4ZTEiOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZWhhZGlyX2xvY2tlZF9uYW1lJywgY3VycmVudCk7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlaGFkaXJfbG9ja2VkX2thdCcsIGN1cnJlbnRLYXQpOwogICAgICAgICAgICBzaG93TW9kZXJuQWxlcnQoIkF1dG8gTW9kZSIsICJOYW1hICYgQXZhdGFyIGRpa3VuY2kuIFNpc3RlbSBha2FuIDxiPkFVVE8gQ0hFQ0stSU48L2I+IGJpbGEgYW5kYSBtYXN1ayBrYXdhc2FuLiIsICJzdWNjZXNzIik7CiAgICAgICAgICAgIGluaXRMb2NrTmFtZSgpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja0F1dG9TdGF0dXMobGlzdCkgewogICAgICAgIGxldCBsb2NrZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX2xvY2tlZF9uYW1lJyk7CiAgICAgICAgaWYoIWxvY2tlZCkgcmV0dXJuOwogICAgICAgIGxldCB1c2VyUmVjb3JkID0gbGlzdC5maW5kKGl0ZW0gPT4gaXRlbS5uYW1hID09PSBsb2NrZWQpOwogICAgICAgIGlmICh1c2VyUmVjb3JkKSB7CiAgICAgICAgICAgIGlmICghdXNlclJlY29yZC5rZWx1YXIgfHwgdXNlclJlY29yZC5rZWx1YXIgPT09ICIiKSB7CiAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRTZXNzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX3Nlc3Npb24nKSk7CiAgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50U2VzcykgewogICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZWhhZGlyX3Nlc3Npb24nLCBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgICAgICBuYW1hOiBsb2NrZWQsCiAgICAgICAgICAgICAgICAgICAgICAgICBrYXRlZ29yaTogdXNlclJlY29yZC5rYXRlZ29yaSB8fCAiR1VSVSIsIAogICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApCiAgICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7IAogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGxldCBjdXJyZW50U2VzcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9zZXNzaW9uJykpOwogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTZXNzICYmIGN1cnJlbnRTZXNzLm5hbWEgPT09IGxvY2tlZCkgewogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdlaGFkaXJfc2Vzc2lvbicpOwogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGZldGNoQ29uZmlnKCkgewogICAgICAgIGlmKCFuYXZpZ2F0b3Iub25MaW5lKSB7IHJldHVybjsgfQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nQ29uZmlnJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgZmV0Y2goQVBJX1VSTCwgeyBtZXRob2Q6ICJQT1NUIiwgYm9keTogSlNPTi5zdHJpbmdpZnkoe2FjdGlvbjogIkdFVF9DT05GSUciLCBwYXNzY29kZTogUEFTU0NPREV9KSB9KQogICAgICAgIC50aGVuKHIgPT4gci5qc29uKCkpLnRoZW4ocmVzID0+IHsgCiAgICAgICAgICAgIGphbUNvbmZpZyA9IChyZXMuc3RhdHVzID09PSAiU1VDQ0VTUyIgJiYgcmVzLmRhdGEpID8gcmVzLmRhdGEgOiByZXM7CiAgICAgICAgICAgIGlmKGphbUNvbmZpZykgewogICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdDb25maWcnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgdXBkYXRlU2NoZWR1bGVJbmZvKCk7IAogICAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nQ29uZmlnJykuaW5uZXJIVE1MID0gIk1vZCBPZmZsaW5lLiIpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsZWFuVGltZURpc3BsYXkodmFsKSB7CiAgICAgICAgaWYgKCF2YWwpIHJldHVybiAiLS06LS0iOwogICAgICAgIGxldCBkID0gcGFyc2VUaW1lKHZhbCwgbmV3IERhdGUoKSk7CiAgICAgICAgcmV0dXJuIGQgPyBkLnRvTG9jYWxlVGltZVN0cmluZygnZW4tVVMnLCB7IGhvdXI6ICdudW1lcmljJywgbWludXRlOiAnMi1kaWdpdCcsIGhvdXIxMjogdHJ1ZSB9KSA6IHZhbDsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVTY2hlZHVsZUluZm8oKSB7CiAgICAgICAgbGV0IGthdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrYXRlZ29yaScpLnZhbHVlOwogICAgICAgIGxldCBpbmZvQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NjaGVkdWxlSW5mbycpOwogICAgICAgIGlmICghamFtQ29uZmlnKSByZXR1cm47CiAgICAgICAgaWYgKGthdCAmJiBqYW1Db25maWdba2F0XSkgewogICAgICAgICAgICBsZXQgbWFzdWsgPSBjbGVhblRpbWVEaXNwbGF5KGphbUNvbmZpZ1trYXRdLm1hc3VrKTsKICAgICAgICAgICAgbGV0IGtlbHVhciA9IGNsZWFuVGltZURpc3BsYXkoamFtQ29uZmlnW2thdF0ua2VsdWFyKTsKICAgICAgICAgICAgaW5mb0JveC5pbm5lckhUTUwgPSBgPGRpdiBjbGFzcz0ic2NoZWR1bGUtbWluaW1hbCI+PGRpdiBjbGFzcz0idGltZS1waWxsIiBzdHlsZT0iY29sb3I6IzI3YWU2MDsgYm9yZGVyLWNvbG9yOiNkNGVkZGE7IGJhY2tncm91bmQ6I2YwZmRmNDsiPjxzcGFuPjxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8xOTAvMTkwNDExLnBuZyIgY2xhc3M9Imljb24tM2QtbWluaSI+ICR7bWFzdWt9PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9InRpbWUtcGlsbCIgc3R5bGU9ImNvbG9yOiNjMDM5MmI7IGJvcmRlci1jb2xvcjojZmFkYmQ4OyBiYWNrZ3JvdW5kOiNmZWYyZjI7Ij48c3Bhbj48aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMTkwLzE5MDQwNi5wbmciIGNsYXNzPSJpY29uLTNkLW1pbmkiPiAke2tlbHVhcn08L3NwYW4+PC9kaXY+PC9kaXY+YDsKICAgICAgICAgICAgaW5mb0JveC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlRGFzaGJvYXJkSW5mbygpIHsKICAgICAgICBsZXQgcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9zZXNzaW9uJykpOwogICAgICAgIGxldCBkYXNoYm9hcmRTY2hlZHVsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmRTY2hlZHVsZScpOwogICAgICAgIGxldCB1c2VyRXhpdFRpbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlckV4aXRUaW1lJyk7CiAgICAgICAgaWYgKHMgJiYgamFtQ29uZmlnICYmIGphbUNvbmZpZ1tzLmthdGVnb3JpXSkgewogICAgICAgICAgICBsZXQgZGlzcGxheUtlbHVhciA9IGNsZWFuVGltZURpc3BsYXkoamFtQ29uZmlnW3Mua2F0ZWdvcmldLmtlbHVhcik7CiAgICAgICAgICAgIGRhc2hib2FyZFNjaGVkdWxlLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgICAgICB1c2VyRXhpdFRpbWUuaW5uZXJUZXh0ID0gZGlzcGxheUtlbHVhcjsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2VuZERhdGEoZGF0YSkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgIGlmICghZGF0YS5jbGllbnRUaW1lKSB7IGRhdGEuY2xpZW50VGltZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsgfQogICAgICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHsKICAgICAgICAgICAgICAgIHNhdmVUb1F1ZXVlKGRhdGEpOyByZXNvbHZlKHsgb2ZmbGluZTogdHJ1ZSB9KTsgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZldGNoKEFQSV9VUkwsIHsgbWV0aG9kOiAiUE9TVCIsIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpIH0pCiAgICAgICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkudGhlbihyZXN1bHQgPT4geyByZXNvbHZlKHsgb2ZmbGluZTogZmFsc2UsIGRhdGE6IHJlc3VsdCB9KTsgfSkKICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsgc2F2ZVRvUXVldWUoZGF0YSk7IHJlc29sdmUoeyBvZmZsaW5lOiB0cnVlIH0pOyB9KTsKICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYXZlVG9RdWV1ZShkYXRhKSB7CiAgICAgICAgaWYgKCFkYXRhLmthdGVnb3JpKSBkYXRhLmthdGVnb3JpID0gIlBFTEFXQVQiOwogICAgICAgIGxldCBxdWV1ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9vZmZsaW5lX3F1ZXVlJykgfHwgIltdIik7CiAgICAgICAgcXVldWUucHVzaChkYXRhKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZWhhZGlyX29mZmxpbmVfcXVldWUnLCBKU09OLnN0cmluZ2lmeShxdWV1ZSkpOwogICAgfQoKICAgIC8vIC0tLSBVQkFIIFNVQUk6IEhBTlRBUiBNQVNVSyAoQVVUTyAmIE1BTlVBTCkgLS0tCiAgICBhc3luYyBmdW5jdGlvbiBoYW50YXJNYXN1ayhpc0F1dG8gPSBmYWxzZSkgewogICAgICAgIGlmKGlzU3VibWl0dGluZykgcmV0dXJuOyAKCiAgICAgICAgaWYoIWlzSW5ab25lKSB7IAogICAgICAgICAgICBpZighaXNBdXRvKSBzaG93TW9kZXJuQWxlcnQoIkx1YXIgS2F3YXNhbiIsICJTaWxhIG1hc3VrIGtlIGthd2FzYW4gc2Vrb2xhaC4iLCAiZXJyb3IiKTsgCiAgICAgICAgICAgIHJldHVybjsgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGxldCBuYW1hLCBrYXQ7CiAgICAgICAgaWYgKGlzQXV0bykgewogICAgICAgICAgICBuYW1hID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9sb2NrZWRfbmFtZScpOwogICAgICAgICAgICBrYXQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX2xvY2tlZF9rYXQnKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIG5hbWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtYScpLnZhbHVlLnRvVXBwZXJDYXNlKCkudHJpbSgpOwogICAgICAgICAgICBrYXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2F0ZWdvcmknKS52YWx1ZTsKICAgICAgICB9CgogICAgICAgIGxldCBhbGFzYW4gPSAiQVVUTyBDSEVDSy1JTiAoR1BTKSI7CiAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7CgogICAgICAgIGlmICghbmFtYSB8fCAha2F0KSB7IAogICAgICAgICAgICBpZighaXNBdXRvKSBzaG93TW9kZXJuQWxlcnQoIkRhdGEgVGlkYWsgTGVuZ2thcCIsICJJc2kgTmFtYSBkYW4gS2F0ZWdvcmkuIiwgImVycm9yIik7IAogICAgICAgICAgICByZXR1cm47IAogICAgICAgIH0KCiAgICAgICAgaXNTdWJtaXR0aW5nID0gdHJ1ZTsKICAgICAgICBpZighaXNBdXRvKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5NYWluU3VibWl0JykuZGlzYWJsZWQgPSB0cnVlOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuTWFpblN1Ym1pdCcpLmlubmVySFRNTCA9ICdTRURBTkcgSEFOVEFSLi4uJzsgfQoKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyBEQVBBVEtBTiBBVkFUQVIgWUFORyBESVBJTElICiAgICAgICAgICAgIGxldCBzYXZlZEF2YXRhciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfdXNlcl9hdmF0YXInKSB8fCAiIjsKCiAgICAgICAgICAgIC8vIEdFTiBVVUlEIFVOVFVLIFNFU0kgVU5JSwogICAgICAgICAgICBsZXQgdW5pcXVlSUQgPSBEYXRlLm5vdygpLnRvU3RyaW5nKDM2KSArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA1KTsKICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsgYWN0aW9uOiAiTUFTVUsiLCBwYXNzY29kZTogUEFTU0NPREUsIG5hbWE6IG5hbWEsIGthdGVnb3JpOiBrYXQsIGFsYXNhbjogYWxhc2FuLCBsYXQ6IGxhc3RMYXQsIGxuZzogbGFzdExuZywgY2xpZW50VGltZTogbm93LnRvSVNPU3RyaW5nKCksIHV1aWQ6IHVuaXF1ZUlELCBhdmF0YXI6IHNhdmVkQXZhdGFyIH07CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kRGF0YShwYXlsb2FkKTsKCiAgICAgICAgICAgIGlmIChyZXN1bHQub2ZmbGluZSkgewogICAgICAgICAgICAgICAgaWYoIWlzQXV0bykgYWxlcnQoIk9mZmxpbmU6IERhdGEgZGlzaW1wYW4uIik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBTZW1hayBqaWthIHNlcnZlciByZWplY3QgKGR1cGxpY2F0ZSkKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZGF0YSAmJiByZXN1bHQuZGF0YS5yZXN1bHQgPT09ICJlcnJvciIpIHsKICAgICAgICAgICAgICAgICAgICAgaWYoIWlzQXV0bykgc2hvd01vZGVybkFsZXJ0KCJHYWdhbCIsIHJlc3VsdC5kYXRhLm1zZywgImVycm9yIik7CiAgICAgICAgICAgICAgICAgICAgIGlzU3VibWl0dGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuTWFpblN1Ym1pdCcpLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5NYWluU3VibWl0JykuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC85NDAyLzk0MDIzNDIucG5nIiBjbGFzcz0iaWNvbi0zZC1zdGQiPiBEQUZUQVIgTUFTVUsgKE1BTlVBTClgOwogICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZighaXNBdXRvKSBhbGVydCgiPyBCZXJqYXlhIGRhZnRhciBtYXN1ayEiKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgLy8gTk9USUZJS0FTSSBBVVRPCiAgICAgICAgICAgIGlmKGlzQXV0bykgewogICAgICAgICAgICAgICAgc2hvd1N5bmNCYXIoIlNFTEFNQVQgREFUQU5HIEtFIFNLIFNFTEFNQSAoSykiLCAiIzI3YWU2MCIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZWhhZGlyX3Nlc3Npb24nLCBKU09OLnN0cmluZ2lmeSh7bmFtYTogbmFtYSwga2F0ZWdvcmk6IGthdCwgZGF0ZTogbm93LnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCksIHV1aWQ6IHVuaXF1ZUlEfSkpOwogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKCiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcigiUmFsYXQ6IiwgZXJyb3IpOwogICAgICAgICAgICBpc1N1Ym1pdHRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgaWYoIWlzQXV0bykgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bk1haW5TdWJtaXQnKS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICAvLyAtLS0gVUJBSCBTVUFJOiBIQU5UQVIgS0VMVUFSIChBVVRPICYgTUFOVUFMKSAtLS0KICAgIGFzeW5jIGZ1bmN0aW9uIGhhbnRhcktlbHVhcihpc0F1dG8gPSBmYWxzZSkgewogICAgICAgIGlmKGlzU3VibWl0dGluZykgcmV0dXJuOyAKCiAgICAgICAgbGV0IHNlc3Npb24gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfc2Vzc2lvbicpKTsKICAgICAgICBpZiAoIXNlc3Npb24gfHwgIXNlc3Npb24ubmFtYSkgeyByZXR1cm47IH0KICAgICAgICAKICAgICAgICBsZXQgYWxhc2FuVmFsdWUgPSBpc0F1dG8gPyAiQVVUTyBDSEVDS09VVCAoS0VMVUFSIEtBV0FTQU4pIiA6ICJQVUxBTkcgKE1BTlVBTCkiOwogICAgICAgIC8vIEdldCBVVUlEIGZyb20gc2Vzc2lvbiBpZiBleGlzdHMKICAgICAgICBsZXQgc2Vzc2lvblVVSUQgPSBzZXNzaW9uLnV1aWQgfHwgIiI7CgogICAgICAgIGxldCBwcm9jZWVkID0gYXN5bmMgKCkgPT4gewogICAgICAgICAgICBpc1N1Ym1pdHRpbmcgPSB0cnVlOyAKICAgICAgICAgICAgaWYoIWlzQXV0bykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuS2VsdWFyJykuZGlzYWJsZWQgPSB0cnVlOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuS2VsdWFyJykuaW5uZXJUZXh0ID0gIlBST1NFUy4uLiI7IH0KCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBwYXlsb2FkID0geyBhY3Rpb246ICJLRUxVQVIiLCBwYXNzY29kZTogUEFTU0NPREUsIG5hbWE6IHNlc3Npb24ubmFtYS50b1VwcGVyQ2FzZSgpLCBhbGFzYW46IGFsYXNhblZhbHVlLCBsYXQ6IGxhc3RMYXQsIGxuZzogbGFzdExuZywgY2xpZW50VGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCB1dWlkOiBzZXNzaW9uVVVJRCB9OwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kRGF0YShwYXlsb2FkKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gTk9USUZJS0FTSSBBVVRPCiAgICAgICAgICAgICAgICBpZihpc0F1dG8pIHsKICAgICAgICAgICAgICAgICAgICBzaG93U3luY0JhcigiU0VNT0dBIFNFTEFNQVQgREFMQU0gUEVSSkFMQU5BTiBBTkRBIiwgIiNjMDM5MmIiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gU0VUIEJMT0NLSU5HIFNVUEFZQSBUQUsgQVVUTy1JTiBURVJVUyBCSUxBIFJFTE9BRAogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VoYWRpcl9hdXRvX2luX2Jsb2NrZWQnLCAndHJ1ZScpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZWhhZGlyX3Nlc3Npb24nKTsKICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwoKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgICAgICAgICAgaXNTdWJtaXR0aW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIC0tLSBNT0QgRURJVDogRkFJTC1TQUZFIFVOVFVLIEFVVE8gQ0hFQ0tPVVQgLS0tCiAgICAgICAgICAgICAgICAvLyBKaWthIGVycm9yIGJlcmxha3UgbWFzYSBhdXRvIChpbnRlcm5ldCBzbG93IGRsbCksIHRldGFwIGZvcmNlIGxvZ291dCAKICAgICAgICAgICAgICAgIC8vIHN1cGF5YSB0YWsgc3R1Y2sgYmlsYSB1c2VyIG1hc3VrIGJhbGlrIHpvbi4KICAgICAgICAgICAgICAgIGlmKGlzQXV0bykgewogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdlaGFkaXJfc2Vzc2lvbicpOwogICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuS2VsdWFyJykuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuS2VsdWFyJykuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8zNTgwLzM1ODAxNTQucG5nIiBjbGFzcz0iaWNvbi0zZC1zdGQiPiBEQUZUQVIgS0VMVUFSIChNQU5VQUwpYDsKICAgICAgICAgICAgICAgICAgICBhbGVydCgiUmFsYXQgc2VtYXNhIGtlbHVhci4gU2lsYSBjdWJhIGxhZ2kuIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGlmKCFpc0F1dG8pIHsKICAgICAgICAgICAgc2hvd01vZGVybkFsZXJ0KCJQZW5nZXNhaGFuIiwgIkRhZnRhciBrZWx1YXIgc2VrYXJhbmc/IiwgImNvbmZpcm0iLCBwcm9jZWVkKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBwcm9jZWVkKCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGtlbHVhck1hbnVhbChuYW1hVXNlcikgewogICAgICAgIGxldCBwYXNzID0gcHJvbXB0KCJBRE1JTjogUGFzc2NvZGUgdW50dWsga2VsdWFya2FuICIgKyBuYW1hVXNlciArICI6Iik7CiAgICAgICAgaWYgKHBhc3MgIT09IFBBU1NDT0RFKSB7IHNob3dNb2Rlcm5BbGVydCgiR2FnYWwiLCAiUGFzc2NvZGUgc2FsYWguIiwgImVycm9yIik7IHJldHVybjsgfQogICAgICAgIAogICAgICAgIHNlbmREYXRhKHsgYWN0aW9uOiAiS0VMVUFSIiwgcGFzc2NvZGU6IFBBU1NDT0RFLCBuYW1hOiBuYW1hVXNlciwgYWxhc2FuOiAiTWFudWFsIEFkbWluIiwgbGF0OiBsYXN0TGF0LCBsbmc6IGxhc3RMbmcsIGNsaWVudFRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9KQogICAgICAgIC50aGVuKHJlcyA9PiB7IGxvYWRMaXN0KCk7IH0pOwogICAgfQoKICAgIGFzeW5jIGZ1bmN0aW9uIGhhbnRhclBlbGF3YXQoKSB7CiAgICAgICAgaWYoaXNTdWJtaXR0aW5nKSByZXR1cm47CiAgICAgICAgbGV0IGZvdG8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFzZTY0Rm90bycpLnZhbHVlOwogICAgICAgIGxldCBuYW1hUGVsYXdhdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1hUGVsYXdhdElucHV0JykudmFsdWUudG9VcHBlckNhc2UoKTsKICAgICAgICBpZiAoIWZvdG8pIHsgc2hvd01vZGVybkFsZXJ0KCJUaWFkYSBHYW1iYXIiLCAiQW1iaWwgZ2FtYmFyIGRhaHVsdS4iLCAiZXJyb3IiKTsgcmV0dXJuOyB9CiAgICAgICAgaWYgKCFuYW1hUGVsYXdhdCkgeyBzaG93TW9kZXJuQWxlcnQoIlRpYWRhIE5hbWEiLCAiSXNpIG5hbWEgcGVsYXdhdC4iLCAiZXJyb3IiKTsgcmV0dXJuOyB9CiAgICAgICAgaXNTdWJtaXR0aW5nID0gdHJ1ZTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuUGVsYXdhdFN1Ym1pdCcpLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuUGVsYXdhdFN1Ym1pdCcpLmlubmVyVGV4dCA9ICJTRURBTkcgSEFOVEFSLi4uIjsKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCBwYXlsb2FkID0geyBhY3Rpb246ICJNQVNVSyIsIHBhc3Njb2RlOiBQQVNTQ09ERSwga2F0ZWdvcmk6ICJQRUxBV0FUIiwgbmFtYTogbmFtYVBlbGF3YXQsIGZvdG9CYXNlNjQ6IGZvdG8sIGxhdDogbGFzdExhdCwgbG5nOiBsYXN0TG5nLCBjbGllbnRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfTsKICAgICAgICAgICAgYXdhaXQgc2VuZERhdGEocGF5bG9hZCk7CiAgICAgICAgICAgIGFsZXJ0KCI/IERhdGEgcGVsYXdhdCBiZXJqYXlhIGRpaGFudGFyISIpOwogICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgaXNTdWJtaXR0aW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHBhcnNlVGltZSh0LCByKSB7CiAgICAgICAgaWYgKCF0IHx8IHQudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAiQkVCQVMiKSByZXR1cm4gbnVsbDsKICAgICAgICBsZXQgZCA9IG5ldyBEYXRlKHIpOyBsZXQgdFN0ciA9IHQudG9TdHJpbmcoKS50cmltKCk7CiAgICAgICAgbGV0IHAgPSB0U3RyLm1hdGNoKC8oXGQrKVs6Ll0oXGQrKSg/Ols6Ll0oXGQrKSk/XHMqKEFNfFBNKS9pKTsKICAgICAgICBpZihwKSB7CiAgICAgICAgICAgIGxldCBoID0gcGFyc2VJbnQocFsxXSksIG0gPSBwYXJzZUludChwWzJdKSwgYW1wbSA9IHBbNF0udG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgaWYoYW1wbSA9PT0gIlBNIiAmJiBoIDwgMTIpIGggKz0gMTI7IGlmKGFtcG0gPT09ICJBTSIgJiYgaCA9PT0gMTIpIGggPSAwOwogICAgICAgICAgICBkLnNldEhvdXJzKGgsIG0sIDAsIDApOyByZXR1cm4gZDsKICAgICAgICB9IAogICAgICAgIGxldCBwMiA9IHRTdHIubWF0Y2goLyhcZCspWzouXShcZCspLyk7CiAgICAgICAgaWYocDIpIHsgZC5zZXRIb3VycyhwYXJzZUludChwMlsxXSksIHBhcnNlSW50KHAyWzJdKSwgMCwgMCk7IHJldHVybiBkOyB9CiAgICAgICAgcmV0dXJuIG51bGw7IAogICAgfQoKICAgIGZ1bmN0aW9uIHBhcnNlVGltZUxvY2FsKHRpbWVTdHIpIHsKICAgICAgICBpZiAoIXRpbWVTdHIpIHJldHVybiBudWxsOwogICAgICAgIGlmICh0aW1lU3RyLnRvU3RyaW5nKCkubGVuZ3RoID4gMTUpIHsgbGV0IHRlbXBEID0gbmV3IERhdGUodGltZVN0cik7IGlmKCFpc05hTih0ZW1wRC5nZXRUaW1lKCkpKSB7IGxldCBub3cgPSBuZXcgRGF0ZSgpOyBub3cuc2V0SG91cnModGVtcEQuZ2V0SG91cnMoKSwgdGVtcEQuZ2V0TWludXRlcygpLCB0ZW1wRC5nZXRTZWNvbmRzKCksIDApOyByZXR1cm4gbm93OyB9IH0KICAgICAgICBsZXQgcGFydHMgPSB0aW1lU3RyLm1hdGNoKC8oXGQrKTooXGQrKSg/OjooXGQrKSk/XHMqKEFNfFBNfGFtfHBtKT8vaSk7CiAgICAgICAgaWYgKCFwYXJ0cykgcmV0dXJuIG51bGw7CiAgICAgICAgbGV0IGggPSBwYXJzZUludChwYXJ0c1sxXSksIG0gPSBwYXJzZUludChwYXJ0c1syXSksIHMgPSBwYXJ0c1szXSA/IHBhcnNlSW50KHBhcnRzWzNdKSA6IDAsIGFtcG0gPSBwYXJ0c1s0XSA/IHBhcnRzWzRdLnRvVXBwZXJDYXNlKCkgOiBudWxsOwogICAgICAgIGlmIChhbXBtID09PSAiUE0iICYmIGggPCAxMikgaCArPSAxMjsgaWYgKGFtcG0gPT09ICJBTSIgJiYgaCA9PT0gMTIpIGggPSAwOwogICAgICAgIGxldCBkID0gbmV3IERhdGUoKTsgZC5zZXRIb3VycyhoLCBtLCBzLCAwKTsgcmV0dXJuIGQ7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlTGl2ZVRpbWVycygpIHsKICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGl2ZS10aW1lcicpLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICBsZXQgbWFzdWtTdHIgPSBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWFzdWsnKTsKICAgICAgICAgICAgaWYgKCFtYXN1a1N0ciB8fCBtYXN1a1N0ciA9PT0gInVuZGVmaW5lZCIpIHsgZWwuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8yOTcyLzI5NzI1MzEucG5nIiBzdHlsZT0id2lkdGg6MTJweDtoZWlnaHQ6MTJweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGUiPiAtLWA7IHJldHVybjsgfQogICAgICAgICAgICBsZXQgbWFzdWtEYXRlID0gcGFyc2VUaW1lTG9jYWwobWFzdWtTdHIpOwogICAgICAgICAgICBpZiAobWFzdWtEYXRlKSB7CiAgICAgICAgICAgICAgICBsZXQgZGlmZiA9IE1hdGguZmxvb3IoKG5vdyAtIG1hc3VrRGF0ZSkgLyAxMDAwKTsgaWYgKGRpZmYgPCAwKSBkaWZmID0gMDsKICAgICAgICAgICAgICAgIGxldCBoID0gTWF0aC5mbG9vcihkaWZmIC8gMzYwMCk7IGxldCBtID0gTWF0aC5mbG9vcigoZGlmZiAlIDM2MDApIC8gNjApOwogICAgICAgICAgICAgICAgZWwuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8yOTcyLzI5NzI1MzEucG5nIiBzdHlsZT0id2lkdGg6MTJweDtoZWlnaHQ6MTJweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGUiPiAke2h9SCAke219TWA7CiAgICAgICAgICAgIH0gZWxzZSB7IGVsLmlubmVySFRNTCA9IGA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMjk3Mi8yOTcyNTMxLnBuZyIgc3R5bGU9IndpZHRoOjEycHg7aGVpZ2h0OjEycHg7dmVydGljYWwtYWxpZ246bWlkZGxlIj4gMEggME1gOyB9CiAgICAgICAgfSk7CiAgICB9CgogICAgLy8gLS0tIEZVTkdTSSBVVEFNQTogTU9OSVRPUiBMT0dJSyBNQVNBIChBTlRJLVNQQU0gJiBBVVRPLUNIRUNLT1VUKSAtLS0KICAgIGZ1bmN0aW9uIG1vbml0b3JBdXRvTG9naWMoKSB7CiAgICAgICAgLy8gVHVrYXIgbWluaXQga2UgbWlsaXNhYXQKICAgICAgICBsZXQgTVNfSU5fREVMQVkgPSAodHlwZW9mIE1JTklUX0FOVElfU1BBTV9NQVNVSyAhPT0gJ3VuZGVmaW5lZCcgPyBNSU5JVF9BTlRJX1NQQU1fTUFTVUsgOiA1KSAqIDYwICogMTAwMDsKICAgICAgICBsZXQgTVNfT1VUX0RFTEFZID0gKHR5cGVvZiBNSU5JVF9ERUxBWV9LRUxVQVIgIT09ICd1bmRlZmluZWQnID8gTUlOSVRfREVMQVlfS0VMVUFSIDogMTApICogNjAgKiAxMDAwOwoKICAgICAgICBsZXQgc2Vzc2lvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9zZXNzaW9uJykpOwogICAgICAgIGxldCBsb2NrZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX2xvY2tlZF9uYW1lJyk7CiAgICAgICAgbGV0IGxvY2tlZEthdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfbG9ja2VkX2thdCcpOwogICAgICAgIGxldCBub3cgPSBEYXRlLm5vdygpOwoKICAgICAgICAvLyAxLiBVUERBVEUgVUkgU1RBVFVTIChBU0lOR0tBTiBEQVJJIEdQUyBDQUxMQkFDSykKICAgICAgICBsZXQgc3RhdHVzRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzVGV4dCcpOwogICAgICAgIGxldCBpc0Jsb2NrZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX2F1dG9faW5fYmxvY2tlZCcpOyAvLyBORVcgQ0hFQ0sKCiAgICAgICAgaWYgKGlzSW5ab25lKSB7CiAgICAgICAgICAgICBsZXQgaWNvbiA9ICI8aW1nIHNyYz0naHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMTkwLzE5MDQxMS5wbmcnIGNsYXNzPSdpY29uLTNkLW1pbmknPiI7CiAgICAgICAgICAgICBzdGF0dXNFbC5pbm5lckhUTUwgPSBpY29uICsgIiBEQUxBTSBLQVdBU0FOICgiICsgTWF0aC5yb3VuZChjdXJyZW50RGlzdCkgKyAibSkiOwogICAgICAgICAgICAgc3RhdHVzRWwuc3R5bGUuY29sb3IgPSAiIzI3YWU2MCI7CiAgICAgICAgICAgICBzdGF0dXNFbC5zdHlsZS5iYWNrZ3JvdW5kID0gIiNlOGY1ZTkiOwogICAgICAgICAgICAgCiAgICAgICAgICAgICAvLyBORVc6IEJMT0NLIExPR0lDCiAgICAgICAgICAgICBpZiAoaXNCbG9ja2VkKSB7CiAgICAgICAgICAgICAgICAgc3RhdHVzRWwuaW5uZXJIVE1MICs9IGA8YnI+PHNwYW4gc3R5bGU9ImZvbnQtc2l6ZTo5cHg7IGNvbG9yOiNlNjdlMjI7Ij5BVVRPLUlOIERJR0FOVFVORyAoS0VMVUFSID4gJHtSQURJVVNfUkVTRVRfQVVUT19JTn1NIFVOVFVLIFJFU0VUKTwvc3Bhbj5gOwogICAgICAgICAgICAgICAgIHJldHVybjsgLy8gU1RPUCBMT0dJQyBIRVJFCiAgICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgIGxldCBpY29uID0gIjxpbWcgc3JjPSdodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8xOTAvMTkwNDA2LnBuZycgY2xhc3M9J2ljb24tM2QtbWluaSc+IjsKICAgICAgICAgICAgIHN0YXR1c0VsLmlubmVySFRNTCA9IGljb24gKyAiIExVQVIgS0FXQVNBTiAoIiArIE1hdGgucm91bmQoY3VycmVudERpc3QpICsgIm0pIjsKICAgICAgICAgICAgIHN0YXR1c0VsLnN0eWxlLmNvbG9yID0gIiNjMDM5MmIiOwogICAgICAgICAgICAgc3RhdHVzRWwuc3R5bGUuYmFja2dyb3VuZCA9ICIjZmRlZWE1IjsKICAgICAgICB9CgogICAgICAgIC8vIC0tLSBTSVRVQVNJIDE6IE1BU1VLIEtBV0FTQU4gKERBRlRBUiBNQVNVSykgLS0tCiAgICAgICAgaWYgKGlzSW5ab25lKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nQm94Jykuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgaGFzTm90aWZpZWRFeGl0ID0gZmFsc2U7IC8vIFJlc2V0IEV4aXQgTm90aWZpY2F0aW9uCiAgICAgICAgICAgIAogICAgICAgICAgICAvLyAxLiBUcmlnZ2VyIE5vdGlmaWNhdGlvbjogIkFOREEgU1VEQUggU0FNUEFJISIKICAgICAgICAgICAgaWYgKCFzZXNzaW9uICYmIGxvY2tlZCAmJiBsb2NrZWRLYXQgJiYgIWhhc05vdGlmaWVkRW50cnkpIHsKICAgICAgICAgICAgICAgIGhhc05vdGlmaWVkRW50cnkgPSB0cnVlOwogICAgICAgICAgICAgICAgc2VuZE5vdGlmaWNhdGlvbigiQU5EQSBTVURBSCBTQU1QQUkhIiwgIlNpbGEga2xpayBkaSBzaW5pIHVudHVrIGJ1a2EgYXBsaWthc2kiLCAid2FrZS11cC1lbnRyeSIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyAyLiBMb2dpYyBDb3VudGRvd24gQXV0by1NYXN1ayAoSmFsYW4gYmlsYSBBcHAgVGVyYnVrYSkKICAgICAgICAgICAgaWYgKCFzZXNzaW9uICYmIGxvY2tlZCAmJiBsb2NrZWRLYXQgJiYgIWlzU3VibWl0dGluZykgewogICAgICAgICAgICAgICAgaWYgKGluWm9uZVN0YXJ0ID4gMCkgewogICAgICAgICAgICAgICAgICAgIGxldCBlbGFwc2VkID0gbm93IC0gaW5ab25lU3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgbGV0IHJlbWFpbmluZ1NlYyA9IE1hdGguY2VpbCgoTVNfSU5fREVMQVkgLSBlbGFwc2VkKSAvIDEwMDApOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBTdGF0dXMgVGV4dCBzdXBheWEgdXNlciB0YWh1IChPVkVSUklERSBVSSkKICAgICAgICAgICAgICAgICAgICBzdGF0dXNFbC5pbm5lckhUTUwgKz0gYCA8YnI+W0FVVE8tUFVOQ0g6ICR7cmVtYWluaW5nU2VjfXNdYDsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nU2VjIDw9IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgaGFudGFyTWFzdWsodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGluWm9uZVN0YXJ0ID0gMDsgLy8gUmVzZXQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9IAogICAgICAgIC8vIC0tLSBTSVRVQVNJIDI6IEtFTFVBUiBLQVdBU0FOIChEQUZUQVIgS0VMVUFSKSAtLS0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaGFzTm90aWZpZWRFbnRyeSA9IGZhbHNlOyAvLyBSZXNldCBFbnRyeSBOb3RpZmljYXRpb24KCiAgICAgICAgICAgIC8vIDEuIFRyaWdnZXIgTm90aWZpY2F0aW9uOiAiQU5EQSBURUxBSCBLRUxVQVIgS0FXQVNBTiEiCiAgICAgICAgICAgIGlmIChzZXNzaW9uICYmICFoYXNOb3RpZmllZEV4aXQpIHsKICAgICAgICAgICAgICAgIGhhc05vdGlmaWVkRXhpdCA9IHRydWU7CiAgICAgICAgICAgICAgICBzZW5kTm90aWZpY2F0aW9uKCJBTkRBIFRFTEFIIEtFTFVBUiBLQVdBU0FOISIsICJBbmRhIGRpa2VzYW4gdGVsYWggbWVuaW5nZ2Fsa2FuIHBlamFiYXQuIEtsaWsgZGkgc2luaSB1bnR1ayBzYWhrYW4gd2FrdHUgYmFsaWsgKFB1bmNoIE91dCkuIiwgIndha2UtdXAtZXhpdCIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyAyLiBMb2dpYyBDb3VudGRvd24gQXV0by1LZWx1YXIgKEphbGFuIGJpbGEgQXBwIFRlcmJ1a2EpCiAgICAgICAgICAgIGlmIChzZXNzaW9uICYmICFpc1N1Ym1pdHRpbmcpIHsKICAgICAgICAgICAgICAgICBpZiAob3V0Wm9uZVN0YXJ0ID4gMCkgewogICAgICAgICAgICAgICAgICAgICBsZXQgZWxhcHNlZCA9IG5vdyAtIG91dFpvbmVTdGFydDsKICAgICAgICAgICAgICAgICAgICAgbGV0IHJlbWFpbmluZ1NlYyA9IE1hdGguY2VpbCgoTVNfT1VUX0RFTEFZIC0gZWxhcHNlZCkgLyAxMDAwKTsKICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgIGxldCB3YXJuQm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmdCb3gnKTsKICAgICAgICAgICAgICAgICAgICAgd2FybkJveC5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgICAgICAgICAgd2FybkJveC5pbm5lckhUTUwgPSBgQU1BUkFOISBLRUxVQVIgWk9OLjxicj5BVVRPIFBVTkNILU9VVCBEQUxBTSA8c3BhbiBzdHlsZT0iZm9udC1zaXplOjEuNWVtIj4ke3JlbWFpbmluZ1NlY308L3NwYW4+IFNgOwoKICAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ1NlYyA8PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICBoYW50YXJLZWx1YXIodHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICBvdXRab25lU3RhcnQgPSAwOwogICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nQm94Jykuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzdGFydFJhZGFyKCkgewogICAgICAgIGlmIChuYXZpZ2F0b3IuZ2VvbG9jYXRpb24pIHsKICAgICAgICAgICAgLy8gLS0tIE9QVElNQVNJOiBGT1JDRSBHUFMgQUdBUiBMRUJJSCBBR1JFU0lGIERJIEJBQ0tHUk9VTkQgLS0tCiAgICAgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi53YXRjaFBvc2l0aW9uKHBvcyA9PiB7CiAgICAgICAgICAgICAgICBsYXN0TGF0ID0gcG9zLmNvb3Jkcy5sYXRpdHVkZTsgbGFzdExuZyA9IHBvcy5jb29yZHMubG9uZ2l0dWRlOwogICAgICAgICAgICAgICAgY3VycmVudERpc3QgPSBjYWxjRGlzdChsYXN0TGF0LCBsYXN0TG5nLCBTQ0hPT0xfTEFULCBTQ0hPT0xfTE5HKTsgMQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBUZW50dWthbiBzdGF0dXMgbWFzdWsva2VsdWFyCiAgICAgICAgICAgICAgICBpc0luWm9uZSA9IChjdXJyZW50RGlzdCA8PSBSQURJVVNfTUVURVIpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBORVc6IFJFU0VUIEJMT0NLIExPR0lDCiAgICAgICAgICAgICAgICBpZiAoY3VycmVudERpc3QgPiBSQURJVVNfUkVTRVRfQVVUT19JTikgewogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdlaGFkaXJfYXV0b19pbl9ibG9ja2VkJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gS2VtYXNraW5pIFRpbWVzdGFtcCBTdGF0dXMgKExvZ2ljIFNhaGFqYSwgVUkgZGkgbW9uaXRvckF1dG9Mb2dpYykKICAgICAgICAgICAgICAgIGlmIChpc0luWm9uZSkgewogICAgICAgICAgICAgICAgICAgIGlmICghaW5ab25lU3RhcnQpIGluWm9uZVN0YXJ0ID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgICAgICAgICBvdXRab25lU3RhcnQgPSAwOyAKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFvdXRab25lU3RhcnQpIG91dFpvbmVTdGFydCA9IERhdGUubm93KCk7CiAgICAgICAgICAgICAgICAgICAgaW5ab25lU3RhcnQgPSAwOyAKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0sIG51bGwsIHtlbmFibGVIaWdoQWNjdXJhY3k6IHRydWUsIG1heGltdW1BZ2U6IDAsIHRpbWVvdXQ6IDUwMDB9KTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY0Rpc3QoYSxiLGMsZCl7dmFyIFI9NjM3MWUzLHg9YSpNYXRoLlBJLzE4MCx5PWMqTWF0aC5QSS8xODAsaz0oYy1hKSpNYXRoLlBJLzE4MCxsPShkLWIpKk1hdGguUEkvMTgwLHo9TWF0aC5zaW4oay8yKSpNYXRoLnNpbihrLzIpK01hdGguY29zKHgpKk1hdGguY29zKHkpKk1hdGguc2luKGwvMikqTWF0aC5zaW4obC8yKTtyZXR1cm4gUioyKk1hdGguYXRhbjIoTWF0aC5zcXJ0KHopLE1hdGguc3FydCgxLXopKTt9CiAgICAKICAgIGZ1bmN0aW9uIHN0YXJ0Q2xvY2soKXsKICAgICAgICBzZXRJbnRlcnZhbCgoKT0+ewogICAgICAgICAgICBsZXQgbiA9IG5ldyBEYXRlKCk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbG9ja0Rpc3BsYXknKS5pbm5lclRleHQgPSBuLnRvTG9jYWxlVGltZVN0cmluZygnZW4tVVMnLCB7IGhvdXIxMjogdHJ1ZSwgaG91cjogIjItZGlnaXQiLCBtaW51dGU6ICIyLWRpZ2l0IiwgdGltZVpvbmU6ICdBc2lhL0t1YWxhX0x1bXB1cicgfSk7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRlRGlzcGxheScpLmlubmVyVGV4dCA9IG4udG9Mb2NhbGVEYXRlU3RyaW5nKCdtcy1NWScsIHsgZGF5OiAnbnVtZXJpYycsIG1vbnRoOiAnc2hvcnQnLCB5ZWFyOiAnbnVtZXJpYycsIHRpbWVab25lOiAnQXNpYS9LdWFsYV9MdW1wdXInIH0pOwogICAgICAgIH0sIDEwMDApOwogICAgfQogICAgCiAgICBmdW5jdGlvbiBnZXRIaWpyaURhdGUoKXsKICAgICAgICBjb25zdCBtb250aE5hbWVzID0gWyJNdWhhcnJhbSIsICJTYWZhciIsICJSYWJpdWxhd2FsIiwgIlJhYml1bGFraGlyIiwgIkphbWFkaWxhd2FsIiwgIkphbWFkaWxha2hpciIsICJSZWphYiIsICJTeWFhYmFuIiwgIlJhbWFkYW4iLCAiU3lhd2FsIiwgIlp1bGthZWRhaCIsICJadWxoaWpqYWgiXTsKICAgICAgICBsZXQgdCA9IG5ldyBEYXRlKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbGV0IHBhcnRzID0gbmV3IEludGwuRGF0ZVRpbWVGb3JtYXQoJ2VuLXUtY2EtaXNsYW1pYy11bWFscXVyYS1udS1sYXRuJywgeyBkYXk6ICdudW1lcmljJywgbW9udGg6ICdudW1lcmljJywgeWVhcjogJ251bWVyaWMnLCB0aW1lWm9uZTogJ0FzaWEvS3VhbGFfTHVtcHVyJyB9KS5mb3JtYXRUb1BhcnRzKHQpOwogICAgICAgICAgICBsZXQgaERheSA9IHBhcnRzLmZpbmQocCA9PiBwLnR5cGUgPT09ICdkYXknKS52YWx1ZTsKICAgICAgICAgICAgbGV0IGhNb250aEluZGV4ID0gcGFyc2VJbnQocGFydHMuZmluZChwID0+IHAudHlwZSA9PT0gJ21vbnRoJykudmFsdWUpIC0gMTsgCiAgICAgICAgICAgIGxldCBoWWVhciA9IHBhcnRzLmZpbmQocCA9PiBwLnR5cGUgPT09ICd5ZWFyJykudmFsdWUuc3BsaXQoIiAiKVswXTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpanJpRGlzcGxheScpLmlubmVyVGV4dCA9IGAke2hEYXl9ICR7bW9udGhOYW1lc1toTW9udGhJbmRleF18fCgiIil9ICR7aFllYXJ9YDsKICAgICAgICB9IGNhdGNoKGUpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hpanJpRGlzcGxheScpLmlubmVyVGV4dCA9ICJLYWxlbmRhciBJc2xhbSI7IH0KICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja1Nlc3Npb24oKSB7IAogICAgICAgIGxldCBzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX3Nlc3Npb24nKSk7IAogICAgICAgIGlmKHMgJiYgcy5kYXRlID09PSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCkpIHsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWZhdWx0Rm9ybScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkUGFuZWwnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZXNzaW9uTmFtZScpLmlubmVyVGV4dCA9IHMubmFtYTsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkeW5hbWljU3RhdHVzJykuaW5uZXJUZXh0ID0gIlNUQVRVUzogIiArIHMua2F0ZWdvcmkgKyAiIChTRURBTkcgQkVSVFVHQVMpIjsKICAgICAgICAgICAgLy8gTE9BRCBTQVZFRCBBVkFUQVIgSUYgQU5ZCiAgICAgICAgICAgIGxldCBzYXZlZEF2YXRhciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfdXNlcl9hdmF0YXInKTsKICAgICAgICAgICAgaWYoc2F2ZWRBdmF0YXIpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyQXZhdGFyRGFzaCcpLnNyYyA9IHNhdmVkQXZhdGFyOwogICAgICAgICAgICB1cGRhdGVEYXNoYm9hcmRJbmZvKCk7IAogICAgICAgIH0KICAgIH0KICAgIAogICAgZnVuY3Rpb24gbG9hZExpc3QoKSB7IAogICAgICAgIGxldCBvZmZsaW5lUXVldWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfb2ZmbGluZV9xdWV1ZScpIHx8ICJbXSIpOwogICAgICAgIGxldCBvZmZsaW5lSXRlbXMgPSBvZmZsaW5lUXVldWUuZmlsdGVyKHEgPT4gcS5hY3Rpb24gPT09ICJNQVNVSyIpLm1hcChxID0+ICh7CiAgICAgICAgICAgIG5hbWE6IHEubmFtYSwga2F0ZWdvcmk6IHEua2F0ZWdvcmksIGphbTogbmV3IERhdGUocS5jbGllbnRUaW1lKS50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLVVTJywge2hvdXIxMjp0cnVlLCBob3VyOicyLWRpZ2l0JywgbWludXRlOicyLWRpZ2l0Jywgc2Vjb25kOicyLWRpZ2l0J30pLCBhdmF0YXI6IHEuYXZhdGFyLCBpc09mZmxpbmU6IHRydWUKICAgICAgICB9KSk7CiAgICAgICAgaWYoIW5hdmlnYXRvci5vbkxpbmUpIHsgcmVuZGVyTGlzdChvZmZsaW5lSXRlbXMpOyByZXR1cm47IH0KICAgICAgICBmZXRjaChBUElfVVJMLCB7IG1ldGhvZDogIlBPU1QiLCBib2R5OiBKU09OLnN0cmluZ2lmeSh7YWN0aW9uOiAiR0VUX0xJU1QiLCBwYXNzY29kZTogUEFTU0NPREV9KSB9KQogICAgICAgIC50aGVuKHIgPT4gci5qc29uKCkpLnRoZW4ocmVzID0+IHsgCiAgICAgICAgICAgIGxldCBzZXJ2ZXJJdGVtcyA9IHJlcy5kYXRhIHx8IHJlczsgCiAgICAgICAgICAgIGN1cnJlbnRMaXN0ID0gWy4uLm9mZmxpbmVJdGVtcywgLi4uc2VydmVySXRlbXNdOwogICAgICAgICAgICByZW5kZXJMaXN0KGN1cnJlbnRMaXN0KTsKICAgICAgICAgICAgY2hlY2tBdXRvU3RhdHVzKGN1cnJlbnRMaXN0KTsKICAgICAgICB9KS5jYXRjaCgoKSA9PiB7IHJlbmRlckxpc3Qob2ZmbGluZUl0ZW1zKTsgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVuZGVyTGlzdChpdGVtcykgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb3VudCcpLmlubmVyVGV4dCA9IGl0ZW1zLmxlbmd0aDsgCiAgICAgICAgbGV0IGggPSAiIjsgCiAgICAgICAgbGV0IGRlZkF2YXRhciA9ICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8zMTM1LzMxMzU3MTUucG5nIjsKICAgICAgICBpdGVtcy5mb3JFYWNoKChpLCBpZHgpID0+IHsgCiAgICAgICAgICAgIGxldCBpbWdCdG4gPSAoaS5rYXRlZ29yaSA9PT0gIlBFTEFXQVQiICYmIGkuZm90bykgPyBgPHNwYW4gY2xhc3M9Imljb24tYnRuIiBvbmNsaWNrPSJ2aWV3SW1hZ2UoJHtpZHh9KSI+PGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzMzNDIvMzM0MjEzNy5wbmciIGNsYXNzPSJpY29uLTNkLW1pbmkiPjwvc3Bhbj5gIDogIiI7CiAgICAgICAgICAgIGxldCB4QnRuID0gYDxzcGFuIGNsYXNzPSJpY29uLWJ0biIgc3R5bGU9ImJvcmRlci1jb2xvcjojZmFkYmQ4OyIgb25jbGljaz0ia2VsdWFyTWFudWFsKCcke2kubmFtYX0nKSI+PGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzY4NjEvNjg2MTM2Mi5wbmciIGNsYXNzPSJpY29uLTNkLW1pbmkiPjwvc3Bhbj5gOwogICAgICAgICAgICBsZXQgb2ZmbGluZUNsYXNzID0gaS5pc09mZmxpbmUgPyAib2ZmbGluZS1pdGVtIiA6ICIiOwogICAgICAgICAgICBsZXQgb2ZmbGluZUljb24gPSBpLmlzT2ZmbGluZSA/IGA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMTU5LzE1OTYwNC5wbmciIGNsYXNzPSJpY29uLTNkLW1pbmkiIHRpdGxlPSJNZW51bmdndSBTeW5jIj4gYCA6ICIiOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8gTE9HSUsgQVZBVEFSIERJUEVSQkFJS0k6IEtldXRhbWFhbiBrZXBhZGEgcGlsaWhhbiB1c2VyLCBvdmVycmlkZSBwZWxhd2F0IGhhbnlhIGppa2EgdGlhZGEgYXZhdGFyCiAgICAgICAgICAgIGxldCBjdXJyZW50RGVmID0gKGkua2F0ZWdvcmkgPT09ICJQRUxBV0FUIikgPyAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMzEzNS8zMTM1NzY4LnBuZyIgOiBkZWZBdmF0YXI7CiAgICAgICAgICAgIGxldCB1c2VyQXZhdGFyID0gKGkuYXZhdGFyICYmIGkuYXZhdGFyICE9PSAiLSIpID8gaS5hdmF0YXIgOiBjdXJyZW50RGVmOwoKICAgICAgICAgICAgbGV0IGF2YXRhckltZyA9IGA8aW1nIHNyYz0iJHt1c2VyQXZhdGFyfSIgc3R5bGU9IndpZHRoOjM1cHg7IGhlaWdodDozNXB4OyBib3JkZXItcmFkaXVzOjUwJTsgbWFyZ2luLXJpZ2h0OjEwcHg7IGJvcmRlcjoycHggc29saWQgI2RkZDsgYmFja2dyb3VuZDojZmZmOyBwYWRkaW5nOjJweDsgZmxleC1zaHJpbms6MDsiPmA7CgogICAgICAgICAgICBoICs9IGA8ZGl2IGNsYXNzPSJ1c2VyLWNhcmQgJHtvZmZsaW5lQ2xhc3N9Ij4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsgd2lkdGg6MTAwJTsiPgogICAgICAgICAgICAgICAgICAgICAgICAke2F2YXRhckltZ30KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idXNlci1pbmZvIj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+JHtvZmZsaW5lSWNvbn0ke2kubmFtYX08L3N0cm9uZz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InVzZXItZGV0YWlscyI+PHNwYW4+JHtpLmthdGVnb3JpfTwvc3Bhbj48c3BhbiBjbGFzcz0ibGl2ZS10aW1lciIgZGF0YS1tYXN1az0iJHtpLmphbXx8KCJ1bmRlZmluZWQiKX0iPjxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8yOTcyLzI5NzI1MzEucG5nIiBzdHlsZT0id2lkdGg6MTJweDtoZWlnaHQ6MTJweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGUiPiAwSCAwTTwvc3Bhbj48L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibGlzdC1hY3Rpb25zIj4ke2ltZ0J0bn0ke3hCdG59PC9kaXY+CiAgICAgICAgICAgICAgICAgIDwvZGl2PmA7IAogICAgICAgIH0pOyAKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGlzdENvbnRhaW5lcicpLmlubmVySFRNTCA9IGggfHwgIjxkaXYgc3R5bGU9J3BhZGRpbmc6MjBweDsgY29sb3I6Izk5OTsgZm9udC1zaXplOjEycHg7Jz5UaWFkYSByZWtvZCBoYXJpIGluaS48L2Rpdj4iOyAKICAgICAgICB1cGRhdGVMaXZlVGltZXJzKCk7CiAgICB9CgogICAgZnVuY3Rpb24gdmlld0ltYWdlKGluZGV4KSB7IGxldCBkYXRhID0gY3VycmVudExpc3RbaW5kZXhdOyBpZihkYXRhICYmIGRhdGEuZm90bykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1nRnVsbCcpLnNyYyA9IGRhdGEuZm90bzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOyB9IH0KICAgIGZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZU1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICJub25lIjsgfQogICAgZnVuY3Rpb24gcHJvY2Vzc0ltYWdlKGkpe2lmKGkuZmlsZXMmJmkuZmlsZXNbMF0pe2xldCByPW5ldyBGaWxlUmVhZGVyKCk7ci5vbmxvYWQ9ZnVuY3Rpb24oZSl7bGV0IGltPW5ldyBJbWFnZSgpO2ltLnNyYz1lLnRhcmdldC5yZXN1bHQ7aW0ub25sb2FkPWZ1bmN0aW9uKCl7bGV0IGN2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO2xldCBjdHg9Y3YuZ2V0Q29udGV4dCgiMmQiKTtjdi53aWR0aD00MDA7Y3YuaGVpZ2h0PTQwMCooaW0uaGVpZ2h0L2ltLndpZHRoKTtjdHguZHJhd0ltYWdlKGltLDAsMCxjdi53aWR0aCxjdi5oZWlnaHQpO2xldCBkPWN2LnRvRGF0YVVSTCgiaW1hZ2UvanBlZyIsMC43KTtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlld0ltZycpLnNyYz1kO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3SW1nJykuc3R5bGUuZGlzcGxheT0nYmxvY2snO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXNlNjRGb3RvJykudmFsdWU9ZDt9O307ci5yZWFkQXNEYXRhVVJMKGkuZmlsZXNbMF0pO319CiAgICBmdW5jdGlvbiBjaGVja0thdGVnb3JpKCl7IGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrYXRlZ29yaScpLnZhbHVlPT09J1BFTEFXQVQnKSBzaG93UGVsYXdhdEZvcm0oKTsgfQogICAgZnVuY3Rpb24gc2hvd1BlbGF3YXRGb3JtKCl7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWZhdWx0Rm9ybScpLnN0eWxlLmRpc3BsYXk9J25vbmUnOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVsYXdhdFBhbmVsJykuc3R5bGUuZGlzcGxheT0nYmxvY2snOyB9CiAgICBmdW5jdGlvbiBjYW5jZWxQZWxhd2F0KCl7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZWxhd2F0UGFuZWwnKS5zdHlsZS5kaXNwbGF5PSdub25lJzsgY2hlY2tTZXNzaW9uKCk7IGxvY2F0aW9uLnJlbG9hZCgpOyB9CiAgICBmdW5jdGlvbiByZXNldFNlc2koKXsgaWYoY29uZmlybSgiUmVzZXQgc2VzaT8iKSl7bG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2VoYWRpcl9zZXNzaW9uJyk7bG9jYXRpb24ucmVsb2FkKCk7fSB9Cjwvc2NyaXB0Pgo8L2JvZHk+CjwvaHRtbD4K"));</script>
