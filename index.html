<!-- PROTECTED BY STEALTH-HTML v2.0 | NO ACCESS | DO NOT TAMPER -->
<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9Im1zIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+U2lzdGVtIFBlbGF3YXQgJiBLZWhhZGlyYW4gdjIyLjkgKEF1dG8gTW9kZSk8L3RpdGxlPgogICAgCiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLS0+CiAgICA8IS0tICAgICAgICAgICAgICAgICBSVUFOR0FOIEVESVQgUEVOR0dVTkEgKG1hbnRhcCkgICAgICAgICAgICAgICAgLS0+CiAgICA8IS0tID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLS0+CiAgICA8c2NyaXB0PgogICAgICAgIC8vIDEuIE1hc3Vra2FuIExpbmsgR29vZ2xlIEFwcHMgU2NyaXB0IChXZWIgQXBwIFVSTCkgZGkgc2luaQogICAgICAgIGNvbnN0IEFQSV9VUkwgPSAnaHR0cHM6Ly9zY3JpcHQuZ29vZ2xlLmNvbS9tYWNyb3Mvcy9BS2Z5Y2J5N0VaVDQxRldMcERNaDI3cUdmcGZKWVpFbkpQczJtTXFOMGxTOFVZU1ZvZ2lvZkswWHU4dEczdWNYMkZEeWJBQkkvZXhlYyc7IAogICAgICAgIAogICAgICAgIC8vIDIuIEthdGEgTGFsdWFuIHVudHVrIEFkbWluIC8gTWFudWFsIE92ZXJyaWRlCiAgICAgICAgY29uc3QgUEFTU0NPREUgPSAiMTAxMDEwIjsKICAgICAgICAgCiAgICAgICAgLy8gMy4gS29vcmRpbmF0IExva2FzaSAoQW1iaWwgZGFyaSBHb29nbGUgTWFwcykKICAgICAgICBjb25zdCBTQ0hPT0xfTEFUID0gNS4yMjc2OTE5NjUxNjA5MDY7IAogICAgICAgIGNvbnN0IFNDSE9PTF9MTkcgPSAxMDAuNjk5MDMzNzc4OTA2NDM7IAogICAgICAgIAogICAgICAgIC8vIDQuIEphcmFrIFJhZGl1cyB5YW5nIGRpYmVuYXJrYW4gKGRhbGFtIG1ldGVyKQogICAgICAgIGNvbnN0IFJBRElVU19NRVRFUiA9IDMwOyAKCiAgICAgICAgLy8gNS4gQW50aS1TcGFtIENoZWNrLUNoZWNrOiBCZXJhcGEgbWluaXQgZGFsYW0ga2F3YXNhbiBiYXJ1IGF1dG8tbWFzdWs/IChFbGFrIHNwYW0pCiAgICAgICAgY29uc3QgTUlOSVRfQU5USV9TUEFNX01BU1VLID0gMC4wMDAxOwoKICAgICAgICAvLyA2LiBBdXRvIENoZWNrb3V0IERlbGF5OiBCZXJhcGEgbWluaXQgbHVhciBrYXdhc2FuIGJhcnUgYXV0by1rZWx1YXI/IChTbW9vdGgpCiAgICAgICAgY29uc3QgTUlOSVRfREVMQVlfS0VMVUFSID0gMC4xOwoKICAgICAgICAvLyA3LiBKYXJhayBSZXNldCBBdXRvLUluOiBQZW5nZ3VuYSBwZXJsdSBrZWx1YXIgc2VqYXVoIGluaSAobWV0ZXIpIHVudHVrIGFrdGlma2FuIHNlbXVsYSBhdXRvLWluIHNlbGVwYXMgY2hlY2stb3V0CiAgICAgICAgY29uc3QgUkFESVVTX1JFU0VUX0FVVE9fSU4gPSAzMDA7CiAgICA8L3NjcmlwdD4KICAgIDwhLS0gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAtLT4KCiAgICA8bGluayByZWw9Im1hbmlmZXN0IiBocmVmPSJtYW5pZmVzdC5qc29uIj4KICAgIDxtZXRhIG5hbWU9InRoZW1lLWNvbG9yIiBjb250ZW50PSIjMWUzYzcyIj4KICAgIDxsaW5rIGhyZWY9Imh0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9UG9wcGluczp3Z2h0QDMwMDs0MDA7NTAwOzYwMDs3MDA7ODAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KICAgIAogICAgPHN0eWxlPgogICAgICAgIGJvZHkgeyBmb250LWZhbWlseTogJ1BvcHBpbnMnLCBzYW5zLXNlcmlmOyBiYWNrZ3JvdW5kOiAjZjBmMmY1OyBjb2xvcjogIzMzMzsgbWFyZ2luOiAwOyBwYWRkaW5nOiAxNXB4OyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgbWluLWhlaWdodDogMTAwdmg7IH0KICAgICAgICAuY29udGFpbmVyIHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDA7IGJvcmRlci1yYWRpdXM6IDI1cHg7IHdpZHRoOiAxMDAlOyBtYXgtd2lkdGg6IDQyMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBvc2l0aW9uOiByZWxhdGl2ZTsgYm94LXNoYWRvdzogMCAxNXB4IDM1cHggcmdiYSgwLDAsMCwwLjEpOyBvdmVyZmxvdzogaGlkZGVuOyBwYWRkaW5nLWJvdHRvbTogMzBweDsgfQogICAgICAgIAogICAgICAgIC5oZWFkZXItYmcgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICMxNDFlMzAsICMyNDNiNTUpOyBwYWRkaW5nOiAxNXB4IDIwcHggMzBweCAyMHB4OyBjb2xvcjogd2hpdGU7IGJvcmRlci1yYWRpdXM6IDAgMCAyNXB4IDI1cHg7IGJveC1zaGFkb3c6IDAgMTBweCAyNXB4IHJnYmEoMCwwLDAsMC4yKTsgbWFyZ2luLWJvdHRvbTogMjVweDsgcG9zaXRpb246IHJlbGF0aXZlOyB9CiAgICAgICAgLnRvcC1iYXItcm93IHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogMTBweDsgZm9udC1zaXplOiAxMXB4OyBjb2xvcjogI2NmZDhkYzsgZm9udC13ZWlnaHQ6IDQwMDsgbGV0dGVyLXNwYWNpbmc6IDAuNXB4OyBwYWRkaW5nLWJvdHRvbTogMTVweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4xKTsgbWFyZ2luLWJvdHRvbTogMjBweDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgfQogICAgICAgIAogICAgICAgIC5tYWluLXRpdGxlLWJsb2NrIHsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQogICAgICAgIC50aXRsZS1zbWFsbCB7IGZvbnQtc2l6ZTogMTBweDsgbGV0dGVyLXNwYWNpbmc6IDNweDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgY29sb3I6ICM2ZGQ1ZWQ7IG1hcmdpbi1ib3R0b206IDVweDsgZm9udC13ZWlnaHQ6IDYwMDsgfQogICAgICAgIC50aXRsZS1iaWcgeyBmb250LXNpemU6IDI0cHg7IGZvbnQtd2VpZ2h0OiA4MDA7IHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7IGxldHRlci1zcGFjaW5nOiAxcHg7IGxpbmUtaGVpZ2h0OiAxLjE7IGJhY2tncm91bmQ6IC13ZWJraXQtbGluZWFyLWdyYWRpZW50KCNmZmYsICNhOGMwZmYpOyAtd2Via2l0LWJhY2tncm91bmQtY2xpcDogdGV4dDsgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6IHRyYW5zcGFyZW50OyB0ZXh0LXNoYWRvdzogMCAycHggMTBweCByZ2JhKDAsMCwwLDAuMik7IG1hcmdpbjogMnB4IDA7IH0KCiAgICAgICAgLmNvbnRlbnQtcGFkZGluZyB7IHBhZGRpbmc6IDAgMjBweDsgfQogICAgICAgIHNlbGVjdCwgaW5wdXQsIHRleHRhcmVhIHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDE0cHg7IG1hcmdpbi1ib3R0b206IDEycHg7IGJvcmRlcjogMnB4IHNvbGlkICNmMWYzZjU7IGJhY2tncm91bmQ6ICNmOGY5ZmE7IGJvcmRlci1yYWRpdXM6IDEycHg7IGZvbnQtc2l6ZTogMTRweDsgYm94LXNpemluZzogYm9yZGVyLWJveDsgZm9udC1mYW1pbHk6IGluaGVyaXQ7IG91dGxpbmU6IG5vbmU7IHRyYW5zaXRpb246IDAuM3M7IGNvbG9yOiAjMzMzOyB9CiAgICAgICAgc2VsZWN0OmZvY3VzLCBpbnB1dDpmb2N1cyB7IGJvcmRlci1jb2xvcjogIzFlM2M3MjsgYmFja2dyb3VuZDogI2ZmZjsgfQogICAgICAgIHRleHRhcmVhIHsgcmVzaXplOiB2ZXJ0aWNhbDsgbWluLWhlaWdodDogODBweDsgZGlzcGxheTogbm9uZTsgYm9yZGVyOiAycHggc29saWQgI2YzOWMxMjsgYmFja2dyb3VuZDogI2ZmZmNmNTsgfSAvKiBISURERU4gQUxBU0FOICovCgogICAgICAgIC8qID09PSBORVcgQ1NTIEZPUiBOQU1FIExPQ0sgJiBBVkFUQVIgPT09ICovCiAgICAgICAgLmlucHV0LWdyb3VwIHsgcG9zaXRpb246IHJlbGF0aXZlOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyB3aWR0aDogMTAwJTsgbWFyZ2luLWJvdHRvbTogMTJweDsgfQogICAgICAgIC8qIFRhbWJhaCBwYWRkaW5nIHJpZ2h0IHN1cGF5YSBkdWEgYnV0YW5nIG11YXQgKi8KICAgICAgICAuaW5wdXQtZ3JvdXAgaW5wdXQgeyBtYXJnaW4tYm90dG9tOiAwOyBwYWRkaW5nLXJpZ2h0OiA5MHB4OyB9CiAgICAgICAgCiAgICAgICAgLmxvY2stYnRuIHsgcG9zaXRpb246IGFic29sdXRlOyByaWdodDogNXB4OyB0b3A6IDUwJTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpOyBjdXJzb3I6IHBvaW50ZXI7IGJhY2tncm91bmQ6ICNlY2YwZjE7IGJvcmRlcjogbm9uZTsgei1pbmRleDogNTsgcGFkZGluZzogNnB4OyBib3JkZXItcmFkaXVzOiA1MCU7IHRyYW5zaXRpb246IDAuMnM7IHdpZHRoOiAzNXB4OyBoZWlnaHQ6IDM1cHg7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyB9CiAgICAgICAgLmxvY2stYnRuOmhvdmVyIHsgYmFja2dyb3VuZDogI2RmZTZlOTsgfQogICAgICAgIC5sb2NrLWJ0bjphY3RpdmUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSkgc2NhbGUoMC45KTsgfQogICAgICAgIC5sb2NrLWJ0bjpkaXNhYmxlZCB7IG9wYWNpdHk6IDAuNTsgY3Vyc29yOiBub3QtYWxsb3dlZDsgfQogICAgICAgIAogICAgICAgIC5hdmF0YXItYnRuIHsgcmlnaHQ6IDQ4cHg7IGJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyB9IC8qIEJ1dGFuZyBhdmF0YXIgc2ViZWxhaCBidXRhbmcgbG9jayAqLwoKICAgICAgICAvKiBTdHlsZSBLaGFzIGJpbGEgbG9jayBha3RpZiAoS3VuaW5nKSAqLwogICAgICAgIC5idG4teWVsbG93IHsgYmFja2dyb3VuZDogI2YxYzQwZiAhaW1wb3J0YW50OyBib3gtc2hhZG93OiAwIDAgMTBweCByZ2JhKDI0MSwgMTk2LCAxNSwgMC41KTsgYm9yZGVyOiAycHggc29saWQgI2YzOWMxMjsgfQoKICAgICAgICAvKiBTdHlsZSBNb2RhbCBBdmF0YXIgR3JpZCAqLwogICAgICAgIC5hdmF0YXItZ3JpZCB7IGRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KDUsIDFmcik7IGdhcDogMTBweDsgbWF4LWhlaWdodDogMzAwcHg7IG92ZXJmbG93LXk6IGF1dG87IHBhZGRpbmc6IDEwcHg7IH0KICAgICAgICAuYXZhdGFyLW9wdGlvbiB7IHdpZHRoOiAxMDAlOyBhc3BlY3QtcmF0aW86IDEvMTsgY3Vyc29yOiBwb2ludGVyOyBib3JkZXItcmFkaXVzOiA1MCU7IGJvcmRlcjogMnB4IHNvbGlkIHRyYW5zcGFyZW50OyB0cmFuc2l0aW9uOiAwLjJzOyBwYWRkaW5nOiAycHg7IGJhY2tncm91bmQ6ICNmOGY5ZmE7IH0KICAgICAgICAuYXZhdGFyLW9wdGlvbjpob3ZlciB7IGJvcmRlci1jb2xvcjogIzFlM2M3MjsgYmFja2dyb3VuZDogI2U4ZjVlOTsgdHJhbnNmb3JtOiBzY2FsZSgxLjEpOyB9CiAgICAgICAgLmF2YXRhci1vcHRpb24uc2VsZWN0ZWQgeyBib3JkZXItY29sb3I6ICMyN2FlNjA7IGJhY2tncm91bmQ6ICNkNGVkZGE7IGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMzksIDE3NCwgOTYsIDAuMyk7IH0KICAgICAgICAuYXZhdGFyLW9wdGlvbiBpbWcgeyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBvYmplY3QtZml0OiBjb250YWluOyB9CiAgICAgICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgogICAgICAgIC5idG4geyB3aWR0aDogMTAwJTsgcGFkZGluZzogMTZweDsgYmFja2dyb3VuZDogIzFlM2M3MjsgY29sb3I6IHdoaXRlOyBib3JkZXI6IG5vbmU7IGJvcmRlci1yYWRpdXM6IDEycHg7IGZvbnQtc2l6ZTogMTVweDsgZm9udC13ZWlnaHQ6IDYwMDsgY3Vyc29yOiBwb2ludGVyOyBtYXJnaW4tdG9wOiA4cHg7IGJveC1zaGFkb3c6IDAgNHB4IDEwcHggcmdiYSgzMCwgNjAsIDExNCwgMC4yKTsgdHJhbnNpdGlvbjogMC4yczsgbGV0dGVyLXNwYWNpbmc6IDAuNXB4OyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgZ2FwOiA4cHg7IH0KICAgICAgICAuYnRuOmFjdGl2ZSB7IHRyYW5zZm9ybTogc2NhbGUoMC45OCk7IH0KICAgICAgICAuYnRuOmRpc2FibGVkIHsgYmFja2dyb3VuZDogI2JkYzNjNzsgY3Vyc29yOiBub3QtYWxsb3dlZDsgYm94LXNoYWRvdzogbm9uZTsgb3BhY2l0eTogMC43OyB9CiAgICAgICAgLmJ0bi1rZWx1YXIgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICNjYjJkM2UsICNlZjQ3M2EpOyB9CiAgICAgICAgLmJ0bi1wZWxhd2F0IHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjMTE5OThlLCAjMzhlZjdkKTsgbWFyZ2luLXRvcDogMTVweDsgfSAKICAgICAgICAuYnRuLWNhbmNlbCB7IGJhY2tncm91bmQ6ICM3ZjhjOGQ7IG1hcmdpbi10b3A6IDEwcHg7IH0KICAgICAgICAKICAgICAgICAjZGFzaGJvYXJkUGFuZWwgeyBkaXNwbGF5OiBub25lOyBiYWNrZ3JvdW5kOiAjZmZmOyBwYWRkaW5nOiAyMHB4OyBib3JkZXItcmFkaXVzOiAxNXB4OyBib3JkZXI6IDFweCBzb2xpZCAjZTFlNGU4OyBtYXJnaW4tYm90dG9tOiAyMHB4OyBib3gtc2hhZG93OiAwIDVweCAxNXB4IHJnYmEoMCwwLDAsMC4wMyk7IH0KICAgICAgICAudXNlci13ZWxjb21lIHsgZm9udC1zaXplOiAxOHB4OyBmb250LXdlaWdodDogNzAwOyBjb2xvcjogIzFlM2M3MjsgbWFyZ2luLWJvdHRvbTogMnB4OyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgZ2FwOiA4cHg7fQogICAgICAgIC5sb2NrZWQtbXNnIHsgZm9udC1zaXplOiAxMXB4OyBjb2xvcjogIzk1YTVhNjsgbWFyZ2luLWJvdHRvbTogMTVweDsgfQogICAgICAgIAogICAgICAgICNwZWxhd2F0UGFuZWwgeyBkaXNwbGF5OiBub25lOyBib3JkZXI6IDJweCBkYXNoZWQgIzI3YWU2MDsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogMTVweDsgYmFja2dyb3VuZDogI2YwZmRmNDsgbWFyZ2luLWJvdHRvbTogMjBweDsgfQogICAgICAgIAogICAgICAgIC8qIFNUWUxPIEdJQU5UIENBTUVSQSBDU1MgKi8KICAgICAgICAuZ2lhbnQtY2FtLWJ0biB7IAogICAgICAgICAgICB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxNjBweDsgCiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICMxMzRlNWUsICM3MWIyODApOyAKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMjBweDsgCiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyAKICAgICAgICAgICAgYm94LXNoYWRvdzogMCAxMHB4IDIwcHggcmdiYSgwLDAsMCwwLjE1KTsgCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsgdHJhbnNpdGlvbjogMC4yczsgYm9yZGVyOiAycHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjMpOwogICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7IG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgfQogICAgICAgIC5naWFudC1jYW0tYnRuOmFjdGl2ZSB7IHRyYW5zZm9ybTogc2NhbGUoMC45Nik7IH0KICAgICAgICAuZ2lhbnQtY2FtLWljb24geyB3aWR0aDogNzBweDsgaGVpZ2h0OiA3MHB4OyBtYXJnaW4tYm90dG9tOiAxMHB4OyBmaWx0ZXI6IGRyb3Atc2hhZG93KDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMikpOyB9CiAgICAgICAgLmdpYW50LWNhbS10ZXh0IHsgZm9udC1zaXplOiAxMnB4OyBmb250LXdlaWdodDogODAwOyBjb2xvcjogd2hpdGU7IGxldHRlci1zcGFjaW5nOiAxLjVweDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgfQogICAgICAgIC5naWFudC1wdWxzZSB7IGFuaW1hdGlvbjogcHVsc2VHbG93IDJzIGluZmluaXRlOyB9CiAgICAgICAgQGtleWZyYW1lcyBwdWxzZUdsb3cgeyAwJSB7IGJveC1zaGFkb3c6IDAgMCAwIDAgcmdiYSgxMTMsIDE3OCwgMTI4LCAwLjQpOyB9IDcwJSB7IGJveC1zaGFkb3c6IDAgMCAwIDEwcHggcmdiYSgxMTMsIDE3OCwgMTI4LCAwKTsgfSAxMDAlIHsgYm94LXNoYWRvdzogMCAwIDAgMCByZ2JhKDExMywgMTc4LCAxMjgsIDApOyB9IH0KCiAgICAgICAgI3ByZXZpZXdJbWcgeyB3aWR0aDogMTAwJTsgbWFyZ2luLXRvcDogMTBweDsgYm9yZGVyLXJhZGl1czogMTBweDsgZGlzcGxheTogbm9uZTsgYm9yZGVyOiAycHggc29saWQgIzMzMzsgbWF4LWhlaWdodDogMjUwcHg7IG9iamVjdC1maXQ6IGNvdmVyOyB9CiAgICAgICAgCiAgICAgICAgLmxpc3QtaGVhZGVyIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBtYXJnaW4tdG9wOiAyNXB4OyBib3JkZXItYm90dG9tOiAycHggc29saWQgI2YxZjFmMTsgcGFkZGluZy1ib3R0b206IDEwcHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IH0KICAgICAgICAubGlzdC1oZWFkZXIgc3BhbiB7IGZvbnQtd2VpZ2h0OiA3MDA7IGNvbG9yOiAjMWUzYzcyOyBmb250LXNpemU6IDE0cHg7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNXB4OyB9CiAgICAgICAgLmxpc3QtY29udGFpbmVyIHsgdGV4dC1hbGlnbjogbGVmdDsgbWFyZ2luLXRvcDogNXB4OyBtYXgtaGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3cteTogYXV0bzsgfQogICAgICAgIAogICAgICAgIC51c2VyLWNhcmQgeyBiYWNrZ3JvdW5kOiAjZmZmOyBwYWRkaW5nOiAxMnB4OyBib3JkZXI6IDFweCBzb2xpZCAjZjBmMGYwOyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgIzFlM2M3MjsgYm9yZGVyLXJhZGl1czogOHB4OyBtYXJnaW4tYm90dG9tOiA4cHg7IGJveC1zaGFkb3c6IDAgMnB4IDVweCByZ2JhKDAsMCwwLDAuMDMpOyB9CiAgICAgICAgLnVzZXItY2FyZC5vZmZsaW5lLWl0ZW0geyBib3JkZXItbGVmdDogNHB4IHNvbGlkICNlNjdlMjI7IGJhY2tncm91bmQ6ICNmZmZjZjU7IH0KICAgICAgICAudXNlci1pbmZvIHsgZmxleC1ncm93OiAxOyBtaW4td2lkdGg6IDA7IHBhZGRpbmctcmlnaHQ6IDhweDsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IH0KICAgICAgICAudXNlci1pbmZvIHN0cm9uZyB7IGZvbnQtc2l6ZTogMTNweDsgY29sb3I6ICMyYzNlNTA7IHdoaXRlLXNwYWNlOiBub3dyYXA7IG92ZXJmbG93OiBoaWRkZW47IHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzOyB9CiAgICAgICAgLnVzZXItZGV0YWlscyB7IGZvbnQtc2l6ZTogMTFweDsgY29sb3I6ICM3ZjhjOGQ7IG1hcmdpbi10b3A6IDNweDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA1cHg7IH0KICAgICAgICAKICAgICAgICAvKiBTVFlMRSBKQU0gUkFORElLICovCiAgICAgICAgLmxpdmUtdGltZXIgeyAKICAgICAgICAgICAgY29sb3I6ICNkMzU0MDA7IAogICAgICAgICAgICBmb250LXdlaWdodDogNzAwOyAKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICdDb3VyaWVyIE5ldycsIENvdXJpZXIsIG1vbm9zcGFjZTsgCiAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY1ZTY7IAogICAgICAgICAgICBwYWRkaW5nOiAycHggOHB4OyAKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4OyAKICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2ZhZTVkMzsgCiAgICAgICAgICAgIG1pbi13aWR0aDogNzBweDsgCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgCiAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4OwogICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICAgICAgICBnYXA6IDRweDsKICAgICAgICAgICAgZm9udC1zaXplOiAxMXB4OyAKICAgICAgICB9CgogICAgICAgIC5saXN0LWFjdGlvbnMgeyBkaXNwbGF5OiBmbGV4OyBnYXA6IDVweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZmxleC1zaHJpbms6IDA7IH0KICAgICAgICAuaWNvbi1idG4geyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtc2l6ZTogMTRweDsgd2lkdGg6IDI4cHg7IGhlaWdodDogMjhweDsgYm9yZGVyLXJhZGl1czogNnB4OyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYmFja2dyb3VuZDogI2Y4ZjlmYTsgYm9yZGVyOiAxcHggc29saWQgI2VlZTsgdHJhbnNpdGlvbjogYmFja2dyb3VuZCAwLjJzOyB9CiAgICAgICAgLmljb24tYnRuOmhvdmVyIHsgYmFja2dyb3VuZDogI2UyZTZlYTsgfQoKICAgICAgICAjc2NoZWR1bGVJbmZvIHsgZGlzcGxheTogbm9uZTsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IHBhZGRpbmc6IDA7IG1hcmdpbi1ib3R0b206IDE1cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgYW5pbWF0aW9uOiBmYWRlSW4gMC41czsgfQogICAgICAgIC5zY2hlZHVsZS1taW5pbWFsIHsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGdhcDogMTBweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgfQogICAgICAgIC50aW1lLXBpbGwgeyBiYWNrZ3JvdW5kOiAjZjFmM2Y1OyBwYWRkaW5nOiA2cHggMTJweDsgYm9yZGVyLXJhZGl1czogMjBweDsgZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogNjAwOyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDVweDsgYm9yZGVyOiAxcHggc29saWQgI2U5ZWNlZjsgfQogICAgICAgIAogICAgICAgIEBrZXlmcmFtZXMgZmFkZUluIHsgZnJvbSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNXB4KTsgfSB0byB7IG9wYWNpdHk6IDE7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsgfSB9CgogICAgICAgICNpbWFnZU1vZGFsIHsgZGlzcGxheTogbm9uZTsgcG9zaXRpb246IGZpeGVkOyB6LWluZGV4OiA5OTk5OyBsZWZ0OiAwOyB0b3A6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IG92ZXJmbG93OiBhdXRvOyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuOSk7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyB9CiAgICAgICAgLm1vZGFsLWNvbnRlbnQgeyBtYXJnaW46IGF1dG87IGRpc3BsYXk6IGJsb2NrOyBtYXgtd2lkdGg6IDkwJTsgbWF4LWhlaWdodDogODAlOyBib3JkZXItcmFkaXVzOiAxMHB4OyBib3JkZXI6IDJweCBzb2xpZCB3aGl0ZTsgfQogICAgICAgIC5jbG9zZS1tb2RhbCB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAyMHB4OyByaWdodDogMzVweDsgY29sb3I6ICNmMWYxZjE7IGZvbnQtc2l6ZTogNDBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IGN1cnNvcjogcG9pbnRlcjsgfQoKICAgICAgICAjd2FybmluZ0JveCB7IGRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiBmaXhlZDsgYm90dG9tOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgYmFja2dyb3VuZDogI2MwMzkyYjsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiAxNXB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IHotaW5kZXg6IDk5OTk7IGZvbnQtd2VpZ2h0OiBib2xkOyBib3gtc2hhZG93OiAwIC01cHggMTVweCByZ2JhKDAsMCwwLDAuMik7IGFuaW1hdGlvbjogcHVsc2VXYXJuIDFzIGluZmluaXRlOyB9CiAgICAgICAgQGtleWZyYW1lcyBwdWxzZVdhcm4geyAwJSB7IGJhY2tncm91bmQ6ICNjMDM5MmI7IH0gNTAlIHsgYmFja2dyb3VuZDogI2U3NGMzYzsgfSAxMDAlIHsgYmFja2dyb3VuZDogI2MwMzkyYjsgfSB9CiAgICAgICAgCiAgICAgICAgI2xvYWRpbmdDb25maWcgeyBmb250LXNpemU6IDExcHg7IGNvbG9yOiAjZTY3ZTIyOyBkaXNwbGF5OiBub25lOyBtYXJnaW4tYm90dG9tOiA1cHg7IGZvbnQtc3R5bGU6IGl0YWxpYzsgfQogICAgICAgICNzdGF0dXNUZXh0IHsgZm9udC1zaXplOiAxMXB4OyBmb250LXdlaWdodDogNjAwOyBtYXJnaW4tYm90dG9tOiAxNXB4OyBjb2xvcjogIzk1YTVhNjsgYmFja2dyb3VuZDogI2Y4ZjlmYTsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBwYWRkaW5nOiA0cHggMTJweDsgYm9yZGVyLXJhZGl1czogMTVweDsgZGlzcGxheTogaW5saW5lLWZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNXB4OyB9CgogICAgICAgIC8qIC0tLSAzRCBJQ09OUyBTVFlMRVMgLS0tICovCiAgICAgICAgLmljb24tM2QtbWluaSB7IHdpZHRoOiAxNnB4OyBoZWlnaHQ6IDE2cHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IG1hcmdpbi1yaWdodDogMnB4OyBmaWx0ZXI6IGRyb3Atc2hhZG93KDAgMXB4IDFweCByZ2JhKDAsMCwwLDAuMikpOyB9CiAgICAgICAgLmljb24tM2Qtc3RkIHsgd2lkdGg6IDIycHg7IGhlaWdodDogMjJweDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgbWFyZ2luLXJpZ2h0OiA1cHg7IGZpbHRlcjogZHJvcC1zaGFkb3coMCAycHggMnB4IHJnYmEoMCwwLDAsMC4xKSk7IH0KICAgICAgICAuaWNvbi0zZC1sZyB7IHdpZHRoOiAzMnB4OyBoZWlnaHQ6IDMycHg7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IH0KICAgICAgICAuaWNvbi0zZC14bCB7IHdpZHRoOiA2NHB4OyBoZWlnaHQ6IDY0cHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IH0KICAgICAgICAKICAgICAgICBAa2V5ZnJhbWVzIHNwaW4zZCB7IDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH0gMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH0gfQogICAgICAgIC5zcGluLTNkIHsgYW5pbWF0aW9uOiBzcGluM2QgMnMgbGluZWFyIGluZmluaXRlOyB9CgogICAgICAgICNjdXN0b21Nb2RhbCwgI2F2YXRhck1vZGFsQ29udGFpbmVyIHsgZGlzcGxheTogbm9uZTsgcG9zaXRpb246IGZpeGVkOyB6LWluZGV4OiAxMDAwMDsgbGVmdDogMDsgdG9wOiAwOyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDAsMCwwLDAuNik7IGJhY2tkcm9wLWZpbHRlcjogYmx1cig1cHgpOyBhbGlnbi1pdGVtczogY2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYW5pbWF0aW9uOiBmYWRlSW4gMC4zczsgfQogICAgICAgIC5jdXN0b20tbW9kYWwtY29udGVudCB7IGJhY2tncm91bmQ6IHdoaXRlOyBwYWRkaW5nOiAzMHB4IDI1cHg7IGJvcmRlci1yYWRpdXM6IDIwcHg7IHdpZHRoOiA4NSU7IG1heC13aWR0aDogMzUwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgYm94LXNoYWRvdzogMCAyMHB4IDUwcHggcmdiYSgwLDAsMCwwLjMpOyB0cmFuc2Zvcm06IHNjYWxlKDAuOSk7IGFuaW1hdGlvbjogcG9wVXAgMC4zcyBmb3J3YXJkczsgfQogICAgICAgIEBrZXlmcmFtZXMgcG9wVXAgeyB0byB7IHRyYW5zZm9ybTogc2NhbGUoMSk7IH0gfQogICAgICAgIC5tb2RhbC1pY29uLXRvcCB7IGZvbnQtc2l6ZTogNTBweDsgbWFyZ2luLWJvdHRvbTogMTVweDsgZGlzcGxheTogYmxvY2s7IH0KICAgICAgICAubW9kYWwtdGl0bGUgeyBmb250LXNpemU6IDE4cHg7IGZvbnQtd2VpZ2h0OiA3MDA7IGNvbG9yOiAjMmMzZTUwOyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9CiAgICAgICAgLm1vZGFsLW1zZyB7IGZvbnQtc2l6ZTogMTNweDsgY29sb3I6ICM1NTU7IG1hcmdpbi1ib3R0b206IDIwcHg7IGxpbmUtaGVpZ2h0OiAxLjU7IH0KICAgICAgICAubW9kYWwtYnRuLXJvdyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IH0KICAgICAgICAubW9kYWwtYnRuIHsgZmxleDogMTsgcGFkZGluZzogMTJweDsgYm9yZGVyLXJhZGl1czogMTBweDsgYm9yZGVyOiBub25lOyBmb250LXdlaWdodDogNjAwOyBjdXJzb3I6IHBvaW50ZXI7IGZvbnQtc2l6ZTogMTNweDsgfQogICAgICAgIC5idG4tb2sgeyBiYWNrZ3JvdW5kOiAjMWUzYzcyOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuYnRuLWNhbmNlbC1tb2RhbCB7IGJhY2tncm91bmQ6ICNlY2YwZjE7IGNvbG9yOiAjN2Y4YzhkOyB9CgogICAgICAgIC8qIFN0YXR1cyBCYXIgdW50dWsgT2ZmbGluZS9TeW5jICovCiAgICAgICAgI3N5bmNTdGF0dXNCYXIgeyBkaXNwbGF5OiBub25lOyBwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgbGVmdDogMDsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDEwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgei1pbmRleDogMTAwMDE7IGZvbnQtc2l6ZTogMTJweDsgZm9udC13ZWlnaHQ6IDYwMDsgY29sb3I6IHdoaXRlOyBib3gtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4yKTsgfQogICAgICAgIAogICAgICAgICNhdXRvTW9kZUluZGljYXRvciB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzZhMTFjYiwgIzI1NzVmYyk7IGNvbG9yOiB3aGl0ZTsgcGFkZGluZzogNXB4OyBmb250LXNpemU6IDEwcHg7IGZvbnQtd2VpZ2h0OiA3MDA7IHRleHQtYWxpZ246IGNlbnRlcjsgbWFyZ2luLWJvdHRvbTogMTVweDsgYm9yZGVyLXJhZGl1czogNXB4OyBib3gtc2hhZG93OiAwIDNweCA2cHggcmdiYSgwLDAsMCwwLjEpOyBkaXNwbGF5OiBub25lOyB9CgogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keSBvbmNvbnRleHRtZW51PSJyZXR1cm4gZmFsc2U7Ij4gCgogICAgPGRpdiBpZD0ic3luY1N0YXR1c0JhciI+PC9kaXY+CiAgICA8ZGl2IGlkPSJ3YXJuaW5nQm94Ij4gQU1BUkFOISBLRUxVQVIgWk9OLjxicj5BVVRPLUNIRUNLT1VUIERBTEFNIDxzcGFuIGlkPSJjb3VudERvd24iPjEwPC9zcGFuPlM8L2Rpdj4KCiAgICA8ZGl2IGlkPSJjdXN0b21Nb2RhbCI+CiAgICAgICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLWNvbnRlbnQiPgogICAgICAgICAgICA8c3BhbiBpZD0ibW9kYWxJY29uIiBjbGFzcz0ibW9kYWwtaWNvbi10b3AiPjwvc3Bhbj4KICAgICAgICAgICAgPGRpdiBpZD0ibW9kYWxUaXRsZSIgY2xhc3M9Im1vZGFsLXRpdGxlIj5UYWp1azwvZGl2PgogICAgICAgICAgICA8ZGl2IGlkPSJtb2RhbE1zZyIgY2xhc3M9Im1vZGFsLW1zZyI+TWVzZWogZGkgc2luaS4uLjwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1idG4tcm93IiBpZD0ibW9kYWxCdG5Sb3ciPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0ibW9kYWwtYnRuIGJ0bi1vayIgb25jbGljaz0iY2xvc2VDdXN0b21Nb2RhbCgpIj5GYWhhbTwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDwhLS0gTU9EQUwgUElMSUggQVZBVEFSIC0tPgogICAgPGRpdiBpZD0iYXZhdGFyTW9kYWxDb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9ImN1c3RvbS1tb2RhbC1jb250ZW50Ij4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtdGl0bGUiPlBJTElIIEFWQVRBUiBBTkRBPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLW1zZyI+UGlsaWggaWtvbiB5YW5nIHNlc3VhaSBkZW5nYW4gZ2F5YSBhbmRhLjwvZGl2PgogICAgICAgICAgICA8ZGl2IGlkPSJhdmF0YXJHcmlkIiBjbGFzcz0iYXZhdGFyLWdyaWQiPgogICAgICAgICAgICAgICAgPCEtLSBJQ09OUyBJTkpFQ1RFRCBWSUEgSlMgLS0+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1idG4tcm93IiBzdHlsZT0ibWFyZ2luLXRvcDoxNXB4OyI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJtb2RhbC1idG4gYnRuLWNhbmNlbC1tb2RhbCIgb25jbGljaz0iY2xvc2VBdmF0YXJNb2RhbCgpIj5UdXR1cDwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9ImltYWdlTW9kYWwiPgogICAgICAgIDxzcGFuIGNsYXNzPSJjbG9zZS1tb2RhbCIgb25jbGljaz0iY2xvc2VNb2RhbCgpIj4mdGltZXM7PC9zcGFuPgogICAgICAgIDxpbWcgY2xhc3M9Im1vZGFsLWNvbnRlbnQiIGlkPSJpbWdGdWxsIj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+CiAgICAgICAgCiAgICAgICAgPGRpdiBjbGFzcz0iaGVhZGVyLWJnIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0idG9wLWJhci1yb3ciPgogICAgICAgICAgICAgICAgPHNwYW4+CiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQyNTAvNDI1MDMyMC5wbmciIGNsYXNzPSJpY29uLTNkLW1pbmkiPiAKICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iZGF0ZURpc3BsYXkiPi0tLy0tLy0tPC9zcGFuPgogICAgICAgICAgICAgICAgPC9zcGFuPiAKICAgICAgICAgICAgICAgIDxzcGFuPnw8L3NwYW4+IAogICAgICAgICAgICAgICAgPHNwYW4+CiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzIwODgvMjA4ODYxNy5wbmciIGNsYXNzPSJpY29uLTNkLW1pbmkiPiAKICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iY2xvY2tEaXNwbGF5Ij4tLTotLTwvc3Bhbj4KICAgICAgICAgICAgICAgIDwvc3Bhbj4gCiAgICAgICAgICAgICAgICA8c3Bhbj58PC9zcGFuPiAKICAgICAgICAgICAgICAgIDxzcGFuPgogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MzU4LzQzNTg2NjcucG5nIiBjbGFzcz0iaWNvbi0zZC1taW5pIj4gCiAgICAgICAgICAgICAgICAgICAgPHNwYW4gaWQ9ImhpanJpRGlzcGxheSI+Li4uPC9zcGFuPgogICAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1haW4tdGl0bGUtYmxvY2siPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGl0bGUtc21hbGwiPlNJU1RFTSBQRU5HVVJVU0FOPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0aXRsZS1iaWciPkUtSEFESVI8L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRpdGxlLWJpZyI+U0sgU0VMQU1BIChLKTwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPGRpdiBjbGFzcz0iY29udGVudC1wYWRkaW5nIj4KICAgICAgICAgICAgPGRpdiBpZD0iYXV0b01vZGVJbmRpY2F0b3IiPk1PREUgQVVUTzwvZGl2PgogICAgICAgICAgICAKICAgICAgICAgICAgPGRpdiBpZD0ic3RhdHVzVGV4dCI+CiAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvOTA3Ny85MDc3OTc1LnBuZyIgY2xhc3M9Imljb24tM2QtbWluaSBzcGluLTNkIj4gCiAgICAgICAgICAgICAgICBNZW5jYXJpIEdQUy4uLgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9ImRhc2hib2FyZFBhbmVsIj4KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJ1c2VyLXdlbGNvbWUiPgogICAgICAgICAgICAgICAgICAgIDxpbWcgaWQ9InVzZXJBdmF0YXJEYXNoIiBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQxNDAvNDE0MDA0Ny5wbmciIGNsYXNzPSJpY29uLTNkLWxnIj4gCiAgICAgICAgICAgICAgICAgICAgSGFpLCA8c3BhbiBpZD0ic2Vzc2lvbk5hbWUiPi0tPC9zcGFuPgogICAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibG9ja2VkLW1zZyI+QXV0byBDaGVjay1JbiBCZXJqYXlhLjwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJkYXNoYm9hcmRTY2hlZHVsZSIgc3R5bGU9ImZvbnQtc2l6ZToxMnB4OyBjb2xvcjojMmMzZTUwOyBiYWNrZ3JvdW5kOiNmZmYzY2Q7IHBhZGRpbmc6MTBweDsgYm9yZGVyLXJhZGl1czo4cHg7IG1hcmdpbi1ib3R0b206MTVweDsgZGlzcGxheTpub25lOyBib3JkZXI6IDFweCBzb2xpZCAjZmZlZWJhOyI+CiAgICAgICAgICAgICAgICAgICAgV2FrdHUgUHVsYW5nIFJhc21pOiA8c3BhbiBpZD0idXNlckV4aXRUaW1lIiBzdHlsZT0iZm9udC13ZWlnaHQ6Ym9sZDsiPi0tOi0tPC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPHAgaWQ9ImR5bmFtaWNTdGF0dXMiIHN0eWxlPSJtYXJnaW46MCAwIDE1cHggMDsgZm9udC1zaXplOjExcHg7IGNvbG9yOiMyN2FlNjA7IGZvbnQtd2VpZ2h0OjcwMDsgbGV0dGVyLXNwYWNpbmc6MC41cHg7IHRleHQtdHJhbnNmb3JtOnVwcGVyY2FzZTsiPlNUQVRVUzogU0VEQU5HIEJFUlRVR0FTPC9wPgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8IS0tIEhJRERFTiBBTEFTQU4gSU5QVVQgRk9SIEFVVE8gTU9ERSAtLT4KICAgICAgICAgICAgICAgIDx0ZXh0YXJlYSBpZD0iYWxhc2FuS2VsdWFyIiBzdHlsZT0iZGlzcGxheTpub25lOyIgcGxhY2Vob2xkZXI9Ik1vaG9uIG55YXRha2FuIHNlYmFiIHB1bGFuZyBhd2FsIHVudHVrIG1ha2x1bWFuIHBlbnRhZGJpci4uLiI+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuS2VsdWFyIiBjbGFzcz0iYnRuIGJ0bi1rZWx1YXIiIG9uY2xpY2s9ImhhbnRhcktlbHVhcihmYWxzZSkiPgogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8zNTgwLzM1ODAxNTQucG5nIiBjbGFzcz0iaWNvbi0zZC1zdGQiPiBEQUZUQVIgS0VMVUFSIChNQU5VQUwpCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogMjBweDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7IHBhZGRpbmctdG9wOiAxNXB4OyI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1wZWxhd2F0IiBvbmNsaWNrPSJzaG93UGVsYXdhdEZvcm0oKSIgc3R5bGU9ImZvbnQtc2l6ZToxM3B4OyBwYWRkaW5nOiAxMnB4OyI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8zMTM1LzMxMzU3NjgucG5nIiBjbGFzcz0iaWNvbi0zZC1zdGQiPiBCQU5UVSBEQUZUQVIgUEVMQVdBVAogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBpZD0iZGVmYXVsdEZvcm0iPgogICAgICAgICAgICAgICAgPGRpdiBpZD0ibG9hZGluZ0NvbmZpZyI+CiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzE4OS8xODk3OTIucG5nIiBjbGFzcz0iaWNvbi0zZC1taW5pIHNwaW4tM2QiPiBTZWRhbmcgbWVueWVtYWsgamFkdWFsIHRlcmtpbmkuLi4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBpZD0ic2NoZWR1bGVJbmZvIj48L2Rpdj4KICAgICAgICAgICAgICAgIDxzZWxlY3QgaWQ9ImthdGVnb3JpIiBvbmNoYW5nZT0iY2hlY2tLYXRlZ29yaSgpOyB1cGRhdGVTY2hlZHVsZUluZm8oKTsiPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IiIgZGlzYWJsZWQgc2VsZWN0ZWQ+LS0gUElMSUggS0FURUdPUkkgLS08L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJHVVJVIj5HVVJVPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQUtQIj5BS1A8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJLRUJFUlNJSEFOIj5LRUJFUlNJSEFOPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iUEVMQVdBVCI+UEVMQVdBVCAoQVdBTSk8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8IS0tIElOUFVUIE5BTUEgV0lUSCBMT0NLICYgQVZBVEFSIEJVVFRPTlMgLS0+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJpbnB1dC1ncm91cCI+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJuYW1hIiBwbGFjZWhvbGRlcj0iTkFNQSBQRU5VSCAoSFVSVUYgQkVTQVIpIiBzdHlsZT0idGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlIj4KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8IS0tIEFWQVRBUiBCVVRUT04gLS0+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYXZhdGFyQnRuIiBjbGFzcz0ibG9jay1idG4gYXZhdGFyLWJ0biIgb25jbGljaz0ib3BlbkF2YXRhck1vZGFsKCkiIHRpdGxlPSJQaWxpaCBBdmF0YXIiPgogICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGlkPSJjdXJyZW50QXZhdGFyTWluaSIgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MTQwLzQxNDAwNDgucG5nIiBjbGFzcz0iaWNvbi0zZC1taW5pIj4KICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj4KCiAgICAgICAgICAgICAgICAgICAgPCEtLSBMT0NLIEJVVFRPTiAtLT4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJsb2NrQnRuIiBjbGFzcz0ibG9jay1idG4iIG9uY2xpY2s9InRvZ2dsZUxvY2tOYW1lKCkiIHRpdGxlPSJLdW5jaSBOYW1hIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzI4ODkvMjg4OTY3Ni5wbmciIGNsYXNzPSJpY29uLTNkLW1pbmkiIGlkPSJsb2NrSWNvbkltZyIgc3R5bGU9ImZpbHRlcjpvcGFjaXR5KDAuNCkiPgogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwhLS0gSElEREVOIEFMQVNBTiBJTlBVVCBGT1IgQVVUTyBNT0RFIC0tPgogICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJhbGFzYW5NYXN1ayIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiIHBsYWNlaG9sZGVyPSJNYWFmLCBhbmRhIGxld2F0IHNlZGlraXQuIE1vaG9uIG55YXRha2FuIHNlYmFiOiI+PC90ZXh0YXJlYT4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjEwcHg7IGNvbG9yOiNlNjdlMjI7IG1hcmdpbi1ib3R0b206MTBweDsiPlNpbGEgdGVrYW4gJ0tVTkNJJyBOYW1hICYgS2F0ZWdvcmkgPC9kaXY+CgogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuTWFpblN1Ym1pdCIgY2xhc3M9ImJ0biIgb25jbGljaz0iaGFudGFyTWFzdWsoZmFsc2UpIj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvOTQwMi85NDAyMzQyLnBuZyIgY2xhc3M9Imljb24tM2Qtc3RkIj4gREFGVEFSIE1BU1VLIChNQU5VQUwpCiAgICAgICAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGlkPSJwZWxhd2F0UGFuZWwiPgogICAgICAgICAgICAgICAgPGgzIHN0eWxlPSJjb2xvcjojMjdhZTYwOyBtYXJnaW46MCAwIDVweCAwOyBkaXNwbGF5OmZsZXg7IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgZ2FwOjVweDsiPgogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8zNjg3LzM2ODc0MTYucG5nIiBjbGFzcz0iaWNvbi0zZC1sZyI+IE1PRCBQRUxBV0FUCiAgICAgICAgICAgICAgICA8L2gzPgogICAgICAgICAgICAgICAgPHAgc3R5bGU9ImZvbnQtc2l6ZToxMXB4OyBjb2xvcjojNjY2OyBtYXJnaW4tYm90dG9tOjE1cHg7Ij5TaWxhIGFtYmlsIGdhbWJhciAmIGlzaSBuYW1hIHBlbGF3YXQuPC9wPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJuYW1hUGVsYXdhdElucHV0IiBwbGFjZWhvbGRlcj0iTkFNQSBQRU5VSCBQRUxBV0FUIiBzdHlsZT0idGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlOyI+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9Im1hcmdpbjogMTVweCAwOyI+CiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGNsYXNzPSJnaWFudC1jYW0tYnRuIGdpYW50LXB1bHNlIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzM2ODcvMzY4NzQxNi5wbmciIGNsYXNzPSJnaWFudC1jYW0taWNvbiI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJnaWFudC1jYW0tdGV4dCI+U05BUCBGT1RPPC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iZmlsZSIgYWNjZXB0PSJpbWFnZS8qIiBjYXB0dXJlPSJlbnZpcm9ubWVudCIgc3R5bGU9ImRpc3BsYXk6bm9uZSIgb25jaGFuZ2U9InByb2Nlc3NJbWFnZSh0aGlzKSI+CiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxpbWcgaWQ9InByZXZpZXdJbWciPgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9ImJhc2U2NEZvdG8iPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0iYnRuUGVsYXdhdFN1Ym1pdCIgY2xhc3M9ImJ0biBidG4tcGVsYXdhdCIgb25jbGljaz0iaGFudGFyUGVsYXdhdCgpIj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvOTQwMi85NDAyMzQyLnBuZyIgY2xhc3M9Imljb24tM2Qtc3RkIj4gSEFOVEFSIERBVEEKICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz0iYnRuIGJ0bi1jYW5jZWwiIG9uY2xpY2s9ImNhbmNlbFBlbGF3YXQoKSI+QkFUQUw8L2J1dHRvbj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaXN0LWhlYWRlciI+CiAgICAgICAgICAgICAgICA8c3Bhbj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvOTQyLzk0Mjc5OS5wbmciIGNsYXNzPSJpY29uLTNkLXN0ZCI+IAogICAgICAgICAgICAgICAgICAgIFJla29kIEhhcmkgSW5pICg8c3BhbiBpZD0iY291bnQiPjA8L3NwYW4+KQogICAgICAgICAgICAgICAgPC9zcGFuPgogICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJsb2FkTGlzdCgpIiBzdHlsZT0iYm9yZGVyOm5vbmU7IGJhY2tncm91bmQ6bm9uZTsgY3Vyc29yOnBvaW50ZXI7Ij4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMzAzMS8zMDMxNzE4LnBuZyIgY2xhc3M9Imljb24tM2Qtc3RkIj4KICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPGRpdiBpZD0ibGlzdENvbnRhaW5lciIgY2xhc3M9Imxpc3QtY29udGFpbmVyIj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9InBhZGRpbmc6MjBweDsgY29sb3I6Izk5OTsgZm9udC1zaXplOjEycHg7Ij5NZW11YXRrYW4gZGF0YS4uLjwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgCiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCjxzY3JpcHQ+CiAgICBsZXQgamFtQ29uZmlnID0gbnVsbDsgCiAgICBsZXQgaXNJblpvbmUgPSBmYWxzZTsgCiAgICBsZXQgY3VycmVudERpc3QgPSAwOyAKICAgIGxldCBsYXN0TGF0ID0gMCwgbGFzdExuZyA9IDA7CiAgICBsZXQgY3VycmVudExpc3QgPSBbXTsgCiAgICBsZXQgaXNTdWJtaXR0aW5nID0gZmFsc2U7IAogICAgbGV0IGhhc05vdGlmaWVkV2FrZSA9IGZhbHNlOyAvLyBGbGFnIHVudHVrIG5vdGlmaWthc2kgc2VrYWxpIHNlaGFyaQogICAgCiAgICAvLyBWQVJJQUJMRVMgVU5UVUsgQVVUTy1MT0dJQyAmIEFOVEktU1BBTQogICAgbGV0IGluWm9uZVN0YXJ0ID0gMDsgLy8gVGltZXN0YW1wIG1hc3VrIGthd2FzYW4KICAgIGxldCBvdXRab25lU3RhcnQgPSAwOyAvLyBUaW1lc3RhbXAga2VsdWFyIGthd2FzYW4KICAgIGxldCB3YWtlTG9jayA9IG51bGw7CgogICAgLy8gVkFSSUFCTEVTIE5PVElGSUtBU0kgU0lUVUFTSQogICAgbGV0IGhhc05vdGlmaWVkRW50cnkgPSBmYWxzZTsKICAgIGxldCBoYXNOb3RpZmllZEV4aXQgPSBmYWxzZTsKCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vICAgICAgIExPR0lLIE1PRCBPRkZMSU5FICYgU1lOQyBQSU5UQVIKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgCiAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikgewogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gewogICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3Rlcignc3cuanMnKS50aGVuKHJlZyA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU1cgQmVyamF5YTonLCByZWcuc2NvcGUpOwogICAgICAgICAgICAgICAgaWYgKCdTeW5jTWFuYWdlcicgaW4gd2luZG93KSB7CiAgICAgICAgICAgICAgICAgICAgcmVnLnN5bmMucmVnaXN0ZXIoJ3N5bmMtYXR0ZW5kYW5jZScpLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZygiU3luYyBiZyBnYWdhbCIsIGVycikpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coJ1NXIEdhZ2FsOicsIGVycikpOwogICAgICAgIH0pOwogICAgfQoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvbmxpbmUnLCAoKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coIkludGVybmV0IGRpa2VzYW4hIE1lbXVsYWthbiBzaW5rcm9uaXNhc2kuLi4iKTsKICAgICAgICBzaG93U3luY0JhcigiSW50ZXJuZXQgS2VtYmFsaSBQdWxpaC4gTWVueWVnZXJha2thbiBkYXRhLi4uIiwgIiMyZWNjNzEiKTsKICAgICAgICBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvciAmJiAnU3luY01hbmFnZXInIGluIHdpbmRvdykgewogICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeS50aGVuKHN3ID0+IHsgcmV0dXJuIHN3LnN5bmMucmVnaXN0ZXIoJ3N5bmMtYXR0ZW5kYW5jZScpOyB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBmZXRjaCgnL3N3LmpzJyk7IAogICAgICAgIH0KICAgICAgICBzeW5jT2ZmbGluZURhdGEoKTsKICAgIH0pOwoKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvZmZsaW5lJywgKCkgPT4gewogICAgICAgIHNob3dTeW5jQmFyKCJNT0QgT0ZGTElORTogRGF0YSBha2FuIGRpc2ltcGFuIGRhbGFtIHRlbGVmb24uIiwgIiNlNzRjM2MiKTsKICAgIH0pOwoKICAgIGZ1bmN0aW9uIHNob3dTeW5jQmFyKG1zZywgY29sb3IpIHsKICAgICAgICBjb25zdCBiYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3luY1N0YXR1c0JhcicpOwogICAgICAgIGJhci5pbm5lclRleHQgPSBtc2c7CiAgICAgICAgYmFyLnN0eWxlLmJhY2tncm91bmQgPSBjb2xvcjsKICAgICAgICBiYXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgaWYoY29sb3IgPT09ICIjMmVjYzcxIikgc2V0VGltZW91dCgoKSA9PiB7IGJhci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9LCA0MDAwKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzeW5jT2ZmbGluZURhdGEoKSB7CiAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSByZXR1cm47CiAgICAgICAgbGV0IG9mZmxpbmVRdWV1ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9vZmZsaW5lX3F1ZXVlJykgfHwgIltdIik7CiAgICAgICAgaWYgKG9mZmxpbmVRdWV1ZS5sZW5ndGggPT09IDApIHJldHVybjsgCgogICAgICAgIHNob3dTeW5jQmFyKCJNZW5naGFudGFyICIgKyBvZmZsaW5lUXVldWUubGVuZ3RoICsgIiBkYXRhIHRlcnRhbmdndWguLi4iLCAiIzM0OThkYiIpOwogICAgICAgIGxldCBpdGVtVG9TeW5jID0gb2ZmbGluZVF1ZXVlWzBdOwogICAgICAgIGlmICghaXRlbVRvU3luYy5rYXRlZ29yaSB8fCBpdGVtVG9TeW5jLmthdGVnb3JpID09PSAidW5kZWZpbmVkIiB8fCBpdGVtVG9TeW5jLmthdGVnb3JpID09PSBudWxsKSB7CiAgICAgICAgICAgIGl0ZW1Ub1N5bmMua2F0ZWdvcmkgPSAiUEVMQVdBVCI7CiAgICAgICAgfQoKICAgICAgICBmZXRjaChBUElfVVJMLCB7IG1ldGhvZDogIlBPU1QiLCBib2R5OiBKU09OLnN0cmluZ2lmeShpdGVtVG9TeW5jKSB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSkKICAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgICAgICBpZiAocmVzLnJlc3VsdCA9PT0gInN1Y2Nlc3MiKSB7CiAgICAgICAgICAgICAgICBvZmZsaW5lUXVldWUuc2hpZnQoKTsgCiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZWhhZGlyX29mZmxpbmVfcXVldWUnLCBKU09OLnN0cmluZ2lmeShvZmZsaW5lUXVldWUpKTsKICAgICAgICAgICAgICAgIGlmIChvZmZsaW5lUXVldWUubGVuZ3RoID4gMCkgeyBzeW5jT2ZmbGluZURhdGEoKTsgfSAKICAgICAgICAgICAgICAgIGVsc2UgeyBzaG93U3luY0JhcigiPyBTZW11YSBkYXRhIG9mZmxpbmUgdGVsYWggYmVyamF5YSBkaWhhbnRhciEiLCAiIzI3YWU2MCIpOyBsb2FkTGlzdCgpOyB9CiAgICAgICAgICAgIH0gZWxzZSB7IHNob3dTeW5jQmFyKCJSYWxhdCBTZXJ2ZXI6ICIgKyByZXMubXNnLCAiI2MwMzkyYiIpOyB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZXJyID0+IHsgc2hvd1N5bmNCYXIoIlJhbGF0IE5ldHdvcmsuIEFrYW4gY3ViYSBzZWJlbnRhciBsYWdpLiIsICIjZTY3ZTIyIik7IH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHNob3dNb2Rlcm5BbGVydCh0aXRsZSwgbXNnLCB0eXBlLCBjYWxsYmFjaykgewogICAgICAgIC8vIE92ZXJyaWRlIGZvciBBdXRvIE1vZGU6IERvbid0IGJsb2NrIGlmIEF1dG8KICAgICAgICBsZXQgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VzdG9tTW9kYWwnKTsKICAgICAgICBsZXQgbVRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsVGl0bGUnKTsKICAgICAgICBsZXQgbU1zZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbE1zZycpOwogICAgICAgIGxldCBtSWNvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbEljb24nKTsKICAgICAgICBsZXQgbUJ0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWxCdG5Sb3cnKTsKCiAgICAgICAgbVRpdGxlLmlubmVyVGV4dCA9IHRpdGxlOwogICAgICAgIG1Nc2cuaW5uZXJIVE1MID0gbXNnOyAKICAgICAgICAKICAgICAgICBpZih0eXBlID09PSAnZXJyb3InKSB7CiAgICAgICAgICAgIG1JY29uLmlubmVyVGV4dCA9ICIiOyBtVGl0bGUuc3R5bGUuY29sb3IgPSAiI2MwMzkyYiI7CiAgICAgICAgICAgIG1CdG5zLmlubmVySFRNTCA9IGA8YnV0dG9uIGNsYXNzPSJtb2RhbC1idG4gYnRuLW9rIiBvbmNsaWNrPSJjbG9zZUN1c3RvbU1vZGFsKCkiPkZhaGFtPC9idXR0b24+YDsKICAgICAgICB9IGVsc2UgaWYodHlwZSA9PT0gJ3N1Y2Nlc3MnKSB7CiAgICAgICAgICAgIG1JY29uLmlubmVyVGV4dCA9ICI/IjsgbVRpdGxlLnN0eWxlLmNvbG9yID0gIiMyN2FlNjAiOwogICAgICAgICAgICBtQnRucy5pbm5lckhUTUwgPSBgPGJ1dHRvbiBjbGFzcz0ibW9kYWwtYnRuIGJ0bi1vayIgb25jbGljaz0iY2xvc2VDdXN0b21Nb2RhbCgpIj5UZXJiYWlrPC9idXR0b24+YDsKICAgICAgICB9IGVsc2UgaWYodHlwZSA9PT0gJ2luZm8nKSB7CiAgICAgICAgICAgIG1JY29uLmlubmVyVGV4dCA9ICIiOyBtVGl0bGUuc3R5bGUuY29sb3IgPSAiIzI5ODBiOSI7CiAgICAgICAgICAgIG1CdG5zLmlubmVySFRNTCA9IGA8YnV0dG9uIGNsYXNzPSJtb2RhbC1idG4gYnRuLW9rIiBvbmNsaWNrPSJjbG9zZUN1c3RvbU1vZGFsKCkiPk9LPC9idXR0b24+YDsKICAgICAgICB9IGVsc2UgaWYodHlwZSA9PT0gJ2NvbmZpcm0nKSB7CiAgICAgICAgICAgIG1JY29uLmlubmVyVGV4dCA9ICIiOyBtVGl0bGUuc3R5bGUuY29sb3IgPSAiIzFlM2M3MiI7CiAgICAgICAgICAgIHdpbmRvdy50ZW1wQ2FsbGJhY2sgPSBjYWxsYmFjazsKICAgICAgICAgICAgbUJ0bnMuaW5uZXJIVE1MID0gYDxidXR0b24gY2xhc3M9Im1vZGFsLWJ0biBidG4tY2FuY2VsLW1vZGFsIiBvbmNsaWNrPSJjbG9zZUN1c3RvbU1vZGFsKCkiPkJhdGFsPC9idXR0b24+PGJ1dHRvbiBjbGFzcz0ibW9kYWwtYnRuIGJ0bi1vayIgb25jbGljaz0iY29uZmlybUFjdGlvbigpIj5UZXJ1c2thbjwvYnV0dG9uPmA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbUljb24uaW5uZXJUZXh0ID0gIiI7IG1UaXRsZS5zdHlsZS5jb2xvciA9ICIjMmMzZTUwIjsKICAgICAgICAgICAgbUJ0bnMuaW5uZXJIVE1MID0gYDxidXR0b24gY2xhc3M9Im1vZGFsLWJ0biBidG4tb2siIG9uY2xpY2s9ImNsb3NlQ3VzdG9tTW9kYWwoKSI+VHV0dXA8L2J1dHRvbj5gOwogICAgICAgIH0KICAgICAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gImZsZXgiOwogICAgfQoKICAgIGZ1bmN0aW9uIGNsb3NlQ3VzdG9tTW9kYWwoKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21Nb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7IH0KICAgIGZ1bmN0aW9uIGNvbmZpcm1BY3Rpb24oKSB7IGNsb3NlQ3VzdG9tTW9kYWwoKTsgaWYod2luZG93LnRlbXBDYWxsYmFjaykgd2luZG93LnRlbXBDYWxsYmFjaygpOyB9CgogICAgZnVuY3Rpb24gc2VuZE5vdGlmaWNhdGlvbih0aXRsZSwgYm9keSwgdGFnKSB7CiAgICAgICAgaWYoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gPT09ICJncmFudGVkIikgewogICAgICAgICAgICBpZignc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7CiAgICAgICAgICAgICAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeS50aGVuKHJlZyA9PiB7CiAgICAgICAgICAgICAgICAgICAgcmVnLnNob3dOb3RpZmljYXRpb24odGl0bGUsIHsKICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogYm9keSwKICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4Lzk0MDIvOTQwMjM0Mi5wbmciLAogICAgICAgICAgICAgICAgICAgICAgICB0YWc6IHRhZywKICAgICAgICAgICAgICAgICAgICAgICAgcmVub3RpZnk6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHZpYnJhdGU6IFsyMDAsIDEwMCwgMjAwXSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyB1cmw6IGxvY2F0aW9uLmhyZWYgfSAKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbmV3IE5vdGlmaWNhdGlvbih0aXRsZSwgeyBib2R5OiBib2R5LCB0YWc6IHRhZyB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgc3RhcnRDbG9jaygpOwogICAgICAgIHN0YXJ0UmFkYXIoKTsKICAgICAgICBmZXRjaENvbmZpZygpOyAKICAgICAgICBnZXRIaWpyaURhdGUoKTsKICAgICAgICBpbml0TG9ja05hbWUoKTsgCiAgICAgICAgaW5pdEF2YXRhcigpOyAvLyBJbml0IGF2YXRhcgogICAgICAgIGluaXRCYWNrZ3JvdW5kU2VydmljZSgpOyAvLyBJbml0aWFsaXplIFdha2VMb2NrICYgUGVybWlzc2lvbgogICAgICAgIAogICAgICAgIGlmKCFuYXZpZ2F0b3Iub25MaW5lKSBzaG93U3luY0JhcigiTU9EIE9GRkxJTkU6IERhdGEgYWthbiBkaXNpbXBhbiBkYWxhbSB0ZWxlZm9uLiIsICIjZTc0YzNjIik7CiAgICAgICAgZWxzZSBzeW5jT2ZmbGluZURhdGEoKTsgCgogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICBjaGVja1Nlc3Npb24oKTsKICAgICAgICAgICAgc2V0SW50ZXJ2YWwodXBkYXRlRGFzaGJvYXJkSW5mbywgNTAwMCk7IAogICAgICAgIH0sIDIwMDApOwoKICAgICAgICBsb2FkTGlzdCgpOwogICAgICAgIHNldEludGVydmFsKHVwZGF0ZUxpdmVUaW1lcnMsIDEwMDApOwogICAgICAgIAogICAgICAgIC8vIC0tLSBVQkFIIFNVQUkgU1VSR0lLQUw6IFdFQiBXT1JLRVIgVU5UVUsgRUxBSyBUSFJPVFRMSU5HIERJIExBVEFSIEJFTEFLQU5HIC0tLQogICAgICAgIC8vIE1lbmdnYW50aWthbiBzZXRJbnRlcnZhbCBiaWFzYSB5YW5nIGFrYW4gJ2Jla3UnIGppa2EgcGhvbmUgZGlrdW5jaQogICAgICAgIGNvbnN0IHdvcmtlckJsb2IgPSBuZXcgQmxvYihbInNlbGYub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7IHNldEludGVydmFsKGZ1bmN0aW9uKCl7IHNlbGYucG9zdE1lc3NhZ2UoJ3RpY2snKTsgfSwgMTAwMCk7IH0iXSwgeyB0eXBlOiAidGV4dC9qYXZhc2NyaXB0IiB9KTsKICAgICAgICBjb25zdCB3b3JrZXIgPSBuZXcgV29ya2VyKFVSTC5jcmVhdGVPYmplY3RVUkwod29ya2VyQmxvYikpOwogICAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7IG1vbml0b3JBdXRvTG9naWMoKTsgfTsKICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoInN0YXJ0Iik7CiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgfTsKCiAgICAvLyAtLS0gSU5JVCBCQUNLR1JPVU5EIFNFUlZJQ0UgKFdBS0VMT0NLICYgUEVSTUlTU0lPTlMpIC0tLQogICAgYXN5bmMgZnVuY3Rpb24gaW5pdEJhY2tncm91bmRTZXJ2aWNlKCkgewogICAgICAgIC8vIDEuIFJlcXVlc3QgTm90aWZpY2F0aW9uIChVVEFNQTogVW50dWsgJ0tlanV0a2FuJyBBcHApCiAgICAgICAgaWYgKCJOb3RpZmljYXRpb24iIGluIHdpbmRvdykgewogICAgICAgICAgICAgaWYoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gIT09ICJncmFudGVkIikgewogICAgICAgICAgICAgICAgICBhd2FpdCBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTsKICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gMi4gUmVxdWVzdCBXYWtlTG9jayAoS2VlcCBMb2dpYyBBbGl2ZSkKICAgICAgICBpZiAoJ3dha2VMb2NrJyBpbiBuYXZpZ2F0b3IpIHsKICAgICAgICAgICAgY29uc3QgcmVxdWVzdExvY2sgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIHdha2VMb2NrID0gYXdhaXQgbmF2aWdhdG9yLndha2VMb2NrLnJlcXVlc3QoJ3NjcmVlbicpOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdXRvTW9kZUluZGljYXRvcicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgICAgICAgICAgICAgIHdha2VMb2NrLmFkZEV2ZW50TGlzdGVuZXIoJ3JlbGVhc2UnLCAoKSA9PiB7IGNvbnNvbGUubG9nKCdXYWtlIExvY2sgUmVsZWFzZWQnKTsgfSk7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsgY29uc29sZS5lcnJvcihgJHtlcnIubmFtZX0sICR7ZXJyLm1lc3NhZ2V9YCk7IH0KICAgICAgICAgICAgfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGF3YWl0IHJlcXVlc3RMb2NrKCk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBSZS1hY3F1aXJlIGxvY2sgb24gdmlzaWJpbGl0eSBjaGFuZ2UgKEJpbGEgdXNlciBtaW5pbWl6ZS9tYXhpbWl6ZSkKICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgIGlmICh3YWtlTG9jayAhPT0gbnVsbCAmJiBkb2N1bWVudC52aXNpYmlsaXR5U3RhdGUgPT09ICd2aXNpYmxlJykgewogICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlcXVlc3RMb2NrKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAvLyBDdWJhIHBha3NhIGxvY2sgZGFsYW0gYmFja2dyb3VuZCAoYmVyZ2FudHVuZyBwYWRhIE9TKQogICAgICAgICAgICAgICAgICAgICBhd2FpdCByZXF1ZXN0TG9jaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9CgogICAgLy8gLS0tIEFWQVRBUiBMT0dJQyAoMTAgT0ZGSUNFIFRIRU1FRCkgLS0tCiAgICBjb25zdCBBVkFUQVJTID0gWwogICAgICAgICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MTQwLzQxNDAwNDgucG5nIiwgLy8gTWFsZSBPZmZpY2UKICAgICAgICAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDE0MC80MTQwMDQ3LnBuZyIsIC8vIEZlbWFsZSBPZmZpY2UKICAgICAgICAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDE0MC80MTQwMDM3LnBuZyIsIC8vIE1hbGUgVGllCiAgICAgICAgImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQxNDAvNDE0MDA1MS5wbmciLCAvLyBGZW1hbGUgQmxhemVyCiAgICAgICAgImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQxNDAvNDE0MDA0MC5wbmciLCAvLyBNYWxlIEdsYXNzZXMKICAgICAgICAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDE0MC80MTQwMDYxLnBuZyIsIC8vIEZlbWFsZSBTY2FyZgogICAgICAgICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MTQwLzQxNDAwNTIucG5nIiwgLy8gTWFsZSBNYW5hZ2VyCiAgICAgICAgImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQxNDAvNDE0MDA0Mi5wbmciLCAvLyBGZW1hbGUgTWFuYWdlcgogICAgICAgICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MTQwLzQxNDAwNDYucG5nIiwgLy8gTWFsZSBZb3VuZwogICAgICAgICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MTQwLzQxNDAwNTcucG5nIiAgLy8gRmVtYWxlIEdsYXNzZXMKICAgIF07CgogICAgZnVuY3Rpb24gaW5pdEF2YXRhcigpIHsKICAgICAgICBsZXQgc2F2ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX3VzZXJfYXZhdGFyJyk7CiAgICAgICAgaWYoc2F2ZWQpIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50QXZhdGFyTWluaScpLnNyYyA9IHNhdmVkOwogICAgICAgIC8vIEdlbmVyYXRlIEdyaWQKICAgICAgICBsZXQgZ3JpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmF0YXJHcmlkJyk7CiAgICAgICAgZ3JpZC5pbm5lckhUTUwgPSAiIjsKICAgICAgICBBVkFUQVJTLmZvckVhY2godXJsID0+IHsKICAgICAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgICAgICBkaXYuY2xhc3NOYW1lID0gImF2YXRhci1vcHRpb24iOwogICAgICAgICAgICBpZih1cmwgPT09IHNhdmVkKSBkaXYuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTsKICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGA8aW1nIHNyYz0iJHt1cmx9Ij5gOwogICAgICAgICAgICBkaXYub25jbGljayA9ICgpID0+IHNlbGVjdEF2YXRhcih1cmwpOwogICAgICAgICAgICBncmlkLmFwcGVuZENoaWxkKGRpdik7CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gb3BlbkF2YXRhck1vZGFsKCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXZhdGFyTW9kYWxDb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyB9CiAgICBmdW5jdGlvbiBjbG9zZUF2YXRhck1vZGFsKCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYXZhdGFyTW9kYWxDb250YWluZXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB9CgogICAgZnVuY3Rpb24gc2VsZWN0QXZhdGFyKHVybCkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlaGFkaXJfdXNlcl9hdmF0YXInLCB1cmwpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXJyZW50QXZhdGFyTWluaScpLnNyYyA9IHVybDsKICAgICAgICBpbml0QXZhdGFyKCk7IC8vIFJlZnJlc2ggZ3JpZCBzdGF0ZQogICAgICAgIGNsb3NlQXZhdGFyTW9kYWwoKTsKICAgIH0KCiAgICAvLyAtLS0gTE9HSUsgTE9DSyBOQU1BICYgQVVUTyBTWU5DIC0tLQogICAgZnVuY3Rpb24gaW5pdExvY2tOYW1lKCkgewogICAgICAgIGxldCBsb2NrZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX2xvY2tlZF9uYW1lJyk7CiAgICAgICAgbGV0IGxvY2tlZEthdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfbG9ja2VkX2thdCcpOyAvLyBMb2FkIGNhdGVnb3J5IHRvbwogICAgICAgIGxldCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1hJyk7CiAgICAgICAgbGV0IHNlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrYXRlZ29yaScpOwogICAgICAgIGxldCBidG5JbWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9ja0ljb25JbWcnKTsKICAgICAgICBsZXQgYnRuTG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NrQnRuJyk7CiAgICAgICAgbGV0IGF2YXRhckJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmF0YXJCdG4nKTsgLy8gQXZhdGFyIEJ1dHRvbgogICAgICAgIAogICAgICAgIC8vIC0tLSBNT0QgRURJVDogU1RSSUNUIFZBTElEQVRJT04gLS0tCiAgICAgICAgLy8gSmlrYSBzYWxhaCBzYXR1IHRpYWRhICh0aWRhayBsZW5na2FwKSwgYW5nZ2FwIGRhdGEgcm9zYWsgLT4gQnVrYSBLdW5jaQogICAgICAgIGlmICghbG9ja2VkIHx8ICFsb2NrZWRLYXQpIHsKICAgICAgICAgICAgaWYobG9ja2VkIHx8IGxvY2tlZEthdCkgeyAvLyBKaWthIHNlcGFyYSBhZGEKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdlaGFkaXJfbG9ja2VkX25hbWUnKTsKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdlaGFkaXJfbG9ja2VkX2thdCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxvY2tlZCA9IG51bGw7IAogICAgICAgICAgICBsb2NrZWRLYXQgPSBudWxsOwogICAgICAgIH0KICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKICAgICAgICBpZiAobG9ja2VkICYmIGxvY2tlZEthdCkgewogICAgICAgICAgICBpbnB1dC52YWx1ZSA9IGxvY2tlZDsKICAgICAgICAgICAgc2VsLnZhbHVlID0gbG9ja2VkS2F0OwogICAgICAgICAgICBpbnB1dC5yZWFkT25seSA9IHRydWU7CiAgICAgICAgICAgIHNlbC5kaXNhYmxlZCA9IHRydWU7IC8vIExvY2sgY2F0ZWdvcnkKICAgICAgICAgICAgYXZhdGFyQnRuLmRpc2FibGVkID0gdHJ1ZTsgLy8gTE9DSyBBVkFUQVIgU0VMRUNUSU9OCiAgICAgICAgICAgIGlucHV0LnN0eWxlLmJhY2tncm91bmQgPSAiI2ZmZjhlMSI7IAogICAgICAgICAgICAvLyBVUERBVEVEIExPQ0sgSUNPTiAmIFlFTExPVyBCVE4KICAgICAgICAgICAgYnRuSW1nLnNyYyA9ICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8yOTEzLzI5MTMxMzMucG5nIjsgCiAgICAgICAgICAgIGJ0bkltZy5zdHlsZS5maWx0ZXIgPSAib3BhY2l0eSgxKSI7CiAgICAgICAgICAgIGJ0bkxvY2suY2xhc3NMaXN0LmFkZCgnYnRuLXllbGxvdycpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlucHV0LnJlYWRPbmx5ID0gZmFsc2U7CiAgICAgICAgICAgIHNlbC5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICBhdmF0YXJCdG4uZGlzYWJsZWQgPSBmYWxzZTsgLy8gVU5MT0NLIEFWQVRBUgogICAgICAgICAgICBpbnB1dC5zdHlsZS5iYWNrZ3JvdW5kID0gIiNmOGY5ZmEiOwogICAgICAgICAgICAvLyBVUERBVEVEIFVOTE9DSyBJQ09OICYgUkVNT1ZFIFlFTExPVwogICAgICAgICAgICBidG5JbWcuc3JjID0gImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzI4ODkvMjg4OTY3Ni5wbmciOyAKICAgICAgICAgICAgYnRuSW1nLnN0eWxlLmZpbHRlciA9ICJvcGFjaXR5KDAuNCkiOwogICAgICAgICAgICBidG5Mb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi15ZWxsb3cnKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gdG9nZ2xlTG9ja05hbWUoKSB7CiAgICAgICAgbGV0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWEnKTsKICAgICAgICBsZXQgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2thdGVnb3JpJyk7CiAgICAgICAgbGV0IGF2YXRhckJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmF0YXJCdG4nKTsKICAgICAgICBsZXQgY3VycmVudCA9IGlucHV0LnZhbHVlLnRyaW0oKS50b1VwcGVyQ2FzZSgpOwogICAgICAgIGxldCBjdXJyZW50S2F0ID0gc2VsLnZhbHVlOwogICAgICAgIAogICAgICAgIGlmKCFjdXJyZW50IHx8ICFjdXJyZW50S2F0KSB7IHNob3dNb2Rlcm5BbGVydCgiS29zb25nIiwgIlNpbGEgaXNpIE5hbWEgZGFuIHBpbGloIEthdGVnb3JpIGRhaHVsdS4iLCAiZXJyb3IiKTsgcmV0dXJuOyB9CiAgICAgICAgCiAgICAgICAgaWYgKGlucHV0LnJlYWRPbmx5KSB7CiAgICAgICAgICAgIC8vIFVOTE9DSwogICAgICAgICAgICBpbnB1dC5yZWFkT25seSA9IGZhbHNlOwogICAgICAgICAgICBzZWwuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgYXZhdGFyQnRuLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgIGlucHV0LnN0eWxlLmJhY2tncm91bmQgPSAiI2Y4ZjlmYSI7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdlaGFkaXJfbG9ja2VkX25hbWUnKTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2VoYWRpcl9sb2NrZWRfa2F0Jyk7CiAgICAgICAgICAgIHNob3dNb2Rlcm5BbGVydCgiTnlhaC1LdW5jaSIsICJBdXRvIENoZWNrLUluIERpYmF0YWxrYW4uIiwgImluZm8iKTsKICAgICAgICAgICAgaW5pdExvY2tOYW1lKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gTE9DSwogICAgICAgICAgICBpbnB1dC5yZWFkT25seSA9IHRydWU7CiAgICAgICAgICAgIHNlbC5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIGF2YXRhckJ0bi5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIGlucHV0LnN0eWxlLmJhY2tncm91bmQgPSAiI2ZmZjhlMSI7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlaGFkaXJfbG9ja2VkX25hbWUnLCBjdXJyZW50KTsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VoYWRpcl9sb2NrZWRfa2F0JywgY3VycmVudEthdCk7CiAgICAgICAgICAgIHNob3dNb2Rlcm5BbGVydCgiQXV0byBNb2RlIiwgIk5hbWEgJiBBdmF0YXIgZGlrdW5jaS4gU2lzdGVtIGFrYW4gPGI+QVVUTyBDSEVDSy1JTjwvYj4gYmlsYSBhbmRhIG1hc3VrIGthd2FzYW4uIiwgInN1Y2Nlc3MiKTsKICAgICAgICAgICAgaW5pdExvY2tOYW1lKCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrQXV0b1N0YXR1cyhsaXN0KSB7CiAgICAgICAgbGV0IGxvY2tlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfbG9ja2VkX25hbWUnKTsKICAgICAgICBpZighbG9ja2VkKSByZXR1cm47CiAgICAgICAgbGV0IHVzZXJSZWNvcmQgPSBsaXN0LmZpbmQoaXRlbSA9PiBpdGVtLm5hbWEgPT09IGxvY2tlZCk7CiAgICAgICAgaWYgKHVzZXJSZWNvcmQpIHsKICAgICAgICAgICAgaWYgKCF1c2VyUmVjb3JkLmtlbHVhciB8fCB1c2VyUmVjb3JkLmtlbHVhciA9PT0gIiIpIHsKICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFNlc3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfc2Vzc2lvbicpKTsKICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRTZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlaGFkaXJfc2Vzc2lvbicsIEpTT04uc3RyaW5naWZ5KHsKICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWE6IGxvY2tlZCwKICAgICAgICAgICAgICAgICAgICAgICAgIGthdGVnb3JpOiB1c2VyUmVjb3JkLmthdGVnb3JpIHx8ICJHVVJVIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCkKICAgICAgICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsgCiAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRTZXNzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX3Nlc3Npb24nKSk7CiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNlc3MgJiYgY3VycmVudFNlc3MubmFtYSA9PT0gbG9ja2VkKSB7CiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2VoYWRpcl9zZXNzaW9uJyk7CiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZmV0Y2hDb25maWcoKSB7CiAgICAgICAgaWYoIW5hdmlnYXRvci5vbkxpbmUpIHsgcmV0dXJuOyB9CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdDb25maWcnKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICBmZXRjaChBUElfVVJMLCB7IG1ldGhvZDogIlBPU1QiLCBib2R5OiBKU09OLnN0cmluZ2lmeSh7YWN0aW9uOiAiR0VUX0NPTkZJRyIsIHBhc3Njb2RlOiBQQVNTQ09ERX0pIH0pCiAgICAgICAgLnRoZW4ociA9PiByLmpzb24oKSkudGhlbihyZXMgPT4geyAKICAgICAgICAgICAgamFtQ29uZmlnID0gKHJlcy5zdGF0dXMgPT09ICJTVUNDRVNTIiAmJiByZXMuZGF0YSkgPyByZXMuZGF0YSA6IHJlczsKICAgICAgICAgICAgaWYoamFtQ29uZmlnKSB7CiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ0NvbmZpZycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgICAgICAgICAgICAgICB1cGRhdGVTY2hlZHVsZUluZm8oKTsgCiAgICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChlcnIgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvYWRpbmdDb25maWcnKS5pbm5lckhUTUwgPSAiTW9kIE9mZmxpbmUuIik7CiAgICB9CgogICAgZnVuY3Rpb24gY2xlYW5UaW1lRGlzcGxheSh2YWwpIHsKICAgICAgICBpZiAoIXZhbCkgcmV0dXJuICItLTotLSI7CiAgICAgICAgbGV0IGQgPSBwYXJzZVRpbWUodmFsLCBuZXcgRGF0ZSgpKTsKICAgICAgICByZXR1cm4gZCA/IGQudG9Mb2NhbGVUaW1lU3RyaW5nKCdlbi1VUycsIHsgaG91cjogJ251bWVyaWMnLCBtaW51dGU6ICcyLWRpZ2l0JywgaG91cjEyOiB0cnVlIH0pIDogdmFsOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZVNjaGVkdWxlSW5mbygpIHsKICAgICAgICBsZXQga2F0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2thdGVnb3JpJykudmFsdWU7CiAgICAgICAgbGV0IGluZm9Cb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2NoZWR1bGVJbmZvJyk7CiAgICAgICAgaWYgKCFqYW1Db25maWcpIHJldHVybjsKICAgICAgICBpZiAoa2F0ICYmIGphbUNvbmZpZ1trYXRdKSB7CiAgICAgICAgICAgIGxldCBtYXN1ayA9IGNsZWFuVGltZURpc3BsYXkoamFtQ29uZmlnW2thdF0ubWFzdWspOwogICAgICAgICAgICBsZXQga2VsdWFyID0gY2xlYW5UaW1lRGlzcGxheShqYW1Db25maWdba2F0XS5rZWx1YXIpOwogICAgICAgICAgICBpbmZvQm94LmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPSJzY2hlZHVsZS1taW5pbWFsIj48ZGl2IGNsYXNzPSJ0aW1lLXBpbGwiIHN0eWxlPSJjb2xvcjojMjdhZTYwOyBib3JkZXItY29sb3I6I2Q0ZWRkYTsgYmFja2dyb3VuZDojZjBmZGY0OyI+PHNwYW4+PGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzE5MC8xOTA0MTEucG5nIiBjbGFzcz0iaWNvbi0zZC1taW5pIj4gJHttYXN1a308L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz0idGltZS1waWxsIiBzdHlsZT0iY29sb3I6I2MwMzkyYjsgYm9yZGVyLWNvbG9yOiNmYWRiZDg7IGJhY2tncm91bmQ6I2ZlZjJmMjsiPjxzcGFuPjxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8xOTAvMTkwNDA2LnBuZyIgY2xhc3M9Imljb24tM2QtbWluaSI+ICR7a2VsdWFyfTwvc3Bhbj48L2Rpdj48L2Rpdj5gOwogICAgICAgICAgICBpbmZvQm94LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVEYXNoYm9hcmRJbmZvKCkgewogICAgICAgIGxldCBzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX3Nlc3Npb24nKSk7CiAgICAgICAgbGV0IGRhc2hib2FyZFNjaGVkdWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZFNjaGVkdWxlJyk7CiAgICAgICAgbGV0IHVzZXJFeGl0VGltZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyRXhpdFRpbWUnKTsKICAgICAgICBpZiAocyAmJiBqYW1Db25maWcgJiYgamFtQ29uZmlnW3Mua2F0ZWdvcmldKSB7CiAgICAgICAgICAgIGxldCBkaXNwbGF5S2VsdWFyID0gY2xlYW5UaW1lRGlzcGxheShqYW1Db25maWdbcy5rYXRlZ29yaV0ua2VsdWFyKTsKICAgICAgICAgICAgZGFzaGJvYXJkU2NoZWR1bGUuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICAgIHVzZXJFeGl0VGltZS5pbm5lclRleHQgPSBkaXNwbGF5S2VsdWFyOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBzZW5kRGF0YShkYXRhKSB7CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgaWYgKCFkYXRhLmNsaWVudFRpbWUpIHsgZGF0YS5jbGllbnRUaW1lID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpOyB9CiAgICAgICAgICAgIGlmICghbmF2aWdhdG9yLm9uTGluZSkgewogICAgICAgICAgICAgICAgc2F2ZVRvUXVldWUoZGF0YSk7IHJlc29sdmUoeyBvZmZsaW5lOiB0cnVlIH0pOyByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZmV0Y2goQVBJX1VSTCwgeyBtZXRob2Q6ICJQT1NUIiwgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSkgfSkKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKS50aGVuKHJlc3VsdCA9PiB7IHJlc29sdmUoeyBvZmZsaW5lOiBmYWxzZSwgZGF0YTogcmVzdWx0IH0pOyB9KQogICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4geyBzYXZlVG9RdWV1ZShkYXRhKTsgcmVzb2x2ZSh7IG9mZmxpbmU6IHRydWUgfSk7IH0pOwogICAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhdmVUb1F1ZXVlKGRhdGEpIHsKICAgICAgICBpZiAoIWRhdGEua2F0ZWdvcmkpIGRhdGEua2F0ZWdvcmkgPSAiUEVMQVdBVCI7CiAgICAgICAgbGV0IHF1ZXVlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX29mZmxpbmVfcXVldWUnKSB8fCAiW10iKTsKICAgICAgICBxdWV1ZS5wdXNoKGRhdGEpOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlaGFkaXJfb2ZmbGluZV9xdWV1ZScsIEpTT04uc3RyaW5naWZ5KHF1ZXVlKSk7CiAgICB9CgogICAgLy8gLS0tIFVCQUggU1VBSTogSEFOVEFSIE1BU1VLIChBVVRPICYgTUFOVUFMKSAtLS0KICAgIGFzeW5jIGZ1bmN0aW9uIGhhbnRhck1hc3VrKGlzQXV0byA9IGZhbHNlKSB7CiAgICAgICAgaWYoaXNTdWJtaXR0aW5nKSByZXR1cm47IAoKICAgICAgICBpZighaXNJblpvbmUpIHsgCiAgICAgICAgICAgIGlmKCFpc0F1dG8pIHNob3dNb2Rlcm5BbGVydCgiTHVhciBLYXdhc2FuIiwgIlNpbGEgbWFzdWsga2Uga2F3YXNhbiBzZWtvbGFoLiIsICJlcnJvciIpOyAKICAgICAgICAgICAgcmV0dXJuOyAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgbGV0IG5hbWEsIGthdDsKICAgICAgICBpZiAoaXNBdXRvKSB7CiAgICAgICAgICAgIG5hbWEgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX2xvY2tlZF9uYW1lJyk7CiAgICAgICAgICAgIGthdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfbG9ja2VkX2thdCcpOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgbmFtYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1hJykudmFsdWUudG9VcHBlckNhc2UoKS50cmltKCk7CiAgICAgICAgICAgIGthdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdrYXRlZ29yaScpLnZhbHVlOwogICAgICAgIH0KCiAgICAgICAgbGV0IGFsYXNhbiA9ICJBVVRPIENIRUNLLUlOIChHUFMpIjsKICAgICAgICBsZXQgbm93ID0gbmV3IERhdGUoKTsKCiAgICAgICAgaWYgKCFuYW1hIHx8ICFrYXQpIHsgCiAgICAgICAgICAgIGlmKCFpc0F1dG8pIHNob3dNb2Rlcm5BbGVydCgiRGF0YSBUaWRhayBMZW5na2FwIiwgIklzaSBOYW1hIGRhbiBLYXRlZ29yaS4iLCAiZXJyb3IiKTsgCiAgICAgICAgICAgIHJldHVybjsgCiAgICAgICAgfQoKICAgICAgICBpc1N1Ym1pdHRpbmcgPSB0cnVlOwogICAgICAgIGlmKCFpc0F1dG8pIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bk1haW5TdWJtaXQnKS5kaXNhYmxlZCA9IHRydWU7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5NYWluU3VibWl0JykuaW5uZXJIVE1MID0gJ1NFREFORyBIQU5UQVIuLi4nOyB9CgogICAgICAgIHRyeSB7CiAgICAgICAgICAgIC8vIERBUEFUS0FOIEFWQVRBUiBZQU5HIERJUElMSUgKICAgICAgICAgICAgbGV0IHNhdmVkQXZhdGFyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl91c2VyX2F2YXRhcicpIHx8ICIiOwoKICAgICAgICAgICAgLy8gR0VOIFVVSUQgVU5UVUsgU0VTSSBVTklLCiAgICAgICAgICAgIGxldCB1bmlxdWVJRCA9IERhdGUubm93KCkudG9TdHJpbmcoMzYpICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDUpOwogICAgICAgICAgICBjb25zdCBwYXlsb2FkID0geyBhY3Rpb246ICJNQVNVSyIsIHBhc3Njb2RlOiBQQVNTQ09ERSwgbmFtYTogbmFtYSwga2F0ZWdvcmk6IGthdCwgYWxhc2FuOiBhbGFzYW4sIGxhdDogbGFzdExhdCwgbG5nOiBsYXN0TG5nLCBjbGllbnRUaW1lOiBub3cudG9JU09TdHJpbmcoKSwgdXVpZDogdW5pcXVlSUQsIGF2YXRhcjogc2F2ZWRBdmF0YXIgfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlbmREYXRhKHBheWxvYWQpOwoKICAgICAgICAgICAgaWYgKHJlc3VsdC5vZmZsaW5lKSB7CiAgICAgICAgICAgICAgICBpZighaXNBdXRvKSBhbGVydCgiT2ZmbGluZTogRGF0YSBkaXNpbXBhbi4iKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFNlbWFrIGppa2Egc2VydmVyIHJlamVjdCAoZHVwbGljYXRlKQogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kYXRhICYmIHJlc3VsdC5kYXRhLnJlc3VsdCA9PT0gImVycm9yIikgewogICAgICAgICAgICAgICAgICAgICBpZighaXNBdXRvKSBzaG93TW9kZXJuQWxlcnQoIkdhZ2FsIiwgcmVzdWx0LmRhdGEubXNnLCAiZXJyb3IiKTsKICAgICAgICAgICAgICAgICAgICAgaXNTdWJtaXR0aW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5NYWluU3VibWl0JykuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bk1haW5TdWJtaXQnKS5pbm5lckhUTUwgPSBgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4Lzk0MDIvOTQwMjM0Mi5wbmciIGNsYXNzPSJpY29uLTNkLXN0ZCI+IERBRlRBUiBNQVNVSyAoTUFOVUFMKWA7CiAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKCFpc0F1dG8pIGFsZXJ0KCI/IEJlcmpheWEgZGFmdGFyIG1hc3VrISIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBOT1RJRklLQVNJIEFVVE8KICAgICAgICAgICAgaWYoaXNBdXRvKSB7CiAgICAgICAgICAgICAgICBzaG93U3luY0JhcigiU0VMQU1BVCBEQVRBTkcgS0UgU0sgU0VMQU1BIChLKSIsICIjMjdhZTYwIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlaGFkaXJfc2Vzc2lvbicsIEpTT04uc3RyaW5naWZ5KHtuYW1hOiBuYW1hLCBrYXRlZ29yaToga2F0LCBkYXRlOiBub3cudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKSwgdXVpZDogdW5pcXVlSUR9KSk7CiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwoKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJSYWxhdDoiLCBlcnJvcik7CiAgICAgICAgICAgIGlzU3VibWl0dGluZyA9IGZhbHNlOwogICAgICAgICAgICBpZighaXNBdXRvKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuTWFpblN1Ym1pdCcpLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIC8vIC0tLSBVQkFIIFNVQUk6IEhBTlRBUiBLRUxVQVIgKEFVVE8gJiBNQU5VQUwpIC0tLQogICAgYXN5bmMgZnVuY3Rpb24gaGFudGFyS2VsdWFyKGlzQXV0byA9IGZhbHNlKSB7CiAgICAgICAgaWYoaXNTdWJtaXR0aW5nKSByZXR1cm47IAoKICAgICAgICBsZXQgc2Vzc2lvbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9zZXNzaW9uJykpOwogICAgICAgIGlmICghc2Vzc2lvbiB8fCAhc2Vzc2lvbi5uYW1hKSB7IHJldHVybjsgfQogICAgICAgIAogICAgICAgIGxldCBhbGFzYW5WYWx1ZSA9IGlzQXV0byA/ICJBVVRPIENIRUNLT1VUIChLRUxVQVIgS0FXQVNBTikiIDogIlBVTEFORyAoTUFOVUFMKSI7CiAgICAgICAgLy8gR2V0IFVVSUQgZnJvbSBzZXNzaW9uIGlmIGV4aXN0cwogICAgICAgIGxldCBzZXNzaW9uVVVJRCA9IHNlc3Npb24udXVpZCB8fCAiIjsKCiAgICAgICAgbGV0IHByb2NlZWQgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgICAgIGlzU3VibWl0dGluZyA9IHRydWU7IAogICAgICAgICAgICBpZighaXNBdXRvKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5LZWx1YXInKS5kaXNhYmxlZCA9IHRydWU7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5LZWx1YXInKS5pbm5lclRleHQgPSAiUFJPU0VTLi4uIjsgfQoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB7IGFjdGlvbjogIktFTFVBUiIsIHBhc3Njb2RlOiBQQVNTQ09ERSwgbmFtYTogc2Vzc2lvbi5uYW1hLnRvVXBwZXJDYXNlKCksIGFsYXNhbjogYWxhc2FuVmFsdWUsIGxhdDogbGFzdExhdCwgbG5nOiBsYXN0TG5nLCBjbGllbnRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIHV1aWQ6IHNlc3Npb25VVUlEIH07CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNlbmREYXRhKHBheWxvYWQpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBOT1RJRklLQVNJIEFVVE8KICAgICAgICAgICAgICAgIGlmKGlzQXV0bykgewogICAgICAgICAgICAgICAgICAgIHNob3dTeW5jQmFyKCJTRU1PR0EgU0VMQU1BVCBEQUxBTSBQRVJKQUxBTkFOIEFOREEiLCAiI2MwMzkyYiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBTRVQgQkxPQ0tJTkcgU1VQQVlBIFRBSyBBVVRPLUlOIFRFUlVTIEJJTEEgUkVMT0FECiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZWhhZGlyX2F1dG9faW5fYmxvY2tlZCcsICd0cnVlJyk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdlaGFkaXJfc2Vzc2lvbicpOwogICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CgogICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICAgICAgICBpc1N1Ym1pdHRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gLS0tIE1PRCBFRElUOiBGQUlMLVNBRkUgVU5UVUsgQVVUTyBDSEVDS09VVCAtLS0KICAgICAgICAgICAgICAgIC8vIEppa2EgZXJyb3IgYmVybGFrdSBtYXNhIGF1dG8gKGludGVybmV0IHNsb3cgZGxsKSwgdGV0YXAgZm9yY2UgbG9nb3V0IAogICAgICAgICAgICAgICAgLy8gc3VwYXlhIHRhayBzdHVjayBiaWxhIHVzZXIgbWFzdWsgYmFsaWsgem9uLgogICAgICAgICAgICAgICAgaWYoaXNBdXRvKSB7CiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2VoYWRpcl9zZXNzaW9uJyk7CiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5LZWx1YXInKS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5LZWx1YXInKS5pbm5lckhUTUwgPSBgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzM1ODAvMzU4MDE1NC5wbmciIGNsYXNzPSJpY29uLTNkLXN0ZCI+IERBRlRBUiBLRUxVQVIgKE1BTlVBTClgOwogICAgICAgICAgICAgICAgICAgIGFsZXJ0KCJSYWxhdCBzZW1hc2Ega2VsdWFyLiBTaWxhIGN1YmEgbGFnaS4iKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgaWYoIWlzQXV0bykgewogICAgICAgICAgICBzaG93TW9kZXJuQWxlcnQoIlBlbmdlc2FoYW4iLCAiRGFmdGFyIGtlbHVhciBzZWthcmFuZz8iLCAiY29uZmlybSIsIHByb2NlZWQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHByb2NlZWQoKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24ga2VsdWFyTWFudWFsKG5hbWFVc2VyKSB7CiAgICAgICAgbGV0IHBhc3MgPSBwcm9tcHQoIkFETUlOOiBQYXNzY29kZSB1bnR1ayBrZWx1YXJrYW4gIiArIG5hbWFVc2VyICsgIjoiKTsKICAgICAgICBpZiAocGFzcyAhPT0gUEFTU0NPREUpIHsgc2hvd01vZGVybkFsZXJ0KCJHYWdhbCIsICJQYXNzY29kZSBzYWxhaC4iLCAiZXJyb3IiKTsgcmV0dXJuOyB9CiAgICAgICAgCiAgICAgICAgc2VuZERhdGEoeyBhY3Rpb246ICJLRUxVQVIiLCBwYXNzY29kZTogUEFTU0NPREUsIG5hbWE6IG5hbWFVc2VyLCBhbGFzYW46ICJNYW51YWwgQWRtaW4iLCBsYXQ6IGxhc3RMYXQsIGxuZzogbGFzdExuZywgY2xpZW50VGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pCiAgICAgICAgLnRoZW4ocmVzID0+IHsgbG9hZExpc3QoKTsgfSk7CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gaGFudGFyUGVsYXdhdCgpIHsKICAgICAgICBpZihpc1N1Ym1pdHRpbmcpIHJldHVybjsKICAgICAgICBsZXQgZm90byA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXNlNjRGb3RvJykudmFsdWU7CiAgICAgICAgbGV0IG5hbWFQZWxhd2F0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWFQZWxhd2F0SW5wdXQnKS52YWx1ZS50b1VwcGVyQ2FzZSgpOwogICAgICAgIGlmICghZm90bykgeyBzaG93TW9kZXJuQWxlcnQoIlRpYWRhIEdhbWJhciIsICJBbWJpbCBnYW1iYXIgZGFodWx1LiIsICJlcnJvciIpOyByZXR1cm47IH0KICAgICAgICBpZiAoIW5hbWFQZWxhd2F0KSB7IHNob3dNb2Rlcm5BbGVydCgiVGlhZGEgTmFtYSIsICJJc2kgbmFtYSBwZWxhd2F0LiIsICJlcnJvciIpOyByZXR1cm47IH0KICAgICAgICBpc1N1Ym1pdHRpbmcgPSB0cnVlOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5QZWxhd2F0U3VibWl0JykuZGlzYWJsZWQgPSB0cnVlOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5QZWxhd2F0U3VibWl0JykuaW5uZXJUZXh0ID0gIlNFREFORyBIQU5UQVIuLi4iOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB7IGFjdGlvbjogIk1BU1VLIiwgcGFzc2NvZGU6IFBBU1NDT0RFLCBrYXRlZ29yaTogIlBFTEFXQVQiLCBuYW1hOiBuYW1hUGVsYXdhdCwgZm90b0Jhc2U2NDogZm90bywgbGF0OiBsYXN0TGF0LCBsbmc6IGxhc3RMbmcsIGNsaWVudFRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSB9OwogICAgICAgICAgICBhd2FpdCBzZW5kRGF0YShwYXlsb2FkKTsKICAgICAgICAgICAgYWxlcnQoIj8gRGF0YSBwZWxhd2F0IGJlcmpheWEgZGloYW50YXIhIik7CiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgICAgICBpc1N1Ym1pdHRpbmcgPSBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcGFyc2VUaW1lKHQsIHIpIHsKICAgICAgICBpZiAoIXQgfHwgdC50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICJCRUJBUyIpIHJldHVybiBudWxsOwogICAgICAgIGxldCBkID0gbmV3IERhdGUocik7IGxldCB0U3RyID0gdC50b1N0cmluZygpLnRyaW0oKTsKICAgICAgICBsZXQgcCA9IHRTdHIubWF0Y2goLyhcZCspWzouXShcZCspKD86WzouXShcZCspKT9ccyooQU18UE0pL2kpOwogICAgICAgIGlmKHApIHsKICAgICAgICAgICAgbGV0IGggPSBwYXJzZUludChwWzFdKSwgbSA9IHBhcnNlSW50KHBbMl0pLCBhbXBtID0gcFs0XS50b1VwcGVyQ2FzZSgpOwogICAgICAgICAgICBpZihhbXBtID09PSAiUE0iICYmIGggPCAxMikgaCArPSAxMjsgaWYoYW1wbSA9PT0gIkFNIiAmJiBoID09PSAxMikgaCA9IDA7CiAgICAgICAgICAgIGQuc2V0SG91cnMoaCwgbSwgMCwgMCk7IHJldHVybiBkOwogICAgICAgIH0gCiAgICAgICAgbGV0IHAyID0gdFN0ci5tYXRjaCgvKFxkKylbOi5dKFxkKykvKTsKICAgICAgICBpZihwMikgeyBkLnNldEhvdXJzKHBhcnNlSW50KHAyWzFdKSwgcGFyc2VJbnQocDJbMl0pLCAwLCAwKTsgcmV0dXJuIGQ7IH0KICAgICAgICByZXR1cm4gbnVsbDsgCiAgICB9CgogICAgZnVuY3Rpb24gcGFyc2VUaW1lTG9jYWwodGltZVN0cikgewogICAgICAgIGlmICghdGltZVN0cikgcmV0dXJuIG51bGw7CiAgICAgICAgaWYgKHRpbWVTdHIudG9TdHJpbmcoKS5sZW5ndGggPiAxNSkgeyBsZXQgdGVtcEQgPSBuZXcgRGF0ZSh0aW1lU3RyKTsgaWYoIWlzTmFOKHRlbXBELmdldFRpbWUoKSkpIHsgbGV0IG5vdyA9IG5ldyBEYXRlKCk7IG5vdy5zZXRIb3Vycyh0ZW1wRC5nZXRIb3VycygpLCB0ZW1wRC5nZXRNaW51dGVzKCksIHRlbXBELmdldFNlY29uZHMoKSwgMCk7IHJldHVybiBub3c7IH0gfQogICAgICAgIGxldCBwYXJ0cyA9IHRpbWVTdHIubWF0Y2goLyhcZCspOihcZCspKD86OihcZCspKT9ccyooQU18UE18YW18cG0pPy9pKTsKICAgICAgICBpZiAoIXBhcnRzKSByZXR1cm4gbnVsbDsKICAgICAgICBsZXQgaCA9IHBhcnNlSW50KHBhcnRzWzFdKSwgbSA9IHBhcnNlSW50KHBhcnRzWzJdKSwgcyA9IHBhcnRzWzNdID8gcGFyc2VJbnQocGFydHNbM10pIDogMCwgYW1wbSA9IHBhcnRzWzRdID8gcGFydHNbNF0udG9VcHBlckNhc2UoKSA6IG51bGw7CiAgICAgICAgaWYgKGFtcG0gPT09ICJQTSIgJiYgaCA8IDEyKSBoICs9IDEyOyBpZiAoYW1wbSA9PT0gIkFNIiAmJiBoID09PSAxMikgaCA9IDA7CiAgICAgICAgbGV0IGQgPSBuZXcgRGF0ZSgpOyBkLnNldEhvdXJzKGgsIG0sIHMsIDApOyByZXR1cm4gZDsKICAgIH0KCiAgICBmdW5jdGlvbiB1cGRhdGVMaXZlVGltZXJzKCkgewogICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5saXZlLXRpbWVyJykuZm9yRWFjaChlbCA9PiB7CiAgICAgICAgICAgIGxldCBtYXN1a1N0ciA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1tYXN1aycpOwogICAgICAgICAgICBpZiAoIW1hc3VrU3RyIHx8IG1hc3VrU3RyID09PSAidW5kZWZpbmVkIikgeyBlbC5pbm5lckhUTUwgPSBgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzI5NzIvMjk3MjUzMS5wbmciIHN0eWxlPSJ3aWR0aDoxMnB4O2hlaWdodDoxMnB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZSI+IC0tYDsgcmV0dXJuOyB9CiAgICAgICAgICAgIGxldCBtYXN1a0RhdGUgPSBwYXJzZVRpbWVMb2NhbChtYXN1a1N0cik7CiAgICAgICAgICAgIGlmIChtYXN1a0RhdGUpIHsKICAgICAgICAgICAgICAgIGxldCBkaWZmID0gTWF0aC5mbG9vcigobm93IC0gbWFzdWtEYXRlKSAvIDEwMDApOyBpZiAoZGlmZiA8IDApIGRpZmYgPSAwOwogICAgICAgICAgICAgICAgbGV0IGggPSBNYXRoLmZsb29yKGRpZmYgLyAzNjAwKTsgbGV0IG0gPSBNYXRoLmZsb29yKChkaWZmICUgMzYwMCkgLyA2MCk7CiAgICAgICAgICAgICAgICBlbC5pbm5lckhUTUwgPSBgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzI5NzIvMjk3MjUzMS5wbmciIHN0eWxlPSJ3aWR0aDoxMnB4O2hlaWdodDoxMnB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZSI+ICR7aH1IICR7bX1NYDsKICAgICAgICAgICAgfSBlbHNlIHsgZWwuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8yOTcyLzI5NzI1MzEucG5nIiBzdHlsZT0id2lkdGg6MTJweDtoZWlnaHQ6MTJweDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGUiPiAwSCAwTWA7IH0KICAgICAgICB9KTsKICAgIH0KCiAgICAvLyAtLS0gRlVOR1NJIFVUQU1BOiBNT05JVE9SIExPR0lLIE1BU0EgKEFOVEktU1BBTSAmIEFVVE8tQ0hFQ0tPVVQpIC0tLQogICAgZnVuY3Rpb24gbW9uaXRvckF1dG9Mb2dpYygpIHsKICAgICAgICAvLyBUdWthciBtaW5pdCBrZSBtaWxpc2FhdAogICAgICAgIGxldCBNU19JTl9ERUxBWSA9ICh0eXBlb2YgTUlOSVRfQU5USV9TUEFNX01BU1VLICE9PSAndW5kZWZpbmVkJyA/IE1JTklUX0FOVElfU1BBTV9NQVNVSyA6IDUpICogNjAgKiAxMDAwOwogICAgICAgIGxldCBNU19PVVRfREVMQVkgPSAodHlwZW9mIE1JTklUX0RFTEFZX0tFTFVBUiAhPT0gJ3VuZGVmaW5lZCcgPyBNSU5JVF9ERUxBWV9LRUxVQVIgOiAxMCkgKiA2MCAqIDEwMDA7CgogICAgICAgIGxldCBzZXNzaW9uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX3Nlc3Npb24nKSk7CiAgICAgICAgbGV0IGxvY2tlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfbG9ja2VkX25hbWUnKTsKICAgICAgICBsZXQgbG9ja2VkS2F0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9sb2NrZWRfa2F0Jyk7CiAgICAgICAgbGV0IG5vdyA9IERhdGUubm93KCk7CgogICAgICAgIC8vIDEuIFVQREFURSBVSSBTVEFUVVMgKEFTSU5HS0FOIERBUkkgR1BTIENBTExCQUNLKQogICAgICAgIGxldCBzdGF0dXNFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGF0dXNUZXh0Jyk7CiAgICAgICAgbGV0IGlzQmxvY2tlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfYXV0b19pbl9ibG9ja2VkJyk7IC8vIE5FVyBDSEVDSwoKICAgICAgICBpZiAoaXNJblpvbmUpIHsKICAgICAgICAgICAgIGxldCBpY29uID0gIjxpbWcgc3JjPSdodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8xOTAvMTkwNDExLnBuZycgY2xhc3M9J2ljb24tM2QtbWluaSc+IjsKICAgICAgICAgICAgIHN0YXR1c0VsLmlubmVySFRNTCA9IGljb24gKyAiIERBTEFNIEtBV0FTQU4gKCIgKyBNYXRoLnJvdW5kKGN1cnJlbnREaXN0KSArICJtKSI7CiAgICAgICAgICAgICBzdGF0dXNFbC5zdHlsZS5jb2xvciA9ICIjMjdhZTYwIjsKICAgICAgICAgICAgIHN0YXR1c0VsLnN0eWxlLmJhY2tncm91bmQgPSAiI2U4ZjVlOSI7CiAgICAgICAgICAgICAKICAgICAgICAgICAgIC8vIE5FVzogQkxPQ0sgTE9HSUMKICAgICAgICAgICAgIGlmIChpc0Jsb2NrZWQpIHsKICAgICAgICAgICAgICAgICBzdGF0dXNFbC5pbm5lckhUTUwgKz0gYDxicj48c3BhbiBzdHlsZT0iZm9udC1zaXplOjlweDsgY29sb3I6I2U2N2UyMjsiPkFVVE8tSU4gRElHQU5UVU5HIChLRUxVQVIgPiAke1JBRElVU19SRVNFVF9BVVRPX0lOfU0gVU5UVUsgUkVTRVQpPC9zcGFuPmA7CiAgICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBTVE9QIExPR0lDIEhFUkUKICAgICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgbGV0IGljb24gPSAiPGltZyBzcmM9J2h0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzE5MC8xOTA0MDYucG5nJyBjbGFzcz0naWNvbi0zZC1taW5pJz4iOwogICAgICAgICAgICAgc3RhdHVzRWwuaW5uZXJIVE1MID0gaWNvbiArICIgTFVBUiBLQVdBU0FOICgiICsgTWF0aC5yb3VuZChjdXJyZW50RGlzdCkgKyAibSkiOwogICAgICAgICAgICAgc3RhdHVzRWwuc3R5bGUuY29sb3IgPSAiI2MwMzkyYiI7CiAgICAgICAgICAgICBzdGF0dXNFbC5zdHlsZS5iYWNrZ3JvdW5kID0gIiNmZGVlYTUiOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIFNJVFVBU0kgMTogTUFTVUsgS0FXQVNBTiAoREFGVEFSIE1BU1VLKSAtLS0KICAgICAgICBpZiAoaXNJblpvbmUpIHsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmdCb3gnKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICBoYXNOb3RpZmllZEV4aXQgPSBmYWxzZTsgLy8gUmVzZXQgRXhpdCBOb3RpZmljYXRpb24KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIDEuIFRyaWdnZXIgTm90aWZpY2F0aW9uOiAiQU5EQSBTVURBSCBTQU1QQUkhIgogICAgICAgICAgICBpZiAoIXNlc3Npb24gJiYgbG9ja2VkICYmIGxvY2tlZEthdCAmJiAhaGFzTm90aWZpZWRFbnRyeSkgewogICAgICAgICAgICAgICAgaGFzTm90aWZpZWRFbnRyeSA9IHRydWU7CiAgICAgICAgICAgICAgICBzZW5kTm90aWZpY2F0aW9uKCJBTkRBIFNVREFIIFNBTVBBSSEiLCAiU2lsYSBrbGlrIGRpIHNpbmkgdW50dWsgYnVrYSBhcGxpa2FzaSIsICJ3YWtlLXVwLWVudHJ5Iik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIDIuIExvZ2ljIENvdW50ZG93biBBdXRvLU1hc3VrIChKYWxhbiBiaWxhIEFwcCBUZXJidWthKQogICAgICAgICAgICBpZiAoIXNlc3Npb24gJiYgbG9ja2VkICYmIGxvY2tlZEthdCAmJiAhaXNTdWJtaXR0aW5nKSB7CiAgICAgICAgICAgICAgICBpZiAoaW5ab25lU3RhcnQgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGVsYXBzZWQgPSBub3cgLSBpblpvbmVTdGFydDsKICAgICAgICAgICAgICAgICAgICBsZXQgcmVtYWluaW5nU2VjID0gTWF0aC5jZWlsKChNU19JTl9ERUxBWSAtIGVsYXBzZWQpIC8gMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIFN0YXR1cyBUZXh0IHN1cGF5YSB1c2VyIHRhaHUgKE9WRVJSSURFIFVJKQogICAgICAgICAgICAgICAgICAgIHN0YXR1c0VsLmlubmVySFRNTCArPSBgIDxicj5bQVVUTy1QVU5DSDogJHtyZW1haW5pbmdTZWN9c11gOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmdTZWMgPD0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBoYW50YXJNYXN1ayh0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaW5ab25lU3RhcnQgPSAwOyAvLyBSZXNldAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gCiAgICAgICAgLy8gLS0tIFNJVFVBU0kgMjogS0VMVUFSIEtBV0FTQU4gKERBRlRBUiBLRUxVQVIpIC0tLQogICAgICAgIGVsc2UgewogICAgICAgICAgICBoYXNOb3RpZmllZEVudHJ5ID0gZmFsc2U7IC8vIFJlc2V0IEVudHJ5IE5vdGlmaWNhdGlvbgoKICAgICAgICAgICAgLy8gMS4gVHJpZ2dlciBOb3RpZmljYXRpb246ICJBTkRBIFRFTEFIIEtFTFVBUiBLQVdBU0FOISIKICAgICAgICAgICAgaWYgKHNlc3Npb24gJiYgIWhhc05vdGlmaWVkRXhpdCkgewogICAgICAgICAgICAgICAgaGFzTm90aWZpZWRFeGl0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHNlbmROb3RpZmljYXRpb24oIkFOREEgVEVMQUggS0VMVUFSIEtBV0FTQU4hIiwgIkFuZGEgZGlrZXNhbiB0ZWxhaCBtZW5pbmdnYWxrYW4gcGVqYWJhdC4gS2xpayBkaSBzaW5pIHVudHVrIHNhaGthbiB3YWt0dSBiYWxpayAoUHVuY2ggT3V0KS4iLCAid2FrZS11cC1leGl0Iik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIDIuIExvZ2ljIENvdW50ZG93biBBdXRvLUtlbHVhciAoSmFsYW4gYmlsYSBBcHAgVGVyYnVrYSkKICAgICAgICAgICAgaWYgKHNlc3Npb24gJiYgIWlzU3VibWl0dGluZykgewogICAgICAgICAgICAgICAgIGlmIChvdXRab25lU3RhcnQgPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgIGxldCBlbGFwc2VkID0gbm93IC0gb3V0Wm9uZVN0YXJ0OwogICAgICAgICAgICAgICAgICAgICBsZXQgcmVtYWluaW5nU2VjID0gTWF0aC5jZWlsKChNU19PVVRfREVMQVkgLSBlbGFwc2VkKSAvIDEwMDApOwogICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgbGV0IHdhcm5Cb3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZ0JveCcpOwogICAgICAgICAgICAgICAgICAgICB3YXJuQm94LnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgICAgICAgICAgICAgICB3YXJuQm94LmlubmVySFRNTCA9IGBBTUFSQU4hIEtFTFVBUiBaT04uPGJyPkFVVE8gUFVOQ0gtT1VUIERBTEFNIDxzcGFuIHN0eWxlPSJmb250LXNpemU6MS41ZW0iPiR7cmVtYWluaW5nU2VjfTwvc3Bhbj4gU2A7CgogICAgICAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nU2VjIDw9IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgIGhhbnRhcktlbHVhcih0cnVlKTsKICAgICAgICAgICAgICAgICAgICAgICAgIG91dFpvbmVTdGFydCA9IDA7CiAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmdCb3gnKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHN0YXJ0UmFkYXIoKSB7CiAgICAgICAgaWYgKG5hdmlnYXRvci5nZW9sb2NhdGlvbikgewogICAgICAgICAgICAvLyAtLS0gT1BUSU1BU0k6IEZPUkNFIEdQUyBBR0FSIExFQklIIEFHUkVTSUYgREkgQkFDS0dST1VORCAtLS0KICAgICAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24ocG9zID0+IHsKICAgICAgICAgICAgICAgIGxhc3RMYXQgPSBwb3MuY29vcmRzLmxhdGl0dWRlOyBsYXN0TG5nID0gcG9zLmNvb3Jkcy5sb25naXR1ZGU7CiAgICAgICAgICAgICAgICBjdXJyZW50RGlzdCA9IGNhbGNEaXN0KGxhc3RMYXQsIGxhc3RMbmcsIFNDSE9PTF9MQVQsIFNDSE9PTF9MTkcpOyAxCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFRlbnR1a2FuIHN0YXR1cyBtYXN1ay9rZWx1YXIKICAgICAgICAgICAgICAgIGlzSW5ab25lID0gKGN1cnJlbnREaXN0IDw9IFJBRElVU19NRVRFUik7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIE5FVzogUkVTRVQgQkxPQ0sgTE9HSUMKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RGlzdCA+IFJBRElVU19SRVNFVF9BVVRPX0lOKSB7CiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2VoYWRpcl9hdXRvX2luX2Jsb2NrZWQnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBLZW1hc2tpbmkgVGltZXN0YW1wIFN0YXR1cyAoTG9naWMgU2FoYWphLCBVSSBkaSBtb25pdG9yQXV0b0xvZ2ljKQogICAgICAgICAgICAgICAgaWYgKGlzSW5ab25lKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFpblpvbmVTdGFydCkgaW5ab25lU3RhcnQgPSBEYXRlLm5vdygpOwogICAgICAgICAgICAgICAgICAgIG91dFpvbmVTdGFydCA9IDA7IAogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIW91dFpvbmVTdGFydCkgb3V0Wm9uZVN0YXJ0ID0gRGF0ZS5ub3coKTsKICAgICAgICAgICAgICAgICAgICBpblpvbmVTdGFydCA9IDA7IAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSwgbnVsbCwge2VuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZSwgbWF4aW11bUFnZTogMCwgdGltZW91dDogNTAwMH0pOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBjYWxjRGlzdChhLGIsYyxkKXt2YXIgUj02MzcxZTMseD1hKk1hdGguUEkvMTgwLHk9YypNYXRoLlBJLzE4MCxrPShjLWEpKk1hdGguUEkvMTgwLGw9KGQtYikqTWF0aC5QSS8xODAsej1NYXRoLnNpbihrLzIpKk1hdGguc2luKGsvMikrTWF0aC5jb3MoeCkqTWF0aC5jb3MoeSkqTWF0aC5zaW4obC8yKSpNYXRoLnNpbihsLzIpO3JldHVybiBSKjIqTWF0aC5hdGFuMihNYXRoLnNxcnQoeiksTWF0aC5zcXJ0KDEteikpO30KICAgIAogICAgZnVuY3Rpb24gc3RhcnRDbG9jaygpewogICAgICAgIHNldEludGVydmFsKCgpPT57CiAgICAgICAgICAgIGxldCBuID0gbmV3IERhdGUoKTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb2NrRGlzcGxheScpLmlubmVyVGV4dCA9IG4udG9Mb2NhbGVUaW1lU3RyaW5nKCdlbi1VUycsIHsgaG91cjEyOiB0cnVlLCBob3VyOiAiMi1kaWdpdCIsIG1pbnV0ZTogIjItZGlnaXQiLCB0aW1lWm9uZTogJ0FzaWEvS3VhbGFfTHVtcHVyJyB9KTsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGVEaXNwbGF5JykuaW5uZXJUZXh0ID0gbi50b0xvY2FsZURhdGVTdHJpbmcoJ21zLU1ZJywgeyBkYXk6ICdudW1lcmljJywgbW9udGg6ICdzaG9ydCcsIHllYXI6ICdudW1lcmljJywgdGltZVpvbmU6ICdBc2lhL0t1YWxhX0x1bXB1cicgfSk7CiAgICAgICAgfSwgMTAwMCk7CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGdldEhpanJpRGF0ZSgpewogICAgICAgIGNvbnN0IG1vbnRoTmFtZXMgPSBbIk11aGFycmFtIiwgIlNhZmFyIiwgIlJhYml1bGF3YWwiLCAiUmFiaXVsYWtoaXIiLCAiSmFtYWRpbGF3YWwiLCAiSmFtYWRpbGFraGlyIiwgIlJlamFiIiwgIlN5YWFiYW4iLCAiUmFtYWRhbiIsICJTeWF3YWwiLCAiWnVsa2FlZGFoIiwgIlp1bGhpamphaCJdOwogICAgICAgIGxldCB0ID0gbmV3IERhdGUoKTsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZXQgcGFydHMgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCgnZW4tdS1jYS1pc2xhbWljLXVtYWxxdXJhLW51LWxhdG4nLCB7IGRheTogJ251bWVyaWMnLCBtb250aDogJ251bWVyaWMnLCB5ZWFyOiAnbnVtZXJpYycsIHRpbWVab25lOiAnQXNpYS9LdWFsYV9MdW1wdXInIH0pLmZvcm1hdFRvUGFydHModCk7CiAgICAgICAgICAgIGxldCBoRGF5ID0gcGFydHMuZmluZChwID0+IHAudHlwZSA9PT0gJ2RheScpLnZhbHVlOwogICAgICAgICAgICBsZXQgaE1vbnRoSW5kZXggPSBwYXJzZUludChwYXJ0cy5maW5kKHAgPT4gcC50eXBlID09PSAnbW9udGgnKS52YWx1ZSkgLSAxOyAKICAgICAgICAgICAgbGV0IGhZZWFyID0gcGFydHMuZmluZChwID0+IHAudHlwZSA9PT0gJ3llYXInKS52YWx1ZS5zcGxpdCgiICIpWzBdOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlqcmlEaXNwbGF5JykuaW5uZXJUZXh0ID0gYCR7aERheX0gJHttb250aE5hbWVzW2hNb250aEluZGV4XXx8KCIiKX0gJHtoWWVhcn1gOwogICAgICAgIH0gY2F0Y2goZSkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGlqcmlEaXNwbGF5JykuaW5uZXJUZXh0ID0gIkthbGVuZGFyIElzbGFtIjsgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrU2Vzc2lvbigpIHsgCiAgICAgICAgbGV0IHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfc2Vzc2lvbicpKTsgCiAgICAgICAgaWYocyAmJiBzLmRhdGUgPT09IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKSkgeyAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlZmF1bHRGb3JtJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXNoYm9hcmRQYW5lbCcpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Nlc3Npb25OYW1lJykuaW5uZXJUZXh0ID0gcy5uYW1hOyAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R5bmFtaWNTdGF0dXMnKS5pbm5lclRleHQgPSAiU1RBVFVTOiAiICsgcy5rYXRlZ29yaSArICIgKFNFREFORyBCRVJUVUdBUykiOwogICAgICAgICAgICAvLyBMT0FEIFNBVkVEIEFWQVRBUiBJRiBBTlkKICAgICAgICAgICAgbGV0IHNhdmVkQXZhdGFyID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl91c2VyX2F2YXRhcicpOwogICAgICAgICAgICBpZihzYXZlZEF2YXRhcikgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJBdmF0YXJEYXNoJykuc3JjID0gc2F2ZWRBdmF0YXI7CiAgICAgICAgICAgIHVwZGF0ZURhc2hib2FyZEluZm8oKTsgCiAgICAgICAgfQogICAgfQogICAgCiAgICBmdW5jdGlvbiBsb2FkTGlzdCgpIHsgCiAgICAgICAgbGV0IG9mZmxpbmVRdWV1ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9vZmZsaW5lX3F1ZXVlJykgfHwgIltdIik7CiAgICAgICAgbGV0IG9mZmxpbmVJdGVtcyA9IG9mZmxpbmVRdWV1ZS5maWx0ZXIocSA9PiBxLmFjdGlvbiA9PT0gIk1BU1VLIikubWFwKHEgPT4gKHsKICAgICAgICAgICAgbmFtYTogcS5uYW1hLCBrYXRlZ29yaTogcS5rYXRlZ29yaSwgamFtOiBuZXcgRGF0ZShxLmNsaWVudFRpbWUpLnRvTG9jYWxlVGltZVN0cmluZygnZW4tVVMnLCB7aG91cjEyOnRydWUsIGhvdXI6JzItZGlnaXQnLCBtaW51dGU6JzItZGlnaXQnLCBzZWNvbmQ6JzItZGlnaXQnfSksIGF2YXRhcjogcS5hdmF0YXIsIGlzT2ZmbGluZTogdHJ1ZQogICAgICAgIH0pKTsKICAgICAgICBpZighbmF2aWdhdG9yLm9uTGluZSkgeyByZW5kZXJMaXN0KG9mZmxpbmVJdGVtcyk7IHJldHVybjsgfQogICAgICAgIGZldGNoKEFQSV9VUkwsIHsgbWV0aG9kOiAiUE9TVCIsIGJvZHk6IEpTT04uc3RyaW5naWZ5KHthY3Rpb246ICJHRVRfTElTVCIsIHBhc3Njb2RlOiBQQVNTQ09ERX0pIH0pCiAgICAgICAgLnRoZW4ociA9PiByLmpzb24oKSkudGhlbihyZXMgPT4geyAKICAgICAgICAgICAgbGV0IHNlcnZlckl0ZW1zID0gcmVzLmRhdGEgfHwgcmVzOyAKICAgICAgICAgICAgY3VycmVudExpc3QgPSBbLi4ub2ZmbGluZUl0ZW1zLCAuLi5zZXJ2ZXJJdGVtc107CiAgICAgICAgICAgIHJlbmRlckxpc3QoY3VycmVudExpc3QpOwogICAgICAgICAgICBjaGVja0F1dG9TdGF0dXMoY3VycmVudExpc3QpOwogICAgICAgIH0pLmNhdGNoKCgpID0+IHsgcmVuZGVyTGlzdChvZmZsaW5lSXRlbXMpOyB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiByZW5kZXJMaXN0KGl0ZW1zKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvdW50JykuaW5uZXJUZXh0ID0gaXRlbXMubGVuZ3RoOyAKICAgICAgICBsZXQgaCA9ICIiOyAKICAgICAgICBsZXQgZGVmQXZhdGFyID0gImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzMxMzUvMzEzNTcxNS5wbmciOwogICAgICAgIGl0ZW1zLmZvckVhY2goKGksIGlkeCkgPT4geyAKICAgICAgICAgICAgbGV0IGltZ0J0biA9IChpLmthdGVnb3JpID09PSAiUEVMQVdBVCIgJiYgaS5mb3RvKSA/IGA8c3BhbiBjbGFzcz0iaWNvbi1idG4iIG9uY2xpY2s9InZpZXdJbWFnZSgke2lkeH0pIj48aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMzM0Mi8zMzQyMTM3LnBuZyIgY2xhc3M9Imljb24tM2QtbWluaSI+PC9zcGFuPmAgOiAiIjsKICAgICAgICAgICAgbGV0IHhCdG4gPSBgPHNwYW4gY2xhc3M9Imljb24tYnRuIiBzdHlsZT0iYm9yZGVyLWNvbG9yOiNmYWRiZDg7IiBvbmNsaWNrPSJrZWx1YXJNYW51YWwoJyR7aS5uYW1hfScpIj48aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNjg2MS82ODYxMzYyLnBuZyIgY2xhc3M9Imljb24tM2QtbWluaSI+PC9zcGFuPmA7CiAgICAgICAgICAgIGxldCBvZmZsaW5lQ2xhc3MgPSBpLmlzT2ZmbGluZSA/ICJvZmZsaW5lLWl0ZW0iIDogIiI7CiAgICAgICAgICAgIGxldCBvZmZsaW5lSWNvbiA9IGkuaXNPZmZsaW5lID8gYDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8xNTkvMTU5NjA0LnBuZyIgY2xhc3M9Imljb24tM2QtbWluaSIgdGl0bGU9Ik1lbnVuZ2d1IFN5bmMiPiBgIDogIiI7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBMT0dJSyBBVkFUQVIgRElQRVJCQUlLSTogS2V1dGFtYWFuIGtlcGFkYSBwaWxpaGFuIHVzZXIsIG92ZXJyaWRlIHBlbGF3YXQgaGFueWEgamlrYSB0aWFkYSBhdmF0YXIKICAgICAgICAgICAgbGV0IGN1cnJlbnREZWYgPSAoaS5rYXRlZ29yaSA9PT0gIlBFTEFXQVQiKSA/ICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8zMTM1LzMxMzU3NjgucG5nIiA6IGRlZkF2YXRhcjsKICAgICAgICAgICAgbGV0IHVzZXJBdmF0YXIgPSAoaS5hdmF0YXIgJiYgaS5hdmF0YXIgIT09ICItIikgPyBpLmF2YXRhciA6IGN1cnJlbnREZWY7CgogICAgICAgICAgICBsZXQgYXZhdGFySW1nID0gYDxpbWcgc3JjPSIke3VzZXJBdmF0YXJ9IiBzdHlsZT0id2lkdGg6MzVweDsgaGVpZ2h0OjM1cHg7IGJvcmRlci1yYWRpdXM6NTAlOyBtYXJnaW4tcmlnaHQ6MTBweDsgYm9yZGVyOjJweCBzb2xpZCAjZGRkOyBiYWNrZ3JvdW5kOiNmZmY7IHBhZGRpbmc6MnB4OyBmbGV4LXNocmluazowOyI+YDsKCiAgICAgICAgICAgIGggKz0gYDxkaXYgY2xhc3M9InVzZXItY2FyZCAke29mZmxpbmVDbGFzc30iPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyB3aWR0aDoxMDAlOyI+CiAgICAgICAgICAgICAgICAgICAgICAgICR7YXZhdGFySW1nfQogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ1c2VyLWluZm8iPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz4ke29mZmxpbmVJY29ufSR7aS5uYW1hfTwvc3Ryb25nPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idXNlci1kZXRhaWxzIj48c3Bhbj4ke2kua2F0ZWdvcml9PC9zcGFuPjxzcGFuIGNsYXNzPSJsaXZlLXRpbWVyIiBkYXRhLW1hc3VrPSIke2kuamFtfHwoInVuZGVmaW5lZCIpfSI+PGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzI5NzIvMjk3MjUzMS5wbmciIHN0eWxlPSJ3aWR0aDoxMnB4O2hlaWdodDoxMnB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZSI+IDBIIDBNPC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsaXN0LWFjdGlvbnMiPiR7aW1nQnRufSR7eEJ0bn08L2Rpdj4KICAgICAgICAgICAgICAgICAgPC9kaXY+YDsgCiAgICAgICAgfSk7IAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsaXN0Q29udGFpbmVyJykuaW5uZXJIVE1MID0gaCB8fCAiPGRpdiBzdHlsZT0ncGFkZGluZzoyMHB4OyBjb2xvcjojOTk5OyBmb250LXNpemU6MTJweDsnPlRpYWRhIHJla29kIGhhcmkgaW5pLjwvZGl2PiI7IAogICAgICAgIHVwZGF0ZUxpdmVUaW1lcnMoKTsKICAgIH0KCiAgICBmdW5jdGlvbiB2aWV3SW1hZ2UoaW5kZXgpIHsgbGV0IGRhdGEgPSBjdXJyZW50TGlzdFtpbmRleF07IGlmKGRhdGEgJiYgZGF0YS5mb3RvKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWdGdWxsJykuc3JjID0gZGF0YS5mb3RvOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7IH0gfQogICAgZnVuY3Rpb24gY2xvc2VNb2RhbCgpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltYWdlTW9kYWwnKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOyB9CiAgICBmdW5jdGlvbiBwcm9jZXNzSW1hZ2UoaSl7aWYoaS5maWxlcyYmaS5maWxlc1swXSl7bGV0IHI9bmV3IEZpbGVSZWFkZXIoKTtyLm9ubG9hZD1mdW5jdGlvbihlKXtsZXQgaW09bmV3IEltYWdlKCk7aW0uc3JjPWUudGFyZ2V0LnJlc3VsdDtpbS5vbmxvYWQ9ZnVuY3Rpb24oKXtsZXQgY3Y9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7bGV0IGN0eD1jdi5nZXRDb250ZXh0KCIyZCIpO2N2LndpZHRoPTQwMDtjdi5oZWlnaHQ9NDAwKihpbS5oZWlnaHQvaW0ud2lkdGgpO2N0eC5kcmF3SW1hZ2UoaW0sMCwwLGN2LndpZHRoLGN2LmhlaWdodCk7bGV0IGQ9Y3YudG9EYXRhVVJMKCJpbWFnZS9qcGVnIiwwLjcpO2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3SW1nJykuc3JjPWQ7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXdJbWcnKS5zdHlsZS5kaXNwbGF5PSdibG9jayc7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jhc2U2NEZvdG8nKS52YWx1ZT1kO307fTtyLnJlYWRBc0RhdGFVUkwoaS5maWxlc1swXSk7fX0KICAgIGZ1bmN0aW9uIGNoZWNrS2F0ZWdvcmkoKXsgaWYoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2thdGVnb3JpJykudmFsdWU9PT0nUEVMQVdBVCcpIHNob3dQZWxhd2F0Rm9ybSgpOyB9CiAgICBmdW5jdGlvbiBzaG93UGVsYXdhdEZvcm0oKXsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlZmF1bHRGb3JtJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZWxhd2F0UGFuZWwnKS5zdHlsZS5kaXNwbGF5PSdibG9jayc7IH0KICAgIGZ1bmN0aW9uIGNhbmNlbFBlbGF3YXQoKXsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlbGF3YXRQYW5lbCcpLnN0eWxlLmRpc3BsYXk9J25vbmUnOyBjaGVja1Nlc3Npb24oKTsgbG9jYXRpb24ucmVsb2FkKCk7IH0KICAgIGZ1bmN0aW9uIHJlc2V0U2VzaSgpeyBpZihjb25maXJtKCJSZXNldCBzZXNpPyIpKXtsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZWhhZGlyX3Nlc3Npb24nKTtsb2NhdGlvbi5yZWxvYWQoKTt9IH0KPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo="))));</script>
