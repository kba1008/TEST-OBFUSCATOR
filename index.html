<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Pelawat & Kehadiran v22.9 (Auto Mode)</title>
    
    <!-- ====================================================================== -->
    <!--                 RUANGAN EDIT PENGGUNA (mantap)                -->
    <!-- ====================================================================== -->
    <script>
<!-- LIGHT (20%) -->
<script>document.write(atob("ICAgICAgICAvLyAxLiBNYXN1a2thbiBMaW5rIEdvb2dsZSBBcHBzIFNjcmlwdCAoV2ViIEFwcCBVUkwpIGRpIHNpbmkKICAgICAgICBjb25zdCBBUElfVVJMID0gJ2h0dHBzOi8vc2NyaXB0Lmdvb2dsZS5jb20vbWFjcm9zL3MvQUtmeWNieTdFWlQ0MUZXTHBETWgyN3FHZnBmSllaRW5KUHMybU1xTjBsUzhVWVNWb2dpb2ZLMFh1OHRHM3VjWDJGRHliQUJJL2V4ZWMnOyAKICAgICAgICAKICAgICAgICAvLyAyLiBLYXRhIExhbHVhbiB1bnR1ayBBZG1pbiAvIE1hbnVhbCBPdmVycmlkZQogICAgICAgIGNvbnN0IFBBU1NDT0RFID0gIjEwMTAxMCI7CiAgICAgICAgIAogICAgICAgIC8vIDMuIEtvb3JkaW5hdCBMb2thc2kgKEFtYmlsIGRhcmkgR29vZ2xlIE1hcHMpCiAgICAgICAgY29uc3QgU0NIT09MX0xBVCA9IDUuMjI3NjkxOTY1MTYwOTA2OyAKICAgICAgICBjb25zdCBTQ0hPT0xfTE5HID0gMTAwLjY5OTAzMzc3ODkwNjQzOyAKICAgICAgICAKICAgICAgICAvLyA0LiBKYXJhayBSYWRpdXMgeWFuZyBkaWJlbmFya2FuIChkYWxhbSBtZXRlcikKICAgICAgICBjb25zdCBSQURJVVNfTUVURVIgPSAxMDA7IAoKICAgICAgICAvLyA1LiBBbnRpLVNwYW0gQ2hlY2stQ2hlY2s6IEJlcmFwYSBtaW5pdCBkYWxhbSBrYXdhc2FuIGJhcnUgYXV0by1tYXN1az8gKEVsYWsgc3BhbSkKICAgICAgICBjb25zdCBNSU5JVF9BTlRJX1NQQU1fTUFTVUsgPSAwLjAwMDE7CgogICAgICAgIC8vIDYuIEF1dG8gQ2hlY2tvdXQgRGVsYXk6IEJlcmFwYSBtaW5pdCBsdWFyIGthd2FzYW4gYmFydSBhdXRvLWtlbHVhcj8gKFNtb290aCkKICAgICAgICBjb25zdCBNSU5JVF9ERUxBWV9LRUxVQVIgPSAwLjE7CgogICAgICAgIC8vIDcuIEphcmFrIFJlc2V0IEF1dG8tSW46IFBlbmdndW5hIHBlcmx1IGtlbHVhciBzZWphdWggaW5pIChtZXRlcikgdW50dWsgYWt0aWZrYW4gc2VtdWxhIGF1dG8taW4gc2VsZXBhcyBjaGVjay1vdXQKICAgICAgICBjb25zdCBSQURJVVNfUkVTRVRfQVVUT19JTiA9IDMwMDsKICAgIDwvc2NyaXB0PgogICAgPCEtLSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC0tPgoKICAgIDxsaW5rIHJlbD0ibWFuaWZlc3QiIGhyZWY9Im1hbmlmZXN0Lmpzb24iPgogICAgPG1ldGEgbmFtZT0idGhlbWUtY29sb3IiIGNvbnRlbnQ9IiMxZTNjNzIiPgogICAgPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Qb3BwaW5zOndnaHRAMzAwOzQwMDs1MDA7NjAwOzcwMDs4MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgogICAgCiAgICA8c3R5bGU+CiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnUG9wcGlucycsIHNhbnMtc2VyaWY7IGJhY2tncm91bmQ6ICNmMGYyZjU7IGNvbG9yOiAjMzMzOyBtYXJnaW46IDA7IHBhZGRpbmc6IDE1cHg7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBtaW4taGVpZ2h0OiAxMDB2aDsgfQogICAgICAgIC5jb250YWluZXIgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMDsgYm9yZGVyLXJhZGl1czogMjVweDsgd2lkdGg6IDEwMCU7IG1heC13aWR0aDogNDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsgcG9zaXRpb246IHJlbGF0aXZlOyBib3gtc2hhZG93OiAwIDE1cHggMzVweCByZ2JhKDAsMCwwLDAuMSk7IG92ZXJmbG93OiBoaWRkZW47IHBhZGRpbmctYm90dG9tOiAzMHB4OyB9CiAgICAgICAgCiAgICAgICAgLmhlYWRlci1iZyB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzE0MWUzMCwgIzI0M2I1NSk7IHBhZGRpbmc6IDE1cHggMjBweCAzMHB4IDIwcHg7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogMCAwIDI1cHggMjVweDsgYm94LXNoYWRvdzogMCAxMHB4IDI1cHggcmdiYSgwLDAsMCwwLjIpOyBtYXJnaW4tYm90dG9tOiAyNXB4OyBwb3NpdGlvbjogcmVsYXRpdmU7IH0KICAgICAgICAudG9wLWJhci1yb3cgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiAxMHB4OyBmb250LXNpemU6IDExcHg7IGNvbG9yOiAjY2ZkOGRjOyBmb250LXdlaWdodDogNDAwOyBsZXR0ZXItc3BhY2luZzogMC41cHg7IHBhZGRpbmctYm90dG9tOiAxNXB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjEpOyBtYXJnaW4tYm90dG9tOiAyMHB4OyB3aGl0ZS1zcGFjZTogbm93cmFwOyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyB9CiAgICAgICAgCiAgICAgICAgLm1haW4tdGl0bGUtYmxvY2sgeyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBhbGlnbi1pdGVtczogY2VudGVyOyB9CiAgICAgICAgLnRpdGxlLXNtYWxsIHsgZm9udC1zaXplOiAxMHB4OyBsZXR0ZXItc3BhY2luZzogM3B4OyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBjb2xvcjogIzZkZDVlZDsgbWFyZ2luLWJvdHRvbTogNXB4OyBmb250LXdlaWdodDogNjAwOyB9CiAgICAgICAgLnRpdGxlLWJpZyB7IGZvbnQtc2l6ZTogMjRweDsgZm9udC13ZWlnaHQ6IDgwMDsgdGV4dC10cmFuc2Zvcm06IHVwcGVyY2FzZTsgbGV0dGVyLXNwYWNpbmc6IDFweDsgbGluZS1oZWlnaHQ6IDEuMTsgYmFja2dyb3VuZDogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQoI2ZmZiwgI2E4YzBmZik7IC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOiB0ZXh0OyAtd2Via2l0LXRleHQtZmlsbC1jb2xvcjogdHJhbnNwYXJlbnQ7IHRleHQtc2hhZG93OiAwIDJweCAxMHB4IHJnYmEoMCwwLDAsMC4yKTsgbWFyZ2luOiAycHggMDsgfQoKICAgICAgICAuY29udGVudC1wYWRkaW5nIHsgcGFkZGluZzogMCAyMHB4OyB9CiAgICAgICAgc2VsZWN0LCBpbnB1dCwgdGV4dGFyZWEgeyB3aWR0aDogMTAwJTsgcGFkZGluZzogMTRweDsgbWFyZ2luLWJvdHRvbTogMTJweDsgYm9yZGVyOiAycHggc29saWQgI2YxZjNmNTsgYmFja2dyb3VuZDogI2Y4ZjlmYTsgYm9yZGVyLXJhZGl1czogMTJweDsgZm9udC1zaXplOiAxNHB4OyBib3gtc2l6aW5nOiBib3JkZXItYm94OyBmb250LWZhbWlseTogaW5oZXJpdDsgb3V0bGluZTogbm9uZTsgdHJhbnNpdGlvbjogMC4zczsgY29sb3I6ICMzMzM7IH0KICAgICAgICBzZWxlY3Q6Zm9jdXMsIGlucHV0OmZvY3VzIHsgYm9yZGVyLWNvbG9yOiAjMWUzYzcyOyBiYWNrZ3JvdW5kOiAjZmZmOyB9CiAgICAgICAgdGV4dGFyZWEgeyByZXNpemU6IHZlcnRpY2FsOyBtaW4taGVpZ2h0OiA4MHB4OyBkaXNwbGF5OiBub25lOyBib3JkZXI6IDJweCBzb2xpZCAjZjM5YzEyOyBiYWNrZ3JvdW5kOiAjZmZmY2Y1OyB9IC8qIEhJRERFTiBBTEFTQU4gKi8KCiAgICAgICAgLyogPT09IE5FVyBDU1MgRk9SIE5BTUUgTE9DSyAmIEFWQVRBUiA9PT0gKi8KICAgICAgICAuaW5wdXQtZ3JvdXAgeyBwb3NpdGlvbjogcmVsYXRpdmU7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IHdpZHRoOiAxMDAlOyBtYXJnaW4tYm90dG9tOiAxMnB4OyB9CiAgICAgICAgLyogVGFtYmFoIHBhZGRpbmcgcmlnaHQgc3VwYXlhIGR1YSBidXRhbmcgbXVhdCAqLwogICAgICAgIC5pbnB1dC1ncm91cCBpbnB1dCB7IG1hcmdpbi1ib3R0b206IDA7IHBhZGRpbmctcmlnaHQ6IDkwcHg7IH0KICAgICAgICAKICAgICAgICAubG9jay1idG4geyBwb3NpdGlvbjogYWJzb2x1dGU7IHJpZ2h0OiA1cHg7IHRvcDogNTAlOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7IGN1cnNvcjogcG9pbnRlcjsgYmFja2dyb3VuZDogI2VjZjBmMTsgYm9yZGVyOiBub25lOyB6LWluZGV4OiA1OyBwYWRkaW5nOiA2cHg7IGJvcmRlci1yYWRpdXM6IDUwJTsgdHJhbnNpdGlvbjogMC4yczsgd2lkdGg6IDM1cHg7IGhlaWdodDogMzVweDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IH0KICAgICAgICAubG9jay1idG46aG92ZXIgeyBiYWNrZ3JvdW5kOiAjZGZlNmU5OyB9CiAgICAgICAgLmxvY2stYnRuOmFjdGl2ZSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKSBzY2FsZSgwLjkpOyB9CiAgICAgICAgLmxvY2stYnRuOmRpc2FibGVkIHsgb3BhY2l0eTogMC41OyBjdXJzb3I6IG5vdC1hbGxvd2VkOyB9CiAgICAgICAgCiAgICAgICAgLmF2YXRhci1idG4geyByaWdodDogNDhweDsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IH0gLyogQnV0YW5nIGF2YXRhciBzZWJlbGFoIGJ1dGFuZyBsb2NrICovCgogICAgICAgIC8qIFN0eWxlIEtoYXMgYmlsYSBsb2NrIGFrdGlmIChLdW5pbmcpICovCiAgICAgICAgLmJ0bi15ZWxsb3cgeyBiYWNrZ3JvdW5kOiAjZjFjNDBmICFpbXBvcnRhbnQ7IGJveC1zaGFkb3c6IDAgMCAxMHB4IHJnYmEoMjQxLCAxOTYsIDE1LCAwLjUpOyBib3JkZXI6IDJweCBzb2xpZCAjZjM5YzEyOyB9CgogICAgICAgIC8qIFN0eWxlIE1vZGFsIEF2YXRhciBHcmlkICovCiAgICAgICAgLmF2YXRhci1ncmlkIHsgZGlzcGxheTogZ3JpZDsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiByZXBlYXQoNSwgMWZyKTsgZ2FwOiAxMHB4OyBtYXgtaGVpZ2h0OiAzMDBweDsgb3ZlcmZsb3cteTogYXV0bzsgcGFkZGluZzogMTBweDsgfQogICAgICAgIC5hdmF0YXItb3B0aW9uIHsgd2lkdGg6IDEwMCU7IGFzcGVjdC1yYXRpbzogMS8xOyBjdXJzb3I6IHBvaW50ZXI7IGJvcmRlci1yYWRpdXM6IDUwJTsgYm9yZGVyOiAycHggc29saWQgdHJhbnNwYXJlbnQ7IHRyYW5zaXRpb246IDAuMnM7IHBhZGRpbmc6IDJweDsgYmFja2dyb3VuZDogI2Y4ZjlmYTsgfQogICAgICAgIC5hdmF0YXItb3B0aW9uOmhvdmVyIHsgYm9yZGVyLWNvbG9yOiAjMWUzYzcyOyBiYWNrZ3JvdW5kOiAjZThmNWU5OyB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7IH0KICAgICAgICAuYXZhdGFyLW9wdGlvbi5zZWxlY3RlZCB7IGJvcmRlci1jb2xvcjogIzI3YWU2MDsgYmFja2dyb3VuZDogI2Q0ZWRkYTsgYm94LXNoYWRvdzogMCAwIDEwcHggcmdiYSgzOSwgMTc0LCA5NiwgMC4zKTsgfQogICAgICAgIC5hdmF0YXItb3B0aW9uIGltZyB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IG9iamVjdC1maXQ6IGNvbnRhaW47IH0KICAgICAgICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KCiAgICAgICAgLmJ0biB7IHdpZHRoOiAxMDAlOyBwYWRkaW5nOiAxNnB4OyBiYWNrZ3JvdW5kOiAjMWUzYzcyOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogMTJweDsgZm9udC1zaXplOiAxNXB4OyBmb250LXdlaWdodDogNjAwOyBjdXJzb3I6IHBvaW50ZXI7IG1hcmdpbi10b3A6IDhweDsgYm94LXNoYWRvdzogMCA0cHggMTBweCByZ2JhKDMwLCA2MCwgMTE0LCAwLjIpOyB0cmFuc2l0aW9uOiAwLjJzOyBsZXR0ZXItc3BhY2luZzogMC41cHg7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBnYXA6IDhweDsgfQogICAgICAgIC5idG46YWN0aXZlIHsgdHJhbnNmb3JtOiBzY2FsZSgwLjk4KTsgfQogICAgICAgIC5idG46ZGlzYWJsZWQgeyBiYWNrZ3JvdW5kOiAjYmRjM2M3OyBjdXJzb3I6IG5vdC1hbGxvd2VkOyBib3gtc2hhZG93OiBub25lOyBvcGFjaXR5OiAwLjc7IH0KICAgICAgICAuYnRuLWtlbHVhciB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgI2NiMmQzZSwgI2VmNDczYSk7IH0KICAgICAgICAuYnRuLXBlbGF3YXQgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICMxMTk5OGUsICMzOGVmN2QpOyBtYXJnaW4tdG9wOiAxNXB4OyB9IAogICAgICAgIC5idG4tY2FuY2VsIHsgYmFja2dyb3VuZDogIzdmOGM4ZDsgbWFyZ2luLXRvcDogMTBweDsgfQogICAgICAgIAogICAgICAgICNkYXNoYm9hcmRQYW5lbCB7IGRpc3BsYXk6IG5vbmU7IGJhY2tncm91bmQ6ICNmZmY7IHBhZGRpbmc6IDIwcHg7IGJvcmRlci1yYWRpdXM6IDE1cHg7IGJvcmRlcjogMXB4IHNvbGlkICNlMWU0ZTg7IG1hcmdpbi1ib3R0b206IDIwcHg7IGJveC1zaGFkb3c6IDAgNXB4IDE1cHggcmdiYSgwLDAsMCwwLjAzKTsgfQogICAgICAgIC51c2VyLXdlbGNvbWUgeyBmb250LXNpemU6IDE4cHg7IGZvbnQtd2VpZ2h0OiA3MDA7IGNvbG9yOiAjMWUzYzcyOyBtYXJnaW4tYm90dG9tOiAycHg7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBnYXA6IDhweDt9CiAgICAgICAgLmxvY2tlZC1tc2cgeyBmb250LXNpemU6IDExcHg7IGNvbG9yOiAjOTVhNWE2OyBtYXJnaW4tYm90dG9tOiAxNXB4OyB9CiAgICAgICAgCiAgICAgICAgI3BlbGF3YXRQYW5lbCB7IGRpc3BsYXk6IG5vbmU7IGJvcmRlcjogMnB4IGRhc2hlZCAjMjdhZTYwOyBwYWRkaW5nOiAxNXB4OyBib3JkZXItcmFkaXVzOiAxNXB4OyBiYWNrZ3JvdW5kOiAjZjBmZGY0OyBtYXJnaW4tYm90dG9tOiAyMHB4OyB9CiAgICAgICAgCiAgICAgICAgLyogU1RZTE8gR0lBTlQgQ0FNRVJBIENTUyAqLwogICAgICAgIC5naWFudC1jYW0tYnRuIHsgCiAgICAgICAgICAgIHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDE2MHB4OyAKICAgICAgICAgICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzEzNGU1ZSwgIzcxYjI4MCk7IAogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4OyAKICAgICAgICAgICAgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IAogICAgICAgICAgICBib3gtc2hhZG93OiAwIDEwcHggMjBweCByZ2JhKDAsMCwwLDAuMTUpOyAKICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOyB0cmFuc2l0aW9uOiAwLjJzOyBib3JkZXI6IDJweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMyk7CiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsgb3ZlcmZsb3c6IGhpZGRlbjsKICAgICAgICB9CiAgICAgICAgLmdpYW50LWNhbS1idG46YWN0aXZlIHsgdHJhbnNmb3JtOiBzY2FsZSgwLjk2KTsgfQogICAgICAgIC5naWFudC1jYW0taWNvbiB7IHdpZHRoOiA3MHB4OyBoZWlnaHQ6IDcwcHg7IG1hcmdpbi1ib3R0b206IDEwcHg7IGZpbHRlcjogZHJvcC1zaGFkb3coMCAycHggNXB4IHJnYmEoMCwwLDAsMC4yKSk7IH0KICAgICAgICAuZ2lhbnQtY2FtLXRleHQgeyBmb250LXNpemU6IDEycHg7IGZvbnQtd2VpZ2h0OiA4MDA7IGNvbG9yOiB3aGl0ZTsgbGV0dGVyLXNwYWNpbmc6IDEuNXB4OyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyB9CiAgICAgICAgLmdpYW50LXB1bHNlIHsgYW5pbWF0aW9uOiBwdWxzZUdsb3cgMnMgaW5maW5pdGU7IH0KICAgICAgICBAa2V5ZnJhbWVzIHB1bHNlR2xvdyB7IDAlIHsgYm94LXNoYWRvdzogMCAwIDAgMCByZ2JhKDExMywgMTc4LCAxMjgsIDAuNCk7IH0gNzAlIHsgYm94LXNoYWRvdzogMCAwIDAgMTBweCByZ2JhKDExMywgMTc4LCAxMjgsIDApOyB9IDEwMCUgeyBib3gtc2hhZG93OiAwIDAgMCAwIHJnYmEoMTEzLCAxNzgsIDEyOCwgMCk7IH0gfQoKICAgICAgICAjcHJldmlld0ltZyB7IHdpZHRoOiAxMDAlOyBtYXJnaW4tdG9wOiAxMHB4OyBib3JkZXItcmFkaXVzOiAxMHB4OyBkaXNwbGF5OiBub25lOyBib3JkZXI6IDJweCBzb2xpZCAjMzMzOyBtYXgtaGVpZ2h0OiAyNTBweDsgb2JqZWN0LWZpdDogY292ZXI7IH0KICAgICAgICAKICAgICAgICAubGlzdC1oZWFkZXIgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IG1hcmdpbi10b3A6IDI1cHg7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjZjFmMWYxOyBwYWRkaW5nLWJvdHRvbTogMTBweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgfQogICAgICAgIC5saXN0LWhlYWRlciBzcGFuIHsgZm9udC13ZWlnaHQ6IDcwMDsgY29sb3I6ICMxZTNjNzI7IGZvbnQtc2l6ZTogMTRweDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA1cHg7IH0KICAgICAgICAubGlzdC1jb250YWluZXIgeyB0ZXh0LWFsaWduOiBsZWZ0OyBtYXJnaW4tdG9wOiA1cHg7IG1heC1oZWlnaHQ6IDMwMHB4OyBvdmVyZmxvdy15OiBhdXRvOyB9CiAgICAgICAgCiAgICAgICAgLnVzZXItY2FyZCB7IGJhY2tncm91bmQ6ICNmZmY7IHBhZGRpbmc6IDEycHg7IGJvcmRlcjogMXB4IHNvbGlkICNmMGYwZjA7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMWUzYzcyOyBib3JkZXItcmFkaXVzOiA4cHg7IG1hcmdpbi1ib3R0b206IDhweDsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wMyk7IH0KICAgICAgICAudXNlci1jYXJkLm9mZmxpbmUtaXRlbSB7IGJvcmRlci1sZWZ0OiA0cHggc29saWQgI2U2N2UyMjsgYmFja2dyb3VuZDogI2ZmZmNmNTsgfQogICAgICAgIC51c2VyLWluZm8geyBmbGV4LWdyb3c6IDE7IG1pbi13aWR0aDogMDsgcGFkZGluZy1yaWdodDogOHB4OyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgfQogICAgICAgIC51c2VyLWluZm8gc3Ryb25nIHsgZm9udC1zaXplOiAxM3B4OyBjb2xvcjogIzJjM2U1MDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgb3ZlcmZsb3c6IGhpZGRlbjsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7IH0KICAgICAgICAudXNlci1kZXRhaWxzIHsgZm9udC1zaXplOiAxMXB4OyBjb2xvcjogIzdmOGM4ZDsgbWFyZ2luLXRvcDogM3B4OyBkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBnYXA6IDVweDsgfQogICAgICAgIAogICAgICAgIC8qIFNUWUxFIEpBTSBSQU5ESUsgKi8KICAgICAgICAubGl2ZS10aW1lciB7IAogICAgICAgICAgICBjb2xvcjogI2QzNTQwMDsgCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7IAogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgQ291cmllciwgbW9ub3NwYWNlOyAKICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZmZjVlNjsgCiAgICAgICAgICAgIHBhZGRpbmc6IDJweCA4cHg7IAogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7IAogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjZmFlNWQzOyAKICAgICAgICAgICAgbWluLXdpZHRoOiA3MHB4OyAKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyAKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXg7CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgICAgIGdhcDogNHB4OwogICAgICAgICAgICBmb250LXNpemU6IDExcHg7IAogICAgICAgIH0KCiAgICAgICAgLmxpc3QtYWN0aW9ucyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogNXB4OyBhbGlnbi1pdGVtczogY2VudGVyOyBmbGV4LXNocmluazogMDsgfQogICAgICAgIC5pY29uLWJ0biB7IGN1cnNvcjogcG9pbnRlcjsgZm9udC1zaXplOiAxNHB4OyB3aWR0aDogMjhweDsgaGVpZ2h0OiAyOHB4OyBib3JkZXItcmFkaXVzOiA2cHg7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBib3JkZXI6IDFweCBzb2xpZCAjZWVlOyB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDAuMnM7IH0KICAgICAgICAuaWNvbi1idG46aG92ZXIgeyBiYWNrZ3JvdW5kOiAjZTJlNmVhOyB9CgogICAgICAgICNzY2hlZHVsZUluZm8geyBkaXNwbGF5OiBub25lOyBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgcGFkZGluZzogMDsgbWFyZ2luLWJvdHRvbTogMTVweDsgdGV4dC1hbGlnbjogY2VudGVyOyBhbmltYXRpb246IGZhZGVJbiAwLjVzOyB9CiAgICAgICAgLnNjaGVkdWxlLW1pbmltYWwgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgZ2FwOiAxMHB4OyBhbGlnbi1pdGVtczogY2VudGVyOyB9CiAgICAgICAgLnRpbWUtcGlsbCB7IGJhY2tncm91bmQ6ICNmMWYzZjU7IHBhZGRpbmc6IDZweCAxMnB4OyBib3JkZXItcmFkaXVzOiAyMHB4OyBmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiA2MDA7IGRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNXB4OyBib3JkZXI6IDFweCBzb2xpZCAjZTllY2VmOyB9CiAgICAgICAgCiAgICAgICAgQGtleWZyYW1lcyBmYWRlSW4geyBmcm9tIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01cHgpOyB9IHRvIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9IH0KCiAgICAgICAgI2ltYWdlTW9kYWwgeyBkaXNwbGF5OiBub25lOyBwb3NpdGlvbjogZml4ZWQ7IHotaW5kZXg6IDk5OTk7IGxlZnQ6IDA7IHRvcDogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgb3ZlcmZsb3c6IGF1dG87IGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC45KTsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IH0KICAgICAgICAubW9kYWwtY29udGVudCB7IG1hcmdpbjogYXV0bzsgZGlzcGxheTogYmxvY2s7IG1heC13aWR0aDogOTAlOyBtYXgtaGVpZ2h0OiA4MCU7IGJvcmRlci1yYWRpdXM6IDEwcHg7IGJvcmRlcjogMnB4IHNvbGlkIHdoaXRlOyB9CiAgICAgICAgLmNsb3NlLW1vZGFsIHsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDIwcHg7IHJpZ2h0OiAzNXB4OyBjb2xvcjogI2YxZjFmMTsgZm9udC1zaXplOiA0MHB4OyBmb250LXdlaWdodDogYm9sZDsgY3Vyc29yOiBwb2ludGVyOyB9CgogICAgICAgICN3YXJuaW5nQm94IHsgZGlzcGxheTogbm9uZTsgcG9zaXRpb246IGZpeGVkOyBib3R0b206IDA7IGxlZnQ6IDA7IHdpZHRoOiAxMDAlOyBiYWNrZ3JvdW5kOiAjYzAzOTJiOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDE1cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgei1pbmRleDogOTk5OTsgZm9udC13ZWlnaHQ6IGJvbGQ7IGJveC1zaGFkb3c6IDAgLTVweCAxNXB4IHJnYmEoMCwwLDAsMC4yKTsgYW5pbWF0aW9uOiBwdWxzZVdhcm4gMXMgaW5maW5pdGU7IH0KICAgICAgICBAa2V5ZnJhbWVzIHB1bHNlV2FybiB7IDAlIHsgYmFja2dyb3VuZDogI2MwMzkyYjsgfSA1MCUgeyBiYWNrZ3JvdW5kOiAjZTc0YzNjOyB9IDEwMCUgeyBiYWNrZ3JvdW5kOiAjYzAzOTJiOyB9IH0KICAgICAgICAKICAgICAgICAjbG9hZGluZ0NvbmZpZyB7IGZvbnQtc2l6ZTogMTFweDsgY29sb3I6ICNlNjdlMjI7IGRpc3BsYXk6IG5vbmU7IG1hcmdpbi1ib3R0b206IDVweDsgZm9udC1zdHlsZTogaXRhbGljOyB9CiAgICAgICAgI3N0YXR1c1RleHQgeyBmb250LXNpemU6IDExcHg7IGZvbnQtd2VpZ2h0OiA2MDA7IG1hcmdpbi1ib3R0b206IDE1cHg7IGNvbG9yOiAjOTVhNWE2OyBiYWNrZ3JvdW5kOiAjZjhmOWZhOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHBhZGRpbmc6IDRweCAxMnB4OyBib3JkZXItcmFkaXVzOiAxNXB4OyBkaXNwbGF5OiBpbmxpbmUtZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA1cHg7IH0KCiAgICAgICAgLyogLS0tIDNEIElDT05TIFNUWUxFUyAtLS0gKi8KICAgICAgICAuaWNvbi0zZC1taW5pIHsgd2lkdGg6IDE2cHg7IGhlaWdodDogMTZweDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgbWFyZ2luLXJpZ2h0OiAycHg7IGZpbHRlcjogZHJvcC1zaGFkb3coMCAxcHggMXB4IHJnYmEoMCwwLDAsMC4yKSk7IH0KICAgICAgICAuaWNvbi0zZC1zdGQgeyB3aWR0aDogMjJweDsgaGVpZ2h0OiAyMnB4OyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyBtYXJnaW4tcmlnaHQ6IDVweDsgZmlsdGVyOiBkcm9wLXNoYWRvdygwIDJweCAycHggcmdiYSgwLDAsMCwwLjEpKTsgfQogICAgICAgIC5pY29uLTNkLWxnIHsgd2lkdGg6IDMycHg7IGhlaWdodDogMzJweDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTsgfQogICAgICAgIC5pY29uLTNkLXhsIHsgd2lkdGg6IDY0cHg7IGhlaWdodDogNjRweDsgbWFyZ2luLWJvdHRvbTogMTBweDsgfQogICAgICAgIAogICAgICAgIEBrZXlmcmFtZXMgc3BpbjNkIHsgMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfSAxMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMzYwZGVnKTsgfSB9CiAgICAgICAgLnNwaW4tM2QgeyBhbmltYXRpb246IHNwaW4zZCAycyBsaW5lYXIgaW5maW5pdGU7IH0KCiAgICAgICAgI2N1c3RvbU1vZGFsLCAjYXZhdGFyTW9kYWxDb250YWluZXIgeyBkaXNwbGF5OiBub25lOyBwb3NpdGlvbjogZml4ZWQ7IHotaW5kZXg6IDEwMDAwOyBsZWZ0OiAwOyB0b3A6IDA7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC42KTsgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDVweCk7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbmltYXRpb246IGZhZGVJbiAwLjNzOyB9CiAgICAgICAgLmN1c3RvbS1tb2RhbC1jb250ZW50IHsgYmFja2dyb3VuZDogd2hpdGU7IHBhZGRpbmc6IDMwcHggMjVweDsgYm9yZGVyLXJhZGl1czogMjBweDsgd2lkdGg6IDg1JTsgbWF4LXdpZHRoOiAzNTBweDsgdGV4dC1hbGlnbjogY2VudGVyOyBib3gtc2hhZG93OiAwIDIwcHggNTBweCByZ2JhKDAsMCwwLDAuMyk7IHRyYW5zZm9ybTogc2NhbGUoMC45KTsgYW5pbWF0aW9uOiBwb3BVcCAwLjNzIGZvcndhcmRzOyB9CiAgICAgICAgQGtleWZyYW1lcyBwb3BVcCB7IHRvIHsgdHJhbnNmb3JtOiBzY2FsZSgxKTsgfSB9CiAgICAgICAgLm1vZGFsLWljb24tdG9wIHsgZm9udC1zaXplOiA1MHB4OyBtYXJnaW4tYm90dG9tOiAxNXB4OyBkaXNwbGF5OiBibG9jazsgfQogICAgICAgIC5tb2RhbC10aXRsZSB7IGZvbnQtc2l6ZTogMThweDsgZm9udC13ZWlnaHQ6IDcwMDsgY29sb3I6ICMyYzNlNTA7IG1hcmdpbi1ib3R0b206IDEwcHg7IH0KICAgICAgICAubW9kYWwtbXNnIHsgZm9udC1zaXplOiAxM3B4OyBjb2xvcjogIzU1NTsgbWFyZ2luLWJvdHRvbTogMjBweDsgbGluZS1oZWlnaHQ6IDEuNTsgfQogICAgICAgIC5tb2RhbC1idG4tcm93IHsgZGlzcGxheTogZmxleDsgZ2FwOiAxMHB4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgfQogICAgICAgIC5tb2RhbC1idG4geyBmbGV4OiAxOyBwYWRkaW5nOiAxMnB4OyBib3JkZXItcmFkaXVzOiAxMHB4OyBib3JkZXI6IG5vbmU7IGZvbnQtd2VpZ2h0OiA2MDA7IGN1cnNvcjogcG9pbnRlcjsgZm9udC1zaXplOiAxM3B4OyB9CiAgICAgICAgLmJ0bi1vayB7IGJhY2tncm91bmQ6ICMxZTNjNzI7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5idG4tY2FuY2VsLW1vZGFsIHsgYmFja2dyb3VuZDogI2VjZjBmMTsgY29sb3I6ICM3ZjhjOGQ7IH0KCiAgICAgICAgLyogU3RhdHVzIEJhciB1bnR1ayBPZmZsaW5lL1N5bmMgKi8KICAgICAgICAjc3luY1N0YXR1c0JhciB7IGRpc3BsYXk6IG5vbmU7IHBvc2l0aW9uOiBmaXhlZDsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDogMTAwJTsgcGFkZGluZzogMTBweDsgdGV4dC1hbGlnbjogY2VudGVyOyB6LWluZGV4OiAxMDAwMTsgZm9udC1zaXplOiAxMnB4OyBmb250LXdlaWdodDogNjAwOyBjb2xvcjogd2hpdGU7IGJveC1zaGFkb3c6IDAgMnB4IDEwcHggcmdiYSgwLDAsMCwwLjIpOyB9CiAgICAgICAgCiAgICAgICAgI2F1dG9Nb2RlSW5kaWNhdG9yIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0LCAjNmExMWNiLCAjMjU3NWZjKTsgY29sb3I6IHdoaXRlOyBwYWRkaW5nOiA1cHg7IGZvbnQtc2l6ZTogMTBweDsgZm9udC13ZWlnaHQ6IDcwMDsgdGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tYm90dG9tOiAxNXB4OyBib3JkZXItcmFkaXVzOiA1cHg7IGJveC1zaGFkb3c6IDAgM3B4IDZweCByZ2JhKDAsMCwwLDAuMSk7IGRpc3BsYXk6IG5vbmU7IH0KCiAgICA8L3N0eWxlPgo8L2hlYWQ+Cjxib2R5IG9uY29udGV4dG1lbnU9InJldHVybiBmYWxzZTsiPiAKCiAgICA8ZGl2IGlkPSJzeW5jU3RhdHVzQmFyIj48L2Rpdj4KICAgIDxkaXYgaWQ9Indhcm5pbmdCb3giPiBBTUFSQU4hIEtFTFVBUiBaT04uPGJyPkFVVE8tQ0hFQ0tPVVQgREFMQU0gPHNwYW4gaWQ9ImNvdW50RG93biI+MTA8L3NwYW4+UzwvZGl2PgoKICAgIDxkaXYgaWQ9ImN1c3RvbU1vZGFsIj4KICAgICAgICA8ZGl2IGNsYXNzPSJjdXN0b20tbW9kYWwtY29udGVudCI+CiAgICAgICAgICAgIDxzcGFuIGlkPSJtb2RhbEljb24iIGNsYXNzPSJtb2RhbC1pY29uLXRvcCI+PC9zcGFuPgogICAgICAgICAgICA8ZGl2IGlkPSJtb2RhbFRpdGxlIiBjbGFzcz0ibW9kYWwtdGl0bGUiPlRhanVrPC9kaXY+CiAgICAgICAgICAgIDxkaXYgaWQ9Im1vZGFsTXNnIiBjbGFzcz0ibW9kYWwtbXNnIj5NZXNlaiBkaSBzaW5pLi4uPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWJ0bi1yb3ciIGlkPSJtb2RhbEJ0blJvdyI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJtb2RhbC1idG4gYnRuLW9rIiBvbmNsaWNrPSJjbG9zZUN1c3RvbU1vZGFsKCkiPkZhaGFtPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPCEtLSBNT0RBTCBQSUxJSCBBVkFUQVIgLS0+CiAgICA8ZGl2IGlkPSJhdmF0YXJNb2RhbENvbnRhaW5lciI+CiAgICAgICAgPGRpdiBjbGFzcz0iY3VzdG9tLW1vZGFsLWNvbnRlbnQiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC10aXRsZSI+UElMSUggQVZBVEFSIEFOREE8L2Rpdj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtbXNnIj5QaWxpaCBpa29uIHlhbmcgc2VzdWFpIGRlbmdhbiBnYXlhIGFuZGEuPC9kaXY+CiAgICAgICAgICAgIDxkaXYgaWQ9ImF2YXRhckdyaWQiIGNsYXNzPSJhdmF0YXItZ3JpZCI+CiAgICAgICAgICAgICAgICA8IS0tIElDT05TIElOSkVDVEVEIFZJQSBKUyAtLT4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWJ0bi1yb3ciIHN0eWxlPSJtYXJnaW4tdG9wOjE1cHg7Ij4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9Im1vZGFsLWJ0biBidG4tY2FuY2VsLW1vZGFsIiBvbmNsaWNrPSJjbG9zZUF2YXRhck1vZGFsKCkiPlR1dHVwPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0iaW1hZ2VNb2RhbCI+CiAgICAgICAgPHNwYW4gY2xhc3M9ImNsb3NlLW1vZGFsIiBvbmNsaWNrPSJjbG9zZU1vZGFsKCkiPiZ0aW1lczs8L3NwYW4+CiAgICAgICAgPGltZyBjbGFzcz0ibW9kYWwtY29udGVudCIgaWQ9ImltZ0Z1bGwiPgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIj4KICAgICAgICAKICAgICAgICA8ZGl2IGNsYXNzPSJoZWFkZXItYmciPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0b3AtYmFyLXJvdyI+CiAgICAgICAgICAgICAgICA8c3Bhbj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDI1MC80MjUwMzIwLnBuZyIgY2xhc3M9Imljb24tM2QtbWluaSI+IAogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJkYXRlRGlzcGxheSI+LS0vLS0vLS08L3NwYW4+CiAgICAgICAgICAgICAgICA8L3NwYW4+IAogICAgICAgICAgICAgICAgPHNwYW4+fDwvc3Bhbj4gCiAgICAgICAgICAgICAgICA8c3Bhbj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMjA4OC8yMDg4NjE3LnBuZyIgY2xhc3M9Imljb24tM2QtbWluaSI+IAogICAgICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJjbG9ja0Rpc3BsYXkiPi0tOi0tPC9zcGFuPgogICAgICAgICAgICAgICAgPC9zcGFuPiAKICAgICAgICAgICAgICAgIDxzcGFuPnw8L3NwYW4+IAogICAgICAgICAgICAgICAgPHNwYW4+CiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQzNTgvNDM1ODY2Ny5wbmciIGNsYXNzPSJpY29uLTNkLW1pbmkiPiAKICAgICAgICAgICAgICAgICAgICA8c3BhbiBpZD0iaGlqcmlEaXNwbGF5Ij4uLi48L3NwYW4+CiAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBjbGFzcz0ibWFpbi10aXRsZS1ibG9jayI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ0aXRsZS1zbWFsbCI+U0lTVEVNIFBFTkdVUlVTQU48L2Rpdj4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InRpdGxlLWJpZyI+RS1IQURJUjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idGl0bGUtYmlnIj5TSyBTRUxBTUEgKEspPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICA8ZGl2IGNsYXNzPSJjb250ZW50LXBhZGRpbmciPgogICAgICAgICAgICA8ZGl2IGlkPSJhdXRvTW9kZUluZGljYXRvciI+TU9ERSBBVVRPPC9kaXY+CiAgICAgICAgICAgIAogICAgICAgICAgICA8ZGl2IGlkPSJzdGF0dXNUZXh0Ij4KICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC85MDc3LzkwNzc5NzUucG5nIiBjbGFzcz0iaWNvbi0zZC1taW5pIHNwaW4tM2QiPiAKICAgICAgICAgICAgICAgIE1lbmNhcmkgR1BTLi4uCiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBpZD0iZGFzaGJvYXJkUGFuZWwiPgogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InVzZXItd2VsY29tZSI+CiAgICAgICAgICAgICAgICAgICAgPGltZyBpZD0idXNlckF2YXRhckRhc2giIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDE0MC80MTQwMDQ3LnBuZyIgY2xhc3M9Imljb24tM2QtbGciPiAKICAgICAgICAgICAgICAgICAgICBIYWksIDxzcGFuIGlkPSJzZXNzaW9uTmFtZSI+LS08L3NwYW4+CiAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJsb2NrZWQtbXNnIj5BdXRvIENoZWNrLUluIEJlcmpheWEuPC9kaXY+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDxkaXYgaWQ9ImRhc2hib2FyZFNjaGVkdWxlIiBzdHlsZT0iZm9udC1zaXplOjEycHg7IGNvbG9yOiMyYzNlNTA7IGJhY2tncm91bmQ6I2ZmZjNjZDsgcGFkZGluZzoxMHB4OyBib3JkZXItcmFkaXVzOjhweDsgbWFyZ2luLWJvdHRvbToxNXB4OyBkaXNwbGF5Om5vbmU7IGJvcmRlcjogMXB4IHNvbGlkICNmZmVlYmE7Ij4KICAgICAgICAgICAgICAgICAgICBXYWt0dSBQdWxhbmcgUmFzbWk6IDxzcGFuIGlkPSJ1c2VyRXhpdFRpbWUiIHN0eWxlPSJmb250LXdlaWdodDpib2xkOyI+LS06LS08L3NwYW4+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8cCBpZD0iZHluYW1pY1N0YXR1cyIgc3R5bGU9Im1hcmdpbjowIDAgMTVweCAwOyBmb250LXNpemU6MTFweDsgY29sb3I6IzI3YWU2MDsgZm9udC13ZWlnaHQ6NzAwOyBsZXR0ZXItc3BhY2luZzowLjVweDsgdGV4dC10cmFuc2Zvcm06dXBwZXJjYXNlOyI+U1RBVFVTOiBTRURBTkcgQkVSVFVHQVM8L3A+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwhLS0gSElEREVOIEFMQVNBTiBJTlBVVCBGT1IgQVVUTyBNT0RFIC0tPgogICAgICAgICAgICAgICAgPHRleHRhcmVhIGlkPSJhbGFzYW5LZWx1YXIiIHN0eWxlPSJkaXNwbGF5Om5vbmU7IiBwbGFjZWhvbGRlcj0iTW9ob24gbnlhdGFrYW4gc2ViYWIgcHVsYW5nIGF3YWwgdW50dWsgbWFrbHVtYW4gcGVudGFkYmlyLi4uIj48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5LZWx1YXIiIGNsYXNzPSJidG4gYnRuLWtlbHVhciIgb25jbGljaz0iaGFudGFyS2VsdWFyKGZhbHNlKSI+CiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzM1ODAvMzU4MDE1NC5wbmciIGNsYXNzPSJpY29uLTNkLXN0ZCI+IERBRlRBUiBLRUxVQVIgKE1BTlVBTCkKICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJtYXJnaW4tdG9wOiAyMHB4OyBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsgcGFkZGluZy10b3A6IDE1cHg7Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLXBlbGF3YXQiIG9uY2xpY2s9InNob3dQZWxhd2F0Rm9ybSgpIiBzdHlsZT0iZm9udC1zaXplOjEzcHg7IHBhZGRpbmc6IDEycHg7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzMxMzUvMzEzNTc2OC5wbmciIGNsYXNzPSJpY29uLTNkLXN0ZCI+IEJBTlRVIERBRlRBUiBQRUxBV0FUCiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IGlkPSJkZWZhdWx0Rm9ybSI+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJsb2FkaW5nQ29uZmlnIj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMTg5LzE4OTc5Mi5wbmciIGNsYXNzPSJpY29uLTNkLW1pbmkgc3Bpbi0zZCI+IFNlZGFuZyBtZW55ZW1hayBqYWR1YWwgdGVya2luaS4uLgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGlkPSJzY2hlZHVsZUluZm8iPjwvZGl2PgogICAgICAgICAgICAgICAgPHNlbGVjdCBpZD0ia2F0ZWdvcmkiIG9uY2hhbmdlPSJjaGVja0thdGVnb3JpKCk7IHVwZGF0ZVNjaGVkdWxlSW5mbygpOyI+CiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIiBkaXNhYmxlZCBzZWxlY3RlZD4tLSBQSUxJSCBLQVRFR09SSSAtLTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkdVUlUiPkdVUlU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJBS1AiPkFLUDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IktFQkVSU0lIQU4iPktFQkVSU0lIQU48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJQRUxBV0FUIj5QRUxBV0FUIChBV0FNKTwvb3B0aW9uPgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDwhLS0gSU5QVVQgTkFNQSBXSVRIIExPQ0sgJiBBVkFUQVIgQlVUVE9OUyAtLT4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9ImlucHV0LWdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Im5hbWEiIHBsYWNlaG9sZGVyPSJOQU1BIFBFTlVIIChIVVJVRiBCRVNBUikiIHN0eWxlPSJ0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2UiPgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIDwhLS0gQVZBVEFSIEJVVFRPTiAtLT4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJhdmF0YXJCdG4iIGNsYXNzPSJsb2NrLWJ0biBhdmF0YXItYnRuIiBvbmNsaWNrPSJvcGVuQXZhdGFyTW9kYWwoKSIgdGl0bGU9IlBpbGloIEF2YXRhciI+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgaWQ9ImN1cnJlbnRBdmF0YXJNaW5pIiBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQxNDAvNDE0MDA0OC5wbmciIGNsYXNzPSJpY29uLTNkLW1pbmkiPgogICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPgoKICAgICAgICAgICAgICAgICAgICA8IS0tIExPQ0sgQlVUVE9OIC0tPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9ImxvY2tCdG4iIGNsYXNzPSJsb2NrLWJ0biIgb25jbGljaz0idG9nZ2xlTG9ja05hbWUoKSIgdGl0bGU9Ikt1bmNpIE5hbWEiPgogICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMjg4OS8yODg5Njc2LnBuZyIgY2xhc3M9Imljb24tM2QtbWluaSIgaWQ9ImxvY2tJY29uSW1nIiBzdHlsZT0iZmlsdGVyOm9wYWNpdHkoMC40KSI+CiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPCEtLSBISURERU4gQUxBU0FOIElOUFVUIEZPUiBBVVRPIE1PREUgLS0+CiAgICAgICAgICAgICAgICA8dGV4dGFyZWEgaWQ9ImFsYXNhbk1hc3VrIiBzdHlsZT0iZGlzcGxheTpub25lOyIgcGxhY2Vob2xkZXI9Ik1hYWYsIGFuZGEgbGV3YXQgc2VkaWtpdC4gTW9ob24gbnlhdGFrYW4gc2ViYWI6Ij48L3RleHRhcmVhPgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPSJmb250LXNpemU6MTBweDsgY29sb3I6I2U2N2UyMjsgbWFyZ2luLWJvdHRvbToxMHB4OyI+U2lsYSB0ZWthbiAnS1VOQ0knIE5hbWEgJiBLYXRlZ29yaSA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5NYWluU3VibWl0IiBjbGFzcz0iYnRuIiBvbmNsaWNrPSJoYW50YXJNYXN1ayhmYWxzZSkiPgogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC85NDAyLzk0MDIzNDIucG5nIiBjbGFzcz0iaWNvbi0zZC1zdGQiPiBEQUZUQVIgTUFTVUsgKE1BTlVBTCkKICAgICAgICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgaWQ9InBlbGF3YXRQYW5lbCI+CiAgICAgICAgICAgICAgICA8aDMgc3R5bGU9ImNvbG9yOiMyN2FlNjA7IG1hcmdpbjowIDAgNXB4IDA7IGRpc3BsYXk6ZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyOyBnYXA6NXB4OyI+CiAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzM2ODcvMzY4NzQxNi5wbmciIGNsYXNzPSJpY29uLTNkLWxnIj4gTU9EIFBFTEFXQVQKICAgICAgICAgICAgICAgIDwvaDM+CiAgICAgICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOjExcHg7IGNvbG9yOiM2NjY7IG1hcmdpbi1ib3R0b206MTVweDsiPlNpbGEgYW1iaWwgZ2FtYmFyICYgaXNpIG5hbWEgcGVsYXdhdC48L3A+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Im5hbWFQZWxhd2F0SW5wdXQiIHBsYWNlaG9sZGVyPSJOQU1BIFBFTlVIIFBFTEFXQVQiIHN0eWxlPSJ0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2U7Ij4KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luOiAxNXB4IDA7Ij4KICAgICAgICAgICAgICAgICAgICA8bGFiZWwgY2xhc3M9ImdpYW50LWNhbS1idG4gZ2lhbnQtcHVsc2UiPgogICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMzY4Ny8zNjg3NDE2LnBuZyIgY2xhc3M9ImdpYW50LWNhbS1pY29uIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImdpYW50LWNhbS10ZXh0Ij5TTkFQIEZPVE88L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJmaWxlIiBhY2NlcHQ9ImltYWdlLyoiIGNhcHR1cmU9ImVudmlyb25tZW50IiBzdHlsZT0iZGlzcGxheTpub25lIiBvbmNoYW5nZT0icHJvY2Vzc0ltYWdlKHRoaXMpIj4KICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgPGltZyBpZD0icHJldmlld0ltZyI+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0iaGlkZGVuIiBpZD0iYmFzZTY0Rm90byI+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJidG5QZWxhd2F0U3VibWl0IiBjbGFzcz0iYnRuIGJ0bi1wZWxhd2F0IiBvbmNsaWNrPSJoYW50YXJQZWxhd2F0KCkiPgogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC85NDAyLzk0MDIzNDIucG5nIiBjbGFzcz0iaWNvbi0zZC1zdGQiPiBIQU5UQVIgREFUQQogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJidG4gYnRuLWNhbmNlbCIgb25jbGljaz0iY2FuY2VsUGVsYXdhdCgpIj5CQVRBTDwvYnV0dG9uPgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXYgY2xhc3M9Imxpc3QtaGVhZGVyIj4KICAgICAgICAgICAgICAgIDxzcGFuPgogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC85NDIvOTQyNzk5LnBuZyIgY2xhc3M9Imljb24tM2Qtc3RkIj4gCiAgICAgICAgICAgICAgICAgICAgUmVrb2QgSGFyaSBJbmkgKDxzcGFuIGlkPSJjb3VudCI+MDwvc3Bhbj4pCiAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImxvYWRMaXN0KCkiIHN0eWxlPSJib3JkZXI6bm9uZTsgYmFja2dyb3VuZDpub25lOyBjdXJzb3I6cG9pbnRlcjsiPgogICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8zMDMxLzMwMzE3MTgucG5nIiBjbGFzcz0iaWNvbi0zZC1zdGQiPgogICAgICAgICAgICAgICAgPC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGlkPSJsaXN0Q29udGFpbmVyIiBjbGFzcz0ibGlzdC1jb250YWluZXIiPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0icGFkZGluZzoyMHB4OyBjb2xvcjojOTk5OyBmb250LXNpemU6MTJweDsiPk1lbXVhdGthbiBkYXRhLi4uPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAKICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKPHNjcmlwdD4KICAgIGxldCBqYW1Db25maWcgPSBudWxsOyAKICAgIGxldCBpc0luWm9uZSA9IGZhbHNlOyAKICAgIGxldCBjdXJyZW50RGlzdCA9IDA7IAogICAgbGV0IGxhc3RMYXQgPSAwLCBsYXN0TG5nID0gMDsKICAgIGxldCBjdXJyZW50TGlzdCA9IFtdOyAKICAgIGxldCBpc1N1Ym1pdHRpbmcgPSBmYWxzZTsgCiAgICBsZXQgaGFzTm90aWZpZWRXYWtlID0gZmFsc2U7IC8vIEZsYWcgdW50dWsgbm90aWZpa2FzaSBzZWthbGkgc2VoYXJpCiAgICAKICAgIC8vIFZBUklBQkxFUyBVTlRVSyBBVVRPLUxPR0lDICYgQU5USS1TUEFNCiAgICBsZXQgaW5ab25lU3RhcnQgPSAwOyAvLyBUaW1lc3RhbXAgbWFzdWsga2F3YXNhbgogICAgbGV0IG91dFpvbmVTdGFydCA9IDA7IC8vIFRpbWVzdGFtcCBrZWx1YXIga2F3YXNhbgogICAgbGV0IHdha2VMb2NrID0gbnVsbDsKCiAgICAvLyBWQVJJQUJMRVMgTk9USUZJS0FTSSBTSVRVQVNJCiAgICBsZXQgaGFzTm90aWZpZWRFbnRyeSA9IGZhbHNlOwogICAgbGV0IGhhc05vdGlmaWVkRXhpdCA9IGZhbHNlOwoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gICAgICAgTE9HSUsgTU9EIE9GRkxJTkUgJiBTWU5DIFBJTlRBUgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAKICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yKSB7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB7CiAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCdzdy5qcycpLnRoZW4ocmVnID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTVyBCZXJqYXlhOicsIHJlZy5zY29wZSk7CiAgICAgICAgICAgICAgICBpZiAoJ1N5bmNNYW5hZ2VyJyBpbiB3aW5kb3cpIHsKICAgICAgICAgICAgICAgICAgICByZWcuc3luYy5yZWdpc3Rlcignc3luYy1hdHRlbmRhbmNlJykuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKCJTeW5jIGJnIGdhZ2FsIiwgZXJyKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZygnU1cgR2FnYWw6JywgZXJyKSk7CiAgICAgICAgfSk7CiAgICB9CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29ubGluZScsICgpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygiSW50ZXJuZXQgZGlrZXNhbiEgTWVtdWxha2FuIHNpbmtyb25pc2FzaS4uLiIpOwogICAgICAgIHNob3dTeW5jQmFyKCJJbnRlcm5ldCBLZW1iYWxpIFB1bGloLiBNZW55ZWdlcmFra2FuIGRhdGEuLi4iLCAiIzJlY2M3MSIpOwogICAgICAgIGlmICgnc2VydmljZVdvcmtlcicgaW4gbmF2aWdhdG9yICYmICdTeW5jTWFuYWdlcicgaW4gd2luZG93KSB7CiAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5LnRoZW4oc3cgPT4geyByZXR1cm4gc3cuc3luYy5yZWdpc3Rlcignc3luYy1hdHRlbmRhbmNlJyk7IH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZldGNoKCcvc3cuanMnKTsgCiAgICAgICAgfQogICAgICAgIHN5bmNPZmZsaW5lRGF0YSgpOwogICAgfSk7CgogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ29mZmxpbmUnLCAoKSA9PiB7CiAgICAgICAgc2hvd1N5bmNCYXIoIk1PRCBPRkZMSU5FOiBEYXRhIGFrYW4gZGlzaW1wYW4gZGFsYW0gdGVsZWZvbi4iLCAiI2U3NGMzYyIpOwogICAgfSk7CgogICAgZnVuY3Rpb24gc2hvd1N5bmNCYXIobXNnLCBjb2xvcikgewogICAgICAgIGNvbnN0IGJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzeW5jU3RhdHVzQmFyJyk7CiAgICAgICAgYmFyLmlubmVyVGV4dCA9IG1zZzsKICAgICAgICBiYXIuc3R5bGUuYmFja2dyb3VuZCA9IGNvbG9yOwogICAgICAgIGJhci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICAgICAgICBpZihjb2xvciA9PT0gIiMyZWNjNzEiKSBzZXRUaW1lb3V0KCgpID0+IHsgYmFyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0sIDQwMDApOwogICAgfQoKICAgIGZ1bmN0aW9uIHN5bmNPZmZsaW5lRGF0YSgpIHsKICAgICAgICBpZiAoIW5hdmlnYXRvci5vbkxpbmUpIHJldHVybjsKICAgICAgICBsZXQgb2ZmbGluZVF1ZXVlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX29mZmxpbmVfcXVldWUnKSB8fCAiW10iKTsKICAgICAgICBpZiAob2ZmbGluZVF1ZXVlLmxlbmd0aCA9PT0gMCkgcmV0dXJuOyAKCiAgICAgICAgc2hvd1N5bmNCYXIoIk1lbmdoYW50YXIgIiArIG9mZmxpbmVRdWV1ZS5sZW5ndGggKyAiIGRhdGEgdGVydGFuZ2d1aC4uLiIsICIjMzQ5OGRiIik7CiAgICAgICAgbGV0IGl0ZW1Ub1N5bmMgPSBvZmZsaW5lUXVldWVbMF07CiAgICAgICAgaWYgKCFpdGVtVG9TeW5jLmthdGVnb3JpIHx8IGl0ZW1Ub1N5bmMua2F0ZWdvcmkgPT09ICJ1bmRlZmluZWQiIHx8IGl0ZW1Ub1N5bmMua2F0ZWdvcmkgPT09IG51bGwpIHsKICAgICAgICAgICAgaXRlbVRvU3luYy5rYXRlZ29yaSA9ICJQRUxBV0FUIjsKICAgICAgICB9CgogICAgICAgIGZldGNoKEFQSV9VUkwsIHsgbWV0aG9kOiAiUE9TVCIsIGJvZHk6IEpTT04uc3RyaW5naWZ5KGl0ZW1Ub1N5bmMpIH0pCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKQogICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMucmVzdWx0ID09PSAic3VjY2VzcyIpIHsKICAgICAgICAgICAgICAgIG9mZmxpbmVRdWV1ZS5zaGlmdCgpOyAKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlaGFkaXJfb2ZmbGluZV9xdWV1ZScsIEpTT04uc3RyaW5naWZ5KG9mZmxpbmVRdWV1ZSkpOwogICAgICAgICAgICAgICAgaWYgKG9mZmxpbmVRdWV1ZS5sZW5ndGggPiAwKSB7IHN5bmNPZmZsaW5lRGF0YSgpOyB9IAogICAgICAgICAgICAgICAgZWxzZSB7IHNob3dTeW5jQmFyKCI/IFNlbXVhIGRhdGEgb2ZmbGluZSB0ZWxhaCBiZXJqYXlhIGRpaGFudGFyISIsICIjMjdhZTYwIik7IGxvYWRMaXN0KCk7IH0KICAgICAgICAgICAgfSBlbHNlIHsgc2hvd1N5bmNCYXIoIlJhbGF0IFNlcnZlcjogIiArIHJlcy5tc2csICIjYzAzOTJiIik7IH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaChlcnIgPT4geyBzaG93U3luY0JhcigiUmFsYXQgTmV0d29yay4gQWthbiBjdWJhIHNlYmVudGFyIGxhZ2kuIiwgIiNlNjdlMjIiKTsgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2hvd01vZGVybkFsZXJ0KHRpdGxlLCBtc2csIHR5cGUsIGNhbGxiYWNrKSB7CiAgICAgICAgLy8gT3ZlcnJpZGUgZm9yIEF1dG8gTW9kZTogRG9uJ3QgYmxvY2sgaWYgQXV0bwogICAgICAgIGxldCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdXN0b21Nb2RhbCcpOwogICAgICAgIGxldCBtVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kYWxUaXRsZScpOwogICAgICAgIGxldCBtTXNnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsTXNnJyk7CiAgICAgICAgbGV0IG1JY29uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsSWNvbicpOwogICAgICAgIGxldCBtQnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbEJ0blJvdycpOwoKICAgICAgICBtVGl0bGUuaW5uZXJUZXh0ID0gdGl0bGU7CiAgICAgICAgbU1zZy5pbm5lckhUTUwgPSBtc2c7IAogICAgICAgIAogICAgICAgIGlmKHR5cGUgPT09ICdlcnJvcicpIHsKICAgICAgICAgICAgbUljb24uaW5uZXJUZXh0ID0gIiI7IG1UaXRsZS5zdHlsZS5jb2xvciA9ICIjYzAzOTJiIjsKICAgICAgICAgICAgbUJ0bnMuaW5uZXJIVE1MID0gYDxidXR0b24gY2xhc3M9Im1vZGFsLWJ0biBidG4tb2siIG9uY2xpY2s9ImNsb3NlQ3VzdG9tTW9kYWwoKSI+RmFoYW08L2J1dHRvbj5gOwogICAgICAgIH0gZWxzZSBpZih0eXBlID09PSAnc3VjY2VzcycpIHsKICAgICAgICAgICAgbUljb24uaW5uZXJUZXh0ID0gIj8iOyBtVGl0bGUuc3R5bGUuY29sb3IgPSAiIzI3YWU2MCI7CiAgICAgICAgICAgIG1CdG5zLmlubmVySFRNTCA9IGA8YnV0dG9uIGNsYXNzPSJtb2RhbC1idG4gYnRuLW9rIiBvbmNsaWNrPSJjbG9zZUN1c3RvbU1vZGFsKCkiPlRlcmJhaWs8L2J1dHRvbj5gOwogICAgICAgIH0gZWxzZSBpZih0eXBlID09PSAnaW5mbycpIHsKICAgICAgICAgICAgbUljb24uaW5uZXJUZXh0ID0gIiI7IG1UaXRsZS5zdHlsZS5jb2xvciA9ICIjMjk4MGI5IjsKICAgICAgICAgICAgbUJ0bnMuaW5uZXJIVE1MID0gYDxidXR0b24gY2xhc3M9Im1vZGFsLWJ0biBidG4tb2siIG9uY2xpY2s9ImNsb3NlQ3VzdG9tTW9kYWwoKSI+T0s8L2J1dHRvbj5gOwogICAgICAgIH0gZWxzZSBpZih0eXBlID09PSAnY29uZmlybScpIHsKICAgICAgICAgICAgbUljb24uaW5uZXJUZXh0ID0gIiI7IG1UaXRsZS5zdHlsZS5jb2xvciA9ICIjMWUzYzcyIjsKICAgICAgICAgICAgd2luZG93LnRlbXBDYWxsYmFjayA9IGNhbGxiYWNrOwogICAgICAgICAgICBtQnRucy5pbm5lckhUTUwgPSBgPGJ1dHRvbiBjbGFzcz0ibW9kYWwtYnRuIGJ0bi1jYW5jZWwtbW9kYWwiIG9uY2xpY2s9ImNsb3NlQ3VzdG9tTW9kYWwoKSI+QmF0YWw8L2J1dHRvbj48YnV0dG9uIGNsYXNzPSJtb2RhbC1idG4gYnRuLW9rIiBvbmNsaWNrPSJjb25maXJtQWN0aW9uKCkiPlRlcnVza2FuPC9idXR0b24+YDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBtSWNvbi5pbm5lclRleHQgPSAiIjsgbVRpdGxlLnN0eWxlLmNvbG9yID0gIiMyYzNlNTAiOwogICAgICAgICAgICBtQnRucy5pbm5lckhUTUwgPSBgPGJ1dHRvbiBjbGFzcz0ibW9kYWwtYnRuIGJ0bi1vayIgb25jbGljaz0iY2xvc2VDdXN0b21Nb2RhbCgpIj5UdXR1cDwvYnV0dG9uPmA7CiAgICAgICAgfQogICAgICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7CiAgICB9CgogICAgZnVuY3Rpb24gY2xvc2VDdXN0b21Nb2RhbCgpIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1c3RvbU1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICJub25lIjsgfQogICAgZnVuY3Rpb24gY29uZmlybUFjdGlvbigpIHsgY2xvc2VDdXN0b21Nb2RhbCgpOyBpZih3aW5kb3cudGVtcENhbGxiYWNrKSB3aW5kb3cudGVtcENhbGxiYWNrKCk7IH0KCiAgICBmdW5jdGlvbiBzZW5kTm90aWZpY2F0aW9uKHRpdGxlLCBib2R5LCB0YWcpIHsKICAgICAgICBpZihOb3RpZmljYXRpb24ucGVybWlzc2lvbiA9PT0gImdyYW50ZWQiKSB7CiAgICAgICAgICAgIGlmKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHsKICAgICAgICAgICAgICAgIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5LnRoZW4ocmVnID0+IHsKICAgICAgICAgICAgICAgICAgICByZWcuc2hvd05vdGlmaWNhdGlvbih0aXRsZSwgewogICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBib2R5LAogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvOTQwMi85NDAyMzQyLnBuZyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHRhZzogdGFnLAogICAgICAgICAgICAgICAgICAgICAgICByZW5vdGlmeTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgdmlicmF0ZTogWzIwMCwgMTAwLCAyMDBdLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IHVybDogbG9jYXRpb24uaHJlZiB9IAogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBuZXcgTm90aWZpY2F0aW9uKHRpdGxlLCB7IGJvZHk6IGJvZHksIHRhZzogdGFnIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbigpIHsKICAgICAgICBzdGFydENsb2NrKCk7CiAgICAgICAgc3RhcnRSYWRhcigpOwogICAgICAgIGZldGNoQ29uZmlnKCk7IAogICAgICAgIGdldEhpanJpRGF0ZSgpOwogICAgICAgIGluaXRMb2NrTmFtZSgpOyAKICAgICAgICBpbml0QXZhdGFyKCk7IC8vIEluaXQgYXZhdGFyCiAgICAgICAgaW5pdEJhY2tncm91bmRTZXJ2aWNlKCk7IC8vIEluaXRpYWxpemUgV2FrZUxvY2sgJiBQZXJtaXNzaW9uCiAgICAgICAgCiAgICAgICAgaWYoIW5hdmlnYXRvci5vbkxpbmUpIHNob3dTeW5jQmFyKCJNT0QgT0ZGTElORTogRGF0YSBha2FuIGRpc2ltcGFuIGRhbGFtIHRlbGVmb24uIiwgIiNlNzRjM2MiKTsKICAgICAgICBlbHNlIHN5bmNPZmZsaW5lRGF0YSgpOyAKCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGNoZWNrU2Vzc2lvbigpOwogICAgICAgICAgICBzZXRJbnRlcnZhbCh1cGRhdGVEYXNoYm9hcmRJbmZvLCA1MDAwKTsgCiAgICAgICAgfSwgMjAwMCk7CgogICAgICAgIGxvYWRMaXN0KCk7CiAgICAgICAgc2V0SW50ZXJ2YWwodXBkYXRlTGl2ZVRpbWVycywgMTAwMCk7CiAgICAgICAgCiAgICAgICAgLy8gLS0tIFVCQUggU1VBSSBTVVJHSUtBTDogV0VCIFdPUktFUiBVTlRVSyBFTEFLIFRIUk9UVExJTkcgREkgTEFUQVIgQkVMQUtBTkcgLS0tCiAgICAgICAgLy8gTWVuZ2dhbnRpa2FuIHNldEludGVydmFsIGJpYXNhIHlhbmcgYWthbiAnYmVrdScgamlrYSBwaG9uZSBkaWt1bmNpCiAgICAgICAgY29uc3Qgd29ya2VyQmxvYiA9IG5ldyBCbG9iKFsic2VsZi5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHsgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXsgc2VsZi5wb3N0TWVzc2FnZSgndGljaycpOyB9LCAxMDAwKTsgfSJdLCB7IHR5cGU6ICJ0ZXh0L2phdmFzY3JpcHQiIH0pOwogICAgICAgIGNvbnN0IHdvcmtlciA9IG5ldyBXb3JrZXIoVVJMLmNyZWF0ZU9iamVjdFVSTCh3b3JrZXJCbG9iKSk7CiAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHsgbW9uaXRvckF1dG9Mb2dpYygpOyB9OwogICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSgic3RhcnQiKTsKICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICB9OwoKICAgIC8vIC0tLSBJTklUIEJBQ0tHUk9VTkQgU0VSVklDRSAoV0FLRUxPQ0sgJiBQRVJNSVNTSU9OUykgLS0tCiAgICBhc3luYyBmdW5jdGlvbiBpbml0QmFja2dyb3VuZFNlcnZpY2UoKSB7CiAgICAgICAgLy8gMS4gUmVxdWVzdCBOb3RpZmljYXRpb24gKFVUQU1BOiBVbnR1ayAnS2VqdXRrYW4nIEFwcCkKICAgICAgICBpZiAoIk5vdGlmaWNhdGlvbiIgaW4gd2luZG93KSB7CiAgICAgICAgICAgICBpZihOb3RpZmljYXRpb24ucGVybWlzc2lvbiAhPT0gImdyYW50ZWQiKSB7CiAgICAgICAgICAgICAgICAgIGF3YWl0IE5vdGlmaWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpOwogICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyAyLiBSZXF1ZXN0IFdha2VMb2NrIChLZWVwIExvZ2ljIEFsaXZlKQogICAgICAgIGlmICgnd2FrZUxvY2snIGluIG5hdmlnYXRvcikgewogICAgICAgICAgICBjb25zdCByZXF1ZXN0TG9jayA9IGFzeW5jICgpID0+IHsKICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgd2FrZUxvY2sgPSBhd2FpdCBuYXZpZ2F0b3Iud2FrZUxvY2sucmVxdWVzdCgnc2NyZWVuJyk7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F1dG9Nb2RlSW5kaWNhdG9yJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7CiAgICAgICAgICAgICAgICAgICAgd2FrZUxvY2suYWRkRXZlbnRMaXN0ZW5lcigncmVsZWFzZScsICgpID0+IHsgY29uc29sZS5sb2coJ1dha2UgTG9jayBSZWxlYXNlZCcpOyB9KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgeyBjb25zb2xlLmVycm9yKGAke2Vyci5uYW1lfSwgJHtlcnIubWVzc2FnZX1gKTsgfQogICAgICAgICAgICB9OwogICAgICAgICAgICAKICAgICAgICAgICAgYXdhaXQgcmVxdWVzdExvY2soKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFJlLWFjcXVpcmUgbG9jayBvbiB2aXNpYmlsaXR5IGNoYW5nZSAoQmlsYSB1c2VyIG1pbmltaXplL21heGltaXplKQogICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd2aXNpYmlsaXR5Y2hhbmdlJywgYXN5bmMgKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHdha2VMb2NrICE9PSBudWxsICYmIGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcmVxdWVzdExvY2soKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgIC8vIEN1YmEgcGFrc2EgbG9jayBkYWxhbSBiYWNrZ3JvdW5kIChiZXJnYW50dW5nIHBhZGEgT1MpCiAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJlcXVlc3RMb2NrKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KCiAgICAvLyAtLS0gQVZBVEFSIExPR0lDICgxMCBPRkZJQ0UgVEhFTUVEKSAtLS0KICAgIGNvbnN0IEFWQVRBUlMgPSBbCiAgICAgICAgImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQxNDAvNDE0MDA0OC5wbmciLCAvLyBNYWxlIE9mZmljZQogICAgICAgICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MTQwLzQxNDAwNDcucG5nIiwgLy8gRmVtYWxlIE9mZmljZQogICAgICAgICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MTQwLzQxNDAwMzcucG5nIiwgLy8gTWFsZSBUaWUKICAgICAgICAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDE0MC80MTQwMDUxLnBuZyIsIC8vIEZlbWFsZSBCbGF6ZXIKICAgICAgICAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDE0MC80MTQwMDQwLnBuZyIsIC8vIE1hbGUgR2xhc3NlcwogICAgICAgICJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC80MTQwLzQxNDAwNjEucG5nIiwgLy8gRmVtYWxlIFNjYXJmCiAgICAgICAgImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQxNDAvNDE0MDA1Mi5wbmciLCAvLyBNYWxlIE1hbmFnZXIKICAgICAgICAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvNDE0MC80MTQwMDQyLnBuZyIsIC8vIEZlbWFsZSBNYW5hZ2VyCiAgICAgICAgImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQxNDAvNDE0MDA0Ni5wbmciLCAvLyBNYWxlIFlvdW5nCiAgICAgICAgImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzQxNDAvNDE0MDA1Ny5wbmciICAvLyBGZW1hbGUgR2xhc3NlcwogICAgXTsKCiAgICBmdW5jdGlvbiBpbml0QXZhdGFyKCkgewogICAgICAgIGxldCBzYXZlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfdXNlcl9hdmF0YXInKTsKICAgICAgICBpZihzYXZlZCkgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnRBdmF0YXJNaW5pJykuc3JjID0gc2F2ZWQ7CiAgICAgICAgLy8gR2VuZXJhdGUgR3JpZAogICAgICAgIGxldCBncmlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F2YXRhckdyaWQnKTsKICAgICAgICBncmlkLmlubmVySFRNTCA9ICIiOwogICAgICAgIEFWQVRBUlMuZm9yRWFjaCh1cmwgPT4gewogICAgICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgIGRpdi5jbGFzc05hbWUgPSAiYXZhdGFyLW9wdGlvbiI7CiAgICAgICAgICAgIGlmKHVybCA9PT0gc2F2ZWQpIGRpdi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpOwogICAgICAgICAgICBkaXYuaW5uZXJIVE1MID0gYDxpbWcgc3JjPSIke3VybH0iPmA7CiAgICAgICAgICAgIGRpdi5vbmNsaWNrID0gKCkgPT4gc2VsZWN0QXZhdGFyKHVybCk7CiAgICAgICAgICAgIGdyaWQuYXBwZW5kQ2hpbGQoZGl2KTsKICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBvcGVuQXZhdGFyTW9kYWwoKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmF0YXJNb2RhbENvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7IH0KICAgIGZ1bmN0aW9uIGNsb3NlQXZhdGFyTW9kYWwoKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhdmF0YXJNb2RhbENvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IH0KCiAgICBmdW5jdGlvbiBzZWxlY3RBdmF0YXIodXJsKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VoYWRpcl91c2VyX2F2YXRhcicsIHVybCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnRBdmF0YXJNaW5pJykuc3JjID0gdXJsOwogICAgICAgIGluaXRBdmF0YXIoKTsgLy8gUmVmcmVzaCBncmlkIHN0YXRlCiAgICAgICAgY2xvc2VBdmF0YXJNb2RhbCgpOwogICAgfQoKICAgIC8vIC0tLSBMT0dJSyBMT0NLIE5BTUEgJiBBVVRPIFNZTkMgLS0tCiAgICBmdW5jdGlvbiBpbml0TG9ja05hbWUoKSB7CiAgICAgICAgbGV0IGxvY2tlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfbG9ja2VkX25hbWUnKTsKICAgICAgICBsZXQgbG9ja2VkS2F0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9sb2NrZWRfa2F0Jyk7IC8vIExvYWQgY2F0ZWdvcnkgdG9vCiAgICAgICAgbGV0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWEnKTsKICAgICAgICBsZXQgc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2thdGVnb3JpJyk7CiAgICAgICAgbGV0IGJ0bkltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2NrSWNvbkltZycpOwogICAgICAgIGxldCBidG5Mb2NrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xvY2tCdG4nKTsKICAgICAgICBsZXQgYXZhdGFyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F2YXRhckJ0bicpOyAvLyBBdmF0YXIgQnV0dG9uCiAgICAgICAgCiAgICAgICAgLy8gLS0tIE1PRCBFRElUOiBTVFJJQ1QgVkFMSURBVElPTiAtLS0KICAgICAgICAvLyBKaWthIHNhbGFoIHNhdHUgdGlhZGEgKHRpZGFrIGxlbmdrYXApLCBhbmdnYXAgZGF0YSByb3NhayAtPiBCdWthIEt1bmNpCiAgICAgICAgaWYgKCFsb2NrZWQgfHwgIWxvY2tlZEthdCkgewogICAgICAgICAgICBpZihsb2NrZWQgfHwgbG9ja2VkS2F0KSB7IC8vIEppa2Egc2VwYXJhIGFkYQogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2VoYWRpcl9sb2NrZWRfbmFtZScpOwogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2VoYWRpcl9sb2NrZWRfa2F0Jyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbG9ja2VkID0gbnVsbDsgCiAgICAgICAgICAgIGxvY2tlZEthdCA9IG51bGw7CiAgICAgICAgfQogICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogICAgICAgIGlmIChsb2NrZWQgJiYgbG9ja2VkS2F0KSB7CiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gbG9ja2VkOwogICAgICAgICAgICBzZWwudmFsdWUgPSBsb2NrZWRLYXQ7CiAgICAgICAgICAgIGlucHV0LnJlYWRPbmx5ID0gdHJ1ZTsKICAgICAgICAgICAgc2VsLmRpc2FibGVkID0gdHJ1ZTsgLy8gTG9jayBjYXRlZ29yeQogICAgICAgICAgICBhdmF0YXJCdG4uZGlzYWJsZWQgPSB0cnVlOyAvLyBMT0NLIEFWQVRBUiBTRUxFQ1RJT04KICAgICAgICAgICAgaW5wdXQuc3R5bGUuYmFja2dyb3VuZCA9ICIjZmZmOGUxIjsgCiAgICAgICAgICAgIC8vIFVQREFURUQgTE9DSyBJQ09OICYgWUVMTE9XIEJUTgogICAgICAgICAgICBidG5JbWcuc3JjID0gImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzI5MTMvMjkxMzEzMy5wbmciOyAKICAgICAgICAgICAgYnRuSW1nLnN0eWxlLmZpbHRlciA9ICJvcGFjaXR5KDEpIjsKICAgICAgICAgICAgYnRuTG9jay5jbGFzc0xpc3QuYWRkKCdidG4teWVsbG93Jyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaW5wdXQucmVhZE9ubHkgPSBmYWxzZTsKICAgICAgICAgICAgc2VsLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgIGF2YXRhckJ0bi5kaXNhYmxlZCA9IGZhbHNlOyAvLyBVTkxPQ0sgQVZBVEFSCiAgICAgICAgICAgIGlucHV0LnN0eWxlLmJhY2tncm91bmQgPSAiI2Y4ZjlmYSI7CiAgICAgICAgICAgIC8vIFVQREFURUQgVU5MT0NLIElDT04gJiBSRU1PVkUgWUVMTE9XCiAgICAgICAgICAgIGJ0bkltZy5zcmMgPSAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMjg4OS8yODg5Njc2LnBuZyI7IAogICAgICAgICAgICBidG5JbWcuc3R5bGUuZmlsdGVyID0gIm9wYWNpdHkoMC40KSI7CiAgICAgICAgICAgIGJ0bkxvY2suY2xhc3NMaXN0LnJlbW92ZSgnYnRuLXllbGxvdycpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiB0b2dnbGVMb2NrTmFtZSgpIHsKICAgICAgICBsZXQgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtYScpOwogICAgICAgIGxldCBzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2F0ZWdvcmknKTsKICAgICAgICBsZXQgYXZhdGFyQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2F2YXRhckJ0bicpOwogICAgICAgIGxldCBjdXJyZW50ID0gaW5wdXQudmFsdWUudHJpbSgpLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgbGV0IGN1cnJlbnRLYXQgPSBzZWwudmFsdWU7CiAgICAgICAgCiAgICAgICAgaWYoIWN1cnJlbnQgfHwgIWN1cnJlbnRLYXQpIHsgc2hvd01vZGVybkFsZXJ0KCJLb3NvbmciLCAiU2lsYSBpc2kgTmFtYSBkYW4gcGlsaWggS2F0ZWdvcmkgZGFodWx1LiIsICJlcnJvciIpOyByZXR1cm47IH0KICAgICAgICAKICAgICAgICBpZiAoaW5wdXQucmVhZE9ubHkpIHsKICAgICAgICAgICAgLy8gVU5MT0NLCiAgICAgICAgICAgIGlucHV0LnJlYWRPbmx5ID0gZmFsc2U7CiAgICAgICAgICAgIHNlbC5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICBhdmF0YXJCdG4uZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgaW5wdXQuc3R5bGUuYmFja2dyb3VuZCA9ICIjZjhmOWZhIjsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2VoYWRpcl9sb2NrZWRfbmFtZScpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZWhhZGlyX2xvY2tlZF9rYXQnKTsKICAgICAgICAgICAgc2hvd01vZGVybkFsZXJ0KCJOeWFoLUt1bmNpIiwgIkF1dG8gQ2hlY2stSW4gRGliYXRhbGthbi4iLCAiaW5mbyIpOwogICAgICAgICAgICBpbml0TG9ja05hbWUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBMT0NLCiAgICAgICAgICAgIGlucHV0LnJlYWRPbmx5ID0gdHJ1ZTsKICAgICAgICAgICAgc2VsLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgYXZhdGFyQnRuLmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgaW5wdXQuc3R5bGUuYmFja2dyb3VuZCA9ICIjZmZmOGUxIjsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VoYWRpcl9sb2NrZWRfbmFtZScsIGN1cnJlbnQpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnZWhhZGlyX2xvY2tlZF9rYXQnLCBjdXJyZW50S2F0KTsKICAgICAgICAgICAgc2hvd01vZGVybkFsZXJ0KCJBdXRvIE1vZGUiLCAiTmFtYSAmIEF2YXRhciBkaWt1bmNpLiBTaXN0ZW0gYWthbiA8Yj5BVVRPIENIRUNLLUlOPC9iPiBiaWxhIGFuZGEgbWFzdWsga2F3YXNhbi4iLCAic3VjY2VzcyIpOwogICAgICAgICAgICBpbml0TG9ja05hbWUoKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tBdXRvU3RhdHVzKGxpc3QpIHsKICAgICAgICBsZXQgbG9ja2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9sb2NrZWRfbmFtZScpOwogICAgICAgIGlmKCFsb2NrZWQpIHJldHVybjsKICAgICAgICBsZXQgdXNlclJlY29yZCA9IGxpc3QuZmluZChpdGVtID0+IGl0ZW0ubmFtYSA9PT0gbG9ja2VkKTsKICAgICAgICBpZiAodXNlclJlY29yZCkgewogICAgICAgICAgICBpZiAoIXVzZXJSZWNvcmQua2VsdWFyIHx8IHVzZXJSZWNvcmQua2VsdWFyID09PSAiIikgewogICAgICAgICAgICAgICAgIGxldCBjdXJyZW50U2VzcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9zZXNzaW9uJykpOwogICAgICAgICAgICAgICAgIGlmICghY3VycmVudFNlc3MpIHsKICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VoYWRpcl9zZXNzaW9uJywgSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgICAgICAgbmFtYTogbG9ja2VkLAogICAgICAgICAgICAgICAgICAgICAgICAga2F0ZWdvcmk6IHVzZXJSZWNvcmQua2F0ZWdvcmkgfHwgIkdVUlUiLCAKICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLDEwKQogICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOyAKICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBsZXQgY3VycmVudFNlc3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfc2Vzc2lvbicpKTsKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2VzcyAmJiBjdXJyZW50U2Vzcy5uYW1hID09PSBsb2NrZWQpIHsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZWhhZGlyX3Nlc3Npb24nKTsKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBmZXRjaENvbmZpZygpIHsKICAgICAgICBpZighbmF2aWdhdG9yLm9uTGluZSkgeyByZXR1cm47IH0KICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ0NvbmZpZycpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogICAgICAgIGZldGNoKEFQSV9VUkwsIHsgbWV0aG9kOiAiUE9TVCIsIGJvZHk6IEpTT04uc3RyaW5naWZ5KHthY3Rpb246ICJHRVRfQ09ORklHIiwgcGFzc2NvZGU6IFBBU1NDT0RFfSkgfSkKICAgICAgICAudGhlbihyID0+IHIuanNvbigpKS50aGVuKHJlcyA9PiB7IAogICAgICAgICAgICBqYW1Db25maWcgPSAocmVzLnN0YXR1cyA9PT0gIlNVQ0NFU1MiICYmIHJlcy5kYXRhKSA/IHJlcy5kYXRhIDogcmVzOwogICAgICAgICAgICBpZihqYW1Db25maWcpIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2FkaW5nQ29uZmlnJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgICAgICAgIHVwZGF0ZVNjaGVkdWxlSW5mbygpOyAKICAgICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGVyciA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZ0NvbmZpZycpLmlubmVySFRNTCA9ICJNb2QgT2ZmbGluZS4iKTsKICAgIH0KCiAgICBmdW5jdGlvbiBjbGVhblRpbWVEaXNwbGF5KHZhbCkgewogICAgICAgIGlmICghdmFsKSByZXR1cm4gIi0tOi0tIjsKICAgICAgICBsZXQgZCA9IHBhcnNlVGltZSh2YWwsIG5ldyBEYXRlKCkpOwogICAgICAgIHJldHVybiBkID8gZC50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLVVTJywgeyBob3VyOiAnbnVtZXJpYycsIG1pbnV0ZTogJzItZGlnaXQnLCBob3VyMTI6IHRydWUgfSkgOiB2YWw7CiAgICB9CgogICAgZnVuY3Rpb24gdXBkYXRlU2NoZWR1bGVJbmZvKCkgewogICAgICAgIGxldCBrYXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2F0ZWdvcmknKS52YWx1ZTsKICAgICAgICBsZXQgaW5mb0JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY2hlZHVsZUluZm8nKTsKICAgICAgICBpZiAoIWphbUNvbmZpZykgcmV0dXJuOwogICAgICAgIGlmIChrYXQgJiYgamFtQ29uZmlnW2thdF0pIHsKICAgICAgICAgICAgbGV0IG1hc3VrID0gY2xlYW5UaW1lRGlzcGxheShqYW1Db25maWdba2F0XS5tYXN1ayk7CiAgICAgICAgICAgIGxldCBrZWx1YXIgPSBjbGVhblRpbWVEaXNwbGF5KGphbUNvbmZpZ1trYXRdLmtlbHVhcik7CiAgICAgICAgICAgIGluZm9Cb3guaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9InNjaGVkdWxlLW1pbmltYWwiPjxkaXYgY2xhc3M9InRpbWUtcGlsbCIgc3R5bGU9ImNvbG9yOiMyN2FlNjA7IGJvcmRlci1jb2xvcjojZDRlZGRhOyBiYWNrZ3JvdW5kOiNmMGZkZjQ7Ij48c3Bhbj48aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMTkwLzE5MDQxMS5wbmciIGNsYXNzPSJpY29uLTNkLW1pbmkiPiAke21hc3VrfTwvc3Bhbj48L2Rpdj48ZGl2IGNsYXNzPSJ0aW1lLXBpbGwiIHN0eWxlPSJjb2xvcjojYzAzOTJiOyBib3JkZXItY29sb3I6I2ZhZGJkODsgYmFja2dyb3VuZDojZmVmMmYyOyI+PHNwYW4+PGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzE5MC8xOTA0MDYucG5nIiBjbGFzcz0iaWNvbi0zZC1taW5pIj4gJHtrZWx1YXJ9PC9zcGFuPjwvZGl2PjwvZGl2PmA7CiAgICAgICAgICAgIGluZm9Cb3guc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZURhc2hib2FyZEluZm8oKSB7CiAgICAgICAgbGV0IHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfc2Vzc2lvbicpKTsKICAgICAgICBsZXQgZGFzaGJvYXJkU2NoZWR1bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGFzaGJvYXJkU2NoZWR1bGUnKTsKICAgICAgICBsZXQgdXNlckV4aXRUaW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJFeGl0VGltZScpOwogICAgICAgIGlmIChzICYmIGphbUNvbmZpZyAmJiBqYW1Db25maWdbcy5rYXRlZ29yaV0pIHsKICAgICAgICAgICAgbGV0IGRpc3BsYXlLZWx1YXIgPSBjbGVhblRpbWVEaXNwbGF5KGphbUNvbmZpZ1tzLmthdGVnb3JpXS5rZWx1YXIpOwogICAgICAgICAgICBkYXNoYm9hcmRTY2hlZHVsZS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgdXNlckV4aXRUaW1lLmlubmVyVGV4dCA9IGRpc3BsYXlLZWx1YXI7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHNlbmREYXRhKGRhdGEpIHsKICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICBpZiAoIWRhdGEuY2xpZW50VGltZSkgeyBkYXRhLmNsaWVudFRpbWUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7IH0KICAgICAgICAgICAgaWYgKCFuYXZpZ2F0b3Iub25MaW5lKSB7CiAgICAgICAgICAgICAgICBzYXZlVG9RdWV1ZShkYXRhKTsgcmVzb2x2ZSh7IG9mZmxpbmU6IHRydWUgfSk7IHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBmZXRjaChBUElfVVJMLCB7IG1ldGhvZDogIlBPU1QiLCBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKSB9KQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpLnRoZW4ocmVzdWx0ID0+IHsgcmVzb2x2ZSh7IG9mZmxpbmU6IGZhbHNlLCBkYXRhOiByZXN1bHQgfSk7IH0pCiAgICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7IHNhdmVUb1F1ZXVlKGRhdGEpOyByZXNvbHZlKHsgb2ZmbGluZTogdHJ1ZSB9KTsgfSk7CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gc2F2ZVRvUXVldWUoZGF0YSkgewogICAgICAgIGlmICghZGF0YS5rYXRlZ29yaSkgZGF0YS5rYXRlZ29yaSA9ICJQRUxBV0FUIjsKICAgICAgICBsZXQgcXVldWUgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfb2ZmbGluZV9xdWV1ZScpIHx8ICJbXSIpOwogICAgICAgIHF1ZXVlLnB1c2goZGF0YSk7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VoYWRpcl9vZmZsaW5lX3F1ZXVlJywgSlNPTi5zdHJpbmdpZnkocXVldWUpKTsKICAgIH0KCiAgICAvLyAtLS0gVUJBSCBTVUFJOiBIQU5UQVIgTUFTVUsgKEFVVE8gJiBNQU5VQUwpIC0tLQogICAgYXN5bmMgZnVuY3Rpb24gaGFudGFyTWFzdWsoaXNBdXRvID0gZmFsc2UpIHsKICAgICAgICBpZihpc1N1Ym1pdHRpbmcpIHJldHVybjsgCgogICAgICAgIGlmKCFpc0luWm9uZSkgeyAKICAgICAgICAgICAgaWYoIWlzQXV0bykgc2hvd01vZGVybkFsZXJ0KCJMdWFyIEthd2FzYW4iLCAiU2lsYSBtYXN1ayBrZSBrYXdhc2FuIHNla29sYWguIiwgImVycm9yIik7IAogICAgICAgICAgICByZXR1cm47IAogICAgICAgIH0KICAgICAgICAKICAgICAgICBsZXQgbmFtYSwga2F0OwogICAgICAgIGlmIChpc0F1dG8pIHsKICAgICAgICAgICAgbmFtYSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfbG9ja2VkX25hbWUnKTsKICAgICAgICAgICAga2F0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9sb2NrZWRfa2F0Jyk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBuYW1hID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWEnKS52YWx1ZS50b1VwcGVyQ2FzZSgpLnRyaW0oKTsKICAgICAgICAgICAga2F0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2thdGVnb3JpJykudmFsdWU7CiAgICAgICAgfQoKICAgICAgICBsZXQgYWxhc2FuID0gIkFVVE8gQ0hFQ0stSU4gKEdQUykiOwogICAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpOwoKICAgICAgICBpZiAoIW5hbWEgfHwgIWthdCkgeyAKICAgICAgICAgICAgaWYoIWlzQXV0bykgc2hvd01vZGVybkFsZXJ0KCJEYXRhIFRpZGFrIExlbmdrYXAiLCAiSXNpIE5hbWEgZGFuIEthdGVnb3JpLiIsICJlcnJvciIpOyAKICAgICAgICAgICAgcmV0dXJuOyAKICAgICAgICB9CgogICAgICAgIGlzU3VibWl0dGluZyA9IHRydWU7CiAgICAgICAgaWYoIWlzQXV0bykgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuTWFpblN1Ym1pdCcpLmRpc2FibGVkID0gdHJ1ZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bk1haW5TdWJtaXQnKS5pbm5lckhUTUwgPSAnU0VEQU5HIEhBTlRBUi4uLic7IH0KCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8gREFQQVRLQU4gQVZBVEFSIFlBTkcgRElQSUxJSAogICAgICAgICAgICBsZXQgc2F2ZWRBdmF0YXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX3VzZXJfYXZhdGFyJykgfHwgIiI7CgogICAgICAgICAgICAvLyBHRU4gVVVJRCBVTlRVSyBTRVNJIFVOSUsKICAgICAgICAgICAgbGV0IHVuaXF1ZUlEID0gRGF0ZS5ub3coKS50b1N0cmluZygzNikgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNSk7CiAgICAgICAgICAgIGNvbnN0IHBheWxvYWQgPSB7IGFjdGlvbjogIk1BU1VLIiwgcGFzc2NvZGU6IFBBU1NDT0RFLCBuYW1hOiBuYW1hLCBrYXRlZ29yaToga2F0LCBhbGFzYW46IGFsYXNhbiwgbGF0OiBsYXN0TGF0LCBsbmc6IGxhc3RMbmcsIGNsaWVudFRpbWU6IG5vdy50b0lTT1N0cmluZygpLCB1dWlkOiB1bmlxdWVJRCwgYXZhdGFyOiBzYXZlZEF2YXRhciB9OwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VuZERhdGEocGF5bG9hZCk7CgogICAgICAgICAgICBpZiAocmVzdWx0Lm9mZmxpbmUpIHsKICAgICAgICAgICAgICAgIGlmKCFpc0F1dG8pIGFsZXJ0KCJPZmZsaW5lOiBEYXRhIGRpc2ltcGFuLiIpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gU2VtYWsgamlrYSBzZXJ2ZXIgcmVqZWN0IChkdXBsaWNhdGUpCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmRhdGEgJiYgcmVzdWx0LmRhdGEucmVzdWx0ID09PSAiZXJyb3IiKSB7CiAgICAgICAgICAgICAgICAgICAgIGlmKCFpc0F1dG8pIHNob3dNb2Rlcm5BbGVydCgiR2FnYWwiLCByZXN1bHQuZGF0YS5tc2csICJlcnJvciIpOwogICAgICAgICAgICAgICAgICAgICBpc1N1Ym1pdHRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bk1haW5TdWJtaXQnKS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuTWFpblN1Ym1pdCcpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvOTQwMi85NDAyMzQyLnBuZyIgY2xhc3M9Imljb24tM2Qtc3RkIj4gREFGVEFSIE1BU1VLIChNQU5VQUwpYDsKICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoIWlzQXV0bykgYWxlcnQoIj8gQmVyamF5YSBkYWZ0YXIgbWFzdWshIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIE5PVElGSUtBU0kgQVVUTwogICAgICAgICAgICBpZihpc0F1dG8pIHsKICAgICAgICAgICAgICAgIHNob3dTeW5jQmFyKCJTRUxBTUFUIERBVEFORyBLRSBTSyBTRUxBTUEgKEspIiwgIiMyN2FlNjAiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VoYWRpcl9zZXNzaW9uJywgSlNPTi5zdHJpbmdpZnkoe25hbWE6IG5hbWEsIGthdGVnb3JpOiBrYXQsIGRhdGU6IG5vdy50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApLCB1dWlkOiB1bmlxdWVJRH0pKTsKICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CgogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIlJhbGF0OiIsIGVycm9yKTsKICAgICAgICAgICAgaXNTdWJtaXR0aW5nID0gZmFsc2U7CiAgICAgICAgICAgIGlmKCFpc0F1dG8pIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5NYWluU3VibWl0JykuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICB9CiAgICB9CgogICAgLy8gLS0tIFVCQUggU1VBSTogSEFOVEFSIEtFTFVBUiAoQVVUTyAmIE1BTlVBTCkgLS0tCiAgICBhc3luYyBmdW5jdGlvbiBoYW50YXJLZWx1YXIoaXNBdXRvID0gZmFsc2UpIHsKICAgICAgICBpZihpc1N1Ym1pdHRpbmcpIHJldHVybjsgCgogICAgICAgIGxldCBzZXNzaW9uID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX3Nlc3Npb24nKSk7CiAgICAgICAgaWYgKCFzZXNzaW9uIHx8ICFzZXNzaW9uLm5hbWEpIHsgcmV0dXJuOyB9CiAgICAgICAgCiAgICAgICAgbGV0IGFsYXNhblZhbHVlID0gaXNBdXRvID8gIkFVVE8gQ0hFQ0tPVVQgKEtFTFVBUiBLQVdBU0FOKSIgOiAiUFVMQU5HIChNQU5VQUwpIjsKICAgICAgICAvLyBHZXQgVVVJRCBmcm9tIHNlc3Npb24gaWYgZXhpc3RzCiAgICAgICAgbGV0IHNlc3Npb25VVUlEID0gc2Vzc2lvbi51dWlkIHx8ICIiOwoKICAgICAgICBsZXQgcHJvY2VlZCA9IGFzeW5jICgpID0+IHsKICAgICAgICAgICAgaXNTdWJtaXR0aW5nID0gdHJ1ZTsgCiAgICAgICAgICAgIGlmKCFpc0F1dG8pIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bktlbHVhcicpLmRpc2FibGVkID0gdHJ1ZTsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bktlbHVhcicpLmlubmVyVGV4dCA9ICJQUk9TRVMuLi4iOyB9CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsgYWN0aW9uOiAiS0VMVUFSIiwgcGFzc2NvZGU6IFBBU1NDT0RFLCBuYW1hOiBzZXNzaW9uLm5hbWEudG9VcHBlckNhc2UoKSwgYWxhc2FuOiBhbGFzYW5WYWx1ZSwgbGF0OiBsYXN0TGF0LCBsbmc6IGxhc3RMbmcsIGNsaWVudFRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwgdXVpZDogc2Vzc2lvblVVSUQgfTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc2VuZERhdGEocGF5bG9hZCk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIE5PVElGSUtBU0kgQVVUTwogICAgICAgICAgICAgICAgaWYoaXNBdXRvKSB7CiAgICAgICAgICAgICAgICAgICAgc2hvd1N5bmNCYXIoIlNFTU9HQSBTRUxBTUFUIERBTEFNIFBFUkpBTEFOQU4gQU5EQSIsICIjYzAzOTJiIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFNFVCBCTE9DS0lORyBTVVBBWUEgVEFLIEFVVE8tSU4gVEVSVVMgQklMQSBSRUxPQUQKICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdlaGFkaXJfYXV0b19pbl9ibG9ja2VkJywgJ3RydWUnKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2VoYWRpcl9zZXNzaW9uJyk7CiAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgICAgIGlzU3VibWl0dGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyAtLS0gTU9EIEVESVQ6IEZBSUwtU0FGRSBVTlRVSyBBVVRPIENIRUNLT1VUIC0tLQogICAgICAgICAgICAgICAgLy8gSmlrYSBlcnJvciBiZXJsYWt1IG1hc2EgYXV0byAoaW50ZXJuZXQgc2xvdyBkbGwpLCB0ZXRhcCBmb3JjZSBsb2dvdXQgCiAgICAgICAgICAgICAgICAvLyBzdXBheWEgdGFrIHN0dWNrIGJpbGEgdXNlciBtYXN1ayBiYWxpayB6b24uCiAgICAgICAgICAgICAgICBpZihpc0F1dG8pIHsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZWhhZGlyX3Nlc3Npb24nKTsKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bktlbHVhcicpLmRpc2FibGVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bktlbHVhcicpLmlubmVySFRNTCA9IGA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMzU4MC8zNTgwMTU0LnBuZyIgY2xhc3M9Imljb24tM2Qtc3RkIj4gREFGVEFSIEtFTFVBUiAoTUFOVUFMKWA7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQoIlJhbGF0IHNlbWFzYSBrZWx1YXIuIFNpbGEgY3ViYSBsYWdpLiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBpZighaXNBdXRvKSB7CiAgICAgICAgICAgIHNob3dNb2Rlcm5BbGVydCgiUGVuZ2VzYWhhbiIsICJEYWZ0YXIga2VsdWFyIHNla2FyYW5nPyIsICJjb25maXJtIiwgcHJvY2VlZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcHJvY2VlZCgpOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBrZWx1YXJNYW51YWwobmFtYVVzZXIpIHsKICAgICAgICBsZXQgcGFzcyA9IHByb21wdCgiQURNSU46IFBhc3Njb2RlIHVudHVrIGtlbHVhcmthbiAiICsgbmFtYVVzZXIgKyAiOiIpOwogICAgICAgIGlmIChwYXNzICE9PSBQQVNTQ09ERSkgeyBzaG93TW9kZXJuQWxlcnQoIkdhZ2FsIiwgIlBhc3Njb2RlIHNhbGFoLiIsICJlcnJvciIpOyByZXR1cm47IH0KICAgICAgICAKICAgICAgICBzZW5kRGF0YSh7IGFjdGlvbjogIktFTFVBUiIsIHBhc3Njb2RlOiBQQVNTQ09ERSwgbmFtYTogbmFtYVVzZXIsIGFsYXNhbjogIk1hbnVhbCBBZG1pbiIsIGxhdDogbGFzdExhdCwgbG5nOiBsYXN0TG5nLCBjbGllbnRUaW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSkKICAgICAgICAudGhlbihyZXMgPT4geyBsb2FkTGlzdCgpOyB9KTsKICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiBoYW50YXJQZWxhd2F0KCkgewogICAgICAgIGlmKGlzU3VibWl0dGluZykgcmV0dXJuOwogICAgICAgIGxldCBmb3RvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Jhc2U2NEZvdG8nKS52YWx1ZTsKICAgICAgICBsZXQgbmFtYVBlbGF3YXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtYVBlbGF3YXRJbnB1dCcpLnZhbHVlLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgaWYgKCFmb3RvKSB7IHNob3dNb2Rlcm5BbGVydCgiVGlhZGEgR2FtYmFyIiwgIkFtYmlsIGdhbWJhciBkYWh1bHUuIiwgImVycm9yIik7IHJldHVybjsgfQogICAgICAgIGlmICghbmFtYVBlbGF3YXQpIHsgc2hvd01vZGVybkFsZXJ0KCJUaWFkYSBOYW1hIiwgIklzaSBuYW1hIHBlbGF3YXQuIiwgImVycm9yIik7IHJldHVybjsgfQogICAgICAgIGlzU3VibWl0dGluZyA9IHRydWU7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0blBlbGF3YXRTdWJtaXQnKS5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0blBlbGF3YXRTdWJtaXQnKS5pbm5lclRleHQgPSAiU0VEQU5HIEhBTlRBUi4uLiI7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsgYWN0aW9uOiAiTUFTVUsiLCBwYXNzY29kZTogUEFTU0NPREUsIGthdGVnb3JpOiAiUEVMQVdBVCIsIG5hbWE6IG5hbWFQZWxhd2F0LCBmb3RvQmFzZTY0OiBmb3RvLCBsYXQ6IGxhc3RMYXQsIGxuZzogbGFzdExuZywgY2xpZW50VGltZTogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH07CiAgICAgICAgICAgIGF3YWl0IHNlbmREYXRhKHBheWxvYWQpOwogICAgICAgICAgICBhbGVydCgiPyBEYXRhIHBlbGF3YXQgYmVyamF5YSBkaWhhbnRhciEiKTsKICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7CiAgICAgICAgICAgIGlzU3VibWl0dGluZyA9IGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBwYXJzZVRpbWUodCwgcikgewogICAgICAgIGlmICghdCB8fCB0LnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSA9PT0gIkJFQkFTIikgcmV0dXJuIG51bGw7CiAgICAgICAgbGV0IGQgPSBuZXcgRGF0ZShyKTsgbGV0IHRTdHIgPSB0LnRvU3RyaW5nKCkudHJpbSgpOwogICAgICAgIGxldCBwID0gdFN0ci5tYXRjaCgvKFxkKylbOi5dKFxkKykoPzpbOi5dKFxkKykpP1xzKihBTXxQTSkvaSk7CiAgICAgICAgaWYocCkgewogICAgICAgICAgICBsZXQgaCA9IHBhcnNlSW50KHBbMV0pLCBtID0gcGFyc2VJbnQocFsyXSksIGFtcG0gPSBwWzRdLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgIGlmKGFtcG0gPT09ICJQTSIgJiYgaCA8IDEyKSBoICs9IDEyOyBpZihhbXBtID09PSAiQU0iICYmIGggPT09IDEyKSBoID0gMDsKICAgICAgICAgICAgZC5zZXRIb3VycyhoLCBtLCAwLCAwKTsgcmV0dXJuIGQ7CiAgICAgICAgfSAKICAgICAgICBsZXQgcDIgPSB0U3RyLm1hdGNoKC8oXGQrKVs6Ll0oXGQrKS8pOwogICAgICAgIGlmKHAyKSB7IGQuc2V0SG91cnMocGFyc2VJbnQocDJbMV0pLCBwYXJzZUludChwMlsyXSksIDAsIDApOyByZXR1cm4gZDsgfQogICAgICAgIHJldHVybiBudWxsOyAKICAgIH0KCiAgICBmdW5jdGlvbiBwYXJzZVRpbWVMb2NhbCh0aW1lU3RyKSB7CiAgICAgICAgaWYgKCF0aW1lU3RyKSByZXR1cm4gbnVsbDsKICAgICAgICBpZiAodGltZVN0ci50b1N0cmluZygpLmxlbmd0aCA+IDE1KSB7IGxldCB0ZW1wRCA9IG5ldyBEYXRlKHRpbWVTdHIpOyBpZighaXNOYU4odGVtcEQuZ2V0VGltZSgpKSkgeyBsZXQgbm93ID0gbmV3IERhdGUoKTsgbm93LnNldEhvdXJzKHRlbXBELmdldEhvdXJzKCksIHRlbXBELmdldE1pbnV0ZXMoKSwgdGVtcEQuZ2V0U2Vjb25kcygpLCAwKTsgcmV0dXJuIG5vdzsgfSB9CiAgICAgICAgbGV0IHBhcnRzID0gdGltZVN0ci5tYXRjaCgvKFxkKyk6KFxkKykoPzo6KFxkKykpP1xzKihBTXxQTXxhbXxwbSk/L2kpOwogICAgICAgIGlmICghcGFydHMpIHJldHVybiBudWxsOwogICAgICAgIGxldCBoID0gcGFyc2VJbnQocGFydHNbMV0pLCBtID0gcGFyc2VJbnQocGFydHNbMl0pLCBzID0gcGFydHNbM10gPyBwYXJzZUludChwYXJ0c1szXSkgOiAwLCBhbXBtID0gcGFydHNbNF0gPyBwYXJ0c1s0XS50b1VwcGVyQ2FzZSgpIDogbnVsbDsKICAgICAgICBpZiAoYW1wbSA9PT0gIlBNIiAmJiBoIDwgMTIpIGggKz0gMTI7IGlmIChhbXBtID09PSAiQU0iICYmIGggPT09IDEyKSBoID0gMDsKICAgICAgICBsZXQgZCA9IG5ldyBEYXRlKCk7IGQuc2V0SG91cnMoaCwgbSwgcywgMCk7IHJldHVybiBkOwogICAgfQoKICAgIGZ1bmN0aW9uIHVwZGF0ZUxpdmVUaW1lcnMoKSB7CiAgICAgICAgbGV0IG5vdyA9IG5ldyBEYXRlKCk7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmxpdmUtdGltZXInKS5mb3JFYWNoKGVsID0+IHsKICAgICAgICAgICAgbGV0IG1hc3VrU3RyID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLW1hc3VrJyk7CiAgICAgICAgICAgIGlmICghbWFzdWtTdHIgfHwgbWFzdWtTdHIgPT09ICJ1bmRlZmluZWQiKSB7IGVsLmlubmVySFRNTCA9IGA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMjk3Mi8yOTcyNTMxLnBuZyIgc3R5bGU9IndpZHRoOjEycHg7aGVpZ2h0OjEycHg7dmVydGljYWwtYWxpZ246bWlkZGxlIj4gLS1gOyByZXR1cm47IH0KICAgICAgICAgICAgbGV0IG1hc3VrRGF0ZSA9IHBhcnNlVGltZUxvY2FsKG1hc3VrU3RyKTsKICAgICAgICAgICAgaWYgKG1hc3VrRGF0ZSkgewogICAgICAgICAgICAgICAgbGV0IGRpZmYgPSBNYXRoLmZsb29yKChub3cgLSBtYXN1a0RhdGUpIC8gMTAwMCk7IGlmIChkaWZmIDwgMCkgZGlmZiA9IDA7CiAgICAgICAgICAgICAgICBsZXQgaCA9IE1hdGguZmxvb3IoZGlmZiAvIDM2MDApOyBsZXQgbSA9IE1hdGguZmxvb3IoKGRpZmYgJSAzNjAwKSAvIDYwKTsKICAgICAgICAgICAgICAgIGVsLmlubmVySFRNTCA9IGA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMjk3Mi8yOTcyNTMxLnBuZyIgc3R5bGU9IndpZHRoOjEycHg7aGVpZ2h0OjEycHg7dmVydGljYWwtYWxpZ246bWlkZGxlIj4gJHtofUggJHttfU1gOwogICAgICAgICAgICB9IGVsc2UgeyBlbC5pbm5lckhUTUwgPSBgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzI5NzIvMjk3MjUzMS5wbmciIHN0eWxlPSJ3aWR0aDoxMnB4O2hlaWdodDoxMnB4O3ZlcnRpY2FsLWFsaWduOm1pZGRsZSI+IDBIIDBNYDsgfQogICAgICAgIH0pOwogICAgfQoKICAgIC8vIC0tLSBGVU5HU0kgVVRBTUE6IE1PTklUT1IgTE9HSUsgTUFTQSAoQU5USS1TUEFNICYgQVVUTy1DSEVDS09VVCkgLS0tCiAgICBmdW5jdGlvbiBtb25pdG9yQXV0b0xvZ2ljKCkgewogICAgICAgIC8vIFR1a2FyIG1pbml0IGtlIG1pbGlzYWF0CiAgICAgICAgbGV0IE1TX0lOX0RFTEFZID0gKHR5cGVvZiBNSU5JVF9BTlRJX1NQQU1fTUFTVUsgIT09ICd1bmRlZmluZWQnID8gTUlOSVRfQU5USV9TUEFNX01BU1VLIDogNSkgKiA2MCAqIDEwMDA7CiAgICAgICAgbGV0IE1TX09VVF9ERUxBWSA9ICh0eXBlb2YgTUlOSVRfREVMQVlfS0VMVUFSICE9PSAndW5kZWZpbmVkJyA/IE1JTklUX0RFTEFZX0tFTFVBUiA6IDEwKSAqIDYwICogMTAwMDsKCiAgICAgICAgbGV0IHNlc3Npb24gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdlaGFkaXJfc2Vzc2lvbicpKTsKICAgICAgICBsZXQgbG9ja2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9sb2NrZWRfbmFtZScpOwogICAgICAgIGxldCBsb2NrZWRLYXQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX2xvY2tlZF9rYXQnKTsKICAgICAgICBsZXQgbm93ID0gRGF0ZS5ub3coKTsKCiAgICAgICAgLy8gMS4gVVBEQVRFIFVJIFNUQVRVUyAoQVNJTkdLQU4gREFSSSBHUFMgQ0FMTEJBQ0spCiAgICAgICAgbGV0IHN0YXR1c0VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1c1RleHQnKTsKICAgICAgICBsZXQgaXNCbG9ja2VkID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9hdXRvX2luX2Jsb2NrZWQnKTsgLy8gTkVXIENIRUNLCgogICAgICAgIGlmIChpc0luWm9uZSkgewogICAgICAgICAgICAgbGV0IGljb24gPSAiPGltZyBzcmM9J2h0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzE5MC8xOTA0MTEucG5nJyBjbGFzcz0naWNvbi0zZC1taW5pJz4iOwogICAgICAgICAgICAgc3RhdHVzRWwuaW5uZXJIVE1MID0gaWNvbiArICIgREFMQU0gS0FXQVNBTiAoIiArIE1hdGgucm91bmQoY3VycmVudERpc3QpICsgIm0pIjsKICAgICAgICAgICAgIHN0YXR1c0VsLnN0eWxlLmNvbG9yID0gIiMyN2FlNjAiOwogICAgICAgICAgICAgc3RhdHVzRWwuc3R5bGUuYmFja2dyb3VuZCA9ICIjZThmNWU5IjsKICAgICAgICAgICAgIAogICAgICAgICAgICAgLy8gTkVXOiBCTE9DSyBMT0dJQwogICAgICAgICAgICAgaWYgKGlzQmxvY2tlZCkgewogICAgICAgICAgICAgICAgIHN0YXR1c0VsLmlubmVySFRNTCArPSBgPGJyPjxzcGFuIHN0eWxlPSJmb250LXNpemU6OXB4OyBjb2xvcjojZTY3ZTIyOyI+QVVUTy1JTiBESUdBTlRVTkcgKEtFTFVBUiA+ICR7UkFESVVTX1JFU0VUX0FVVE9fSU59TSBVTlRVSyBSRVNFVCk8L3NwYW4+YDsKICAgICAgICAgICAgICAgICByZXR1cm47IC8vIFNUT1AgTE9HSUMgSEVSRQogICAgICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICBsZXQgaWNvbiA9ICI8aW1nIHNyYz0naHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMTkwLzE5MDQwNi5wbmcnIGNsYXNzPSdpY29uLTNkLW1pbmknPiI7CiAgICAgICAgICAgICBzdGF0dXNFbC5pbm5lckhUTUwgPSBpY29uICsgIiBMVUFSIEtBV0FTQU4gKCIgKyBNYXRoLnJvdW5kKGN1cnJlbnREaXN0KSArICJtKSI7CiAgICAgICAgICAgICBzdGF0dXNFbC5zdHlsZS5jb2xvciA9ICIjYzAzOTJiIjsKICAgICAgICAgICAgIHN0YXR1c0VsLnN0eWxlLmJhY2tncm91bmQgPSAiI2ZkZWVhNSI7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gU0lUVUFTSSAxOiBNQVNVSyBLQVdBU0FOIChEQUZUQVIgTUFTVUspIC0tLQogICAgICAgIGlmIChpc0luWm9uZSkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZ0JveCcpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgIGhhc05vdGlmaWVkRXhpdCA9IGZhbHNlOyAvLyBSZXNldCBFeGl0IE5vdGlmaWNhdGlvbgogICAgICAgICAgICAKICAgICAgICAgICAgLy8gMS4gVHJpZ2dlciBOb3RpZmljYXRpb246ICJBTkRBIFNVREFIIFNBTVBBSSEiCiAgICAgICAgICAgIGlmICghc2Vzc2lvbiAmJiBsb2NrZWQgJiYgbG9ja2VkS2F0ICYmICFoYXNOb3RpZmllZEVudHJ5KSB7CiAgICAgICAgICAgICAgICBoYXNOb3RpZmllZEVudHJ5ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHNlbmROb3RpZmljYXRpb24oIkFOREEgU1VEQUggU0FNUEFJISIsICJTaWxhIGtsaWsgZGkgc2luaSB1bnR1ayBidWthIGFwbGlrYXNpIiwgIndha2UtdXAtZW50cnkiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gMi4gTG9naWMgQ291bnRkb3duIEF1dG8tTWFzdWsgKEphbGFuIGJpbGEgQXBwIFRlcmJ1a2EpCiAgICAgICAgICAgIGlmICghc2Vzc2lvbiAmJiBsb2NrZWQgJiYgbG9ja2VkS2F0ICYmICFpc1N1Ym1pdHRpbmcpIHsKICAgICAgICAgICAgICAgIGlmIChpblpvbmVTdGFydCA+IDApIHsKICAgICAgICAgICAgICAgICAgICBsZXQgZWxhcHNlZCA9IG5vdyAtIGluWm9uZVN0YXJ0OwogICAgICAgICAgICAgICAgICAgIGxldCByZW1haW5pbmdTZWMgPSBNYXRoLmNlaWwoKE1TX0lOX0RFTEFZIC0gZWxhcHNlZCkgLyAxMDAwKTsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgU3RhdHVzIFRleHQgc3VwYXlhIHVzZXIgdGFodSAoT1ZFUlJJREUgVUkpCiAgICAgICAgICAgICAgICAgICAgc3RhdHVzRWwuaW5uZXJIVE1MICs9IGAgPGJyPltBVVRPLVBVTkNIOiAke3JlbWFpbmluZ1NlY31zXWA7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZ1NlYyA8PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGhhbnRhck1hc3VrKHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICBpblpvbmVTdGFydCA9IDA7IC8vIFJlc2V0CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSAKICAgICAgICAvLyAtLS0gU0lUVUFTSSAyOiBLRUxVQVIgS0FXQVNBTiAoREFGVEFSIEtFTFVBUikgLS0tCiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGhhc05vdGlmaWVkRW50cnkgPSBmYWxzZTsgLy8gUmVzZXQgRW50cnkgTm90aWZpY2F0aW9uCgogICAgICAgICAgICAvLyAxLiBUcmlnZ2VyIE5vdGlmaWNhdGlvbjogIkFOREEgVEVMQUggS0VMVUFSIEtBV0FTQU4hIgogICAgICAgICAgICBpZiAoc2Vzc2lvbiAmJiAhaGFzTm90aWZpZWRFeGl0KSB7CiAgICAgICAgICAgICAgICBoYXNOb3RpZmllZEV4aXQgPSB0cnVlOwogICAgICAgICAgICAgICAgc2VuZE5vdGlmaWNhdGlvbigiQU5EQSBURUxBSCBLRUxVQVIgS0FXQVNBTiEiLCAiQW5kYSBkaWtlc2FuIHRlbGFoIG1lbmluZ2dhbGthbiBwZWphYmF0LiBLbGlrIGRpIHNpbmkgdW50dWsgc2Foa2FuIHdha3R1IGJhbGlrIChQdW5jaCBPdXQpLiIsICJ3YWtlLXVwLWV4aXQiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gMi4gTG9naWMgQ291bnRkb3duIEF1dG8tS2VsdWFyIChKYWxhbiBiaWxhIEFwcCBUZXJidWthKQogICAgICAgICAgICBpZiAoc2Vzc2lvbiAmJiAhaXNTdWJtaXR0aW5nKSB7CiAgICAgICAgICAgICAgICAgaWYgKG91dFpvbmVTdGFydCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAgbGV0IGVsYXBzZWQgPSBub3cgLSBvdXRab25lU3RhcnQ7CiAgICAgICAgICAgICAgICAgICAgIGxldCByZW1haW5pbmdTZWMgPSBNYXRoLmNlaWwoKE1TX09VVF9ERUxBWSAtIGVsYXBzZWQpIC8gMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICBsZXQgd2FybkJveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nQm94Jyk7CiAgICAgICAgICAgICAgICAgICAgIHdhcm5Cb3guc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICAgICAgICAgICAgIHdhcm5Cb3guaW5uZXJIVE1MID0gYEFNQVJBTiEgS0VMVUFSIFpPTi48YnI+QVVUTyBQVU5DSC1PVVQgREFMQU0gPHNwYW4gc3R5bGU9ImZvbnQtc2l6ZToxLjVlbSI+JHtyZW1haW5pbmdTZWN9PC9zcGFuPiBTYDsKCiAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmdTZWMgPD0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgaGFudGFyS2VsdWFyKHRydWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgb3V0Wm9uZVN0YXJ0ID0gMDsKICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZ0JveCcpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc3RhcnRSYWRhcigpIHsKICAgICAgICBpZiAobmF2aWdhdG9yLmdlb2xvY2F0aW9uKSB7CiAgICAgICAgICAgIC8vIC0tLSBPUFRJTUFTSTogRk9SQ0UgR1BTIEFHQVIgTEVCSUggQUdSRVNJRiBESSBCQUNLR1JPVU5EIC0tLQogICAgICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24ud2F0Y2hQb3NpdGlvbihwb3MgPT4gewogICAgICAgICAgICAgICAgbGFzdExhdCA9IHBvcy5jb29yZHMubGF0aXR1ZGU7IGxhc3RMbmcgPSBwb3MuY29vcmRzLmxvbmdpdHVkZTsKICAgICAgICAgICAgICAgIGN1cnJlbnREaXN0ID0gY2FsY0Rpc3QobGFzdExhdCwgbGFzdExuZywgU0NIT09MX0xBVCwgU0NIT09MX0xORyk7IDEKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gVGVudHVrYW4gc3RhdHVzIG1hc3VrL2tlbHVhcgogICAgICAgICAgICAgICAgaXNJblpvbmUgPSAoY3VycmVudERpc3QgPD0gUkFESVVTX01FVEVSKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgLy8gTkVXOiBSRVNFVCBCTE9DSyBMT0dJQwogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnREaXN0ID4gUkFESVVTX1JFU0VUX0FVVE9fSU4pIHsKICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnZWhhZGlyX2F1dG9faW5fYmxvY2tlZCcpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vIEtlbWFza2luaSBUaW1lc3RhbXAgU3RhdHVzIChMb2dpYyBTYWhhamEsIFVJIGRpIG1vbml0b3JBdXRvTG9naWMpCiAgICAgICAgICAgICAgICBpZiAoaXNJblpvbmUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIWluWm9uZVN0YXJ0KSBpblpvbmVTdGFydCA9IERhdGUubm93KCk7CiAgICAgICAgICAgICAgICAgICAgb3V0Wm9uZVN0YXJ0ID0gMDsgCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICghb3V0Wm9uZVN0YXJ0KSBvdXRab25lU3RhcnQgPSBEYXRlLm5vdygpOwogICAgICAgICAgICAgICAgICAgIGluWm9uZVN0YXJ0ID0gMDsgCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9LCBudWxsLCB7ZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlLCBtYXhpbXVtQWdlOiAwLCB0aW1lb3V0OiA1MDAwfSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNhbGNEaXN0KGEsYixjLGQpe3ZhciBSPTYzNzFlMyx4PWEqTWF0aC5QSS8xODAseT1jKk1hdGguUEkvMTgwLGs9KGMtYSkqTWF0aC5QSS8xODAsbD0oZC1iKSpNYXRoLlBJLzE4MCx6PU1hdGguc2luKGsvMikqTWF0aC5zaW4oay8yKStNYXRoLmNvcyh4KSpNYXRoLmNvcyh5KSpNYXRoLnNpbihsLzIpKk1hdGguc2luKGwvMik7cmV0dXJuIFIqMipNYXRoLmF0YW4yKE1hdGguc3FydCh6KSxNYXRoLnNxcnQoMS16KSk7fQogICAgCiAgICBmdW5jdGlvbiBzdGFydENsb2NrKCl7CiAgICAgICAgc2V0SW50ZXJ2YWwoKCk9PnsKICAgICAgICAgICAgbGV0IG4gPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2xvY2tEaXNwbGF5JykuaW5uZXJUZXh0ID0gbi50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLVVTJywgeyBob3VyMTI6IHRydWUsIGhvdXI6ICIyLWRpZ2l0IiwgbWludXRlOiAiMi1kaWdpdCIsIHRpbWVab25lOiAnQXNpYS9LdWFsYV9MdW1wdXInIH0pOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0ZURpc3BsYXknKS5pbm5lclRleHQgPSBuLnRvTG9jYWxlRGF0ZVN0cmluZygnbXMtTVknLCB7IGRheTogJ251bWVyaWMnLCBtb250aDogJ3Nob3J0JywgeWVhcjogJ251bWVyaWMnLCB0aW1lWm9uZTogJ0FzaWEvS3VhbGFfTHVtcHVyJyB9KTsKICAgICAgICB9LCAxMDAwKTsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gZ2V0SGlqcmlEYXRlKCl7CiAgICAgICAgY29uc3QgbW9udGhOYW1lcyA9IFsiTXVoYXJyYW0iLCAiU2FmYXIiLCAiUmFiaXVsYXdhbCIsICJSYWJpdWxha2hpciIsICJKYW1hZGlsYXdhbCIsICJKYW1hZGlsYWtoaXIiLCAiUmVqYWIiLCAiU3lhYWJhbiIsICJSYW1hZGFuIiwgIlN5YXdhbCIsICJadWxrYWVkYWgiLCAiWnVsaGlqamFoIl07CiAgICAgICAgbGV0IHQgPSBuZXcgRGF0ZSgpOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxldCBwYXJ0cyA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KCdlbi11LWNhLWlzbGFtaWMtdW1hbHF1cmEtbnUtbGF0bicsIHsgZGF5OiAnbnVtZXJpYycsIG1vbnRoOiAnbnVtZXJpYycsIHllYXI6ICdudW1lcmljJywgdGltZVpvbmU6ICdBc2lhL0t1YWxhX0x1bXB1cicgfSkuZm9ybWF0VG9QYXJ0cyh0KTsKICAgICAgICAgICAgbGV0IGhEYXkgPSBwYXJ0cy5maW5kKHAgPT4gcC50eXBlID09PSAnZGF5JykudmFsdWU7CiAgICAgICAgICAgIGxldCBoTW9udGhJbmRleCA9IHBhcnNlSW50KHBhcnRzLmZpbmQocCA9PiBwLnR5cGUgPT09ICdtb250aCcpLnZhbHVlKSAtIDE7IAogICAgICAgICAgICBsZXQgaFllYXIgPSBwYXJ0cy5maW5kKHAgPT4gcC50eXBlID09PSAneWVhcicpLnZhbHVlLnNwbGl0KCIgIilbMF07CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaWpyaURpc3BsYXknKS5pbm5lclRleHQgPSBgJHtoRGF5fSAke21vbnRoTmFtZXNbaE1vbnRoSW5kZXhdfHwoIiIpfSAke2hZZWFyfWA7CiAgICAgICAgfSBjYXRjaChlKSB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoaWpyaURpc3BsYXknKS5pbm5lclRleHQgPSAiS2FsZW5kYXIgSXNsYW0iOyB9CiAgICB9CgogICAgZnVuY3Rpb24gY2hlY2tTZXNzaW9uKCkgeyAKICAgICAgICBsZXQgcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2VoYWRpcl9zZXNzaW9uJykpOyAKICAgICAgICBpZihzICYmIHMuZGF0ZSA9PT0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApKSB7IAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVmYXVsdEZvcm0nKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rhc2hib2FyZFBhbmVsJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7IAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2Vzc2lvbk5hbWUnKS5pbm5lclRleHQgPSBzLm5hbWE7IAogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHluYW1pY1N0YXR1cycpLmlubmVyVGV4dCA9ICJTVEFUVVM6ICIgKyBzLmthdGVnb3JpICsgIiAoU0VEQU5HIEJFUlRVR0FTKSI7CiAgICAgICAgICAgIC8vIExPQUQgU0FWRUQgQVZBVEFSIElGIEFOWQogICAgICAgICAgICBsZXQgc2F2ZWRBdmF0YXIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX3VzZXJfYXZhdGFyJyk7CiAgICAgICAgICAgIGlmKHNhdmVkQXZhdGFyKSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlckF2YXRhckRhc2gnKS5zcmMgPSBzYXZlZEF2YXRhcjsKICAgICAgICAgICAgdXBkYXRlRGFzaGJvYXJkSW5mbygpOyAKICAgICAgICB9CiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIGxvYWRMaXN0KCkgeyAKICAgICAgICBsZXQgb2ZmbGluZVF1ZXVlID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZWhhZGlyX29mZmxpbmVfcXVldWUnKSB8fCAiW10iKTsKICAgICAgICBsZXQgb2ZmbGluZUl0ZW1zID0gb2ZmbGluZVF1ZXVlLmZpbHRlcihxID0+IHEuYWN0aW9uID09PSAiTUFTVUsiKS5tYXAocSA9PiAoewogICAgICAgICAgICBuYW1hOiBxLm5hbWEsIGthdGVnb3JpOiBxLmthdGVnb3JpLCBqYW06IG5ldyBEYXRlKHEuY2xpZW50VGltZSkudG9Mb2NhbGVUaW1lU3RyaW5nKCdlbi1VUycsIHtob3VyMTI6dHJ1ZSwgaG91cjonMi1kaWdpdCcsIG1pbnV0ZTonMi1kaWdpdCcsIHNlY29uZDonMi1kaWdpdCd9KSwgYXZhdGFyOiBxLmF2YXRhciwgaXNPZmZsaW5lOiB0cnVlCiAgICAgICAgfSkpOwogICAgICAgIGlmKCFuYXZpZ2F0b3Iub25MaW5lKSB7IHJlbmRlckxpc3Qob2ZmbGluZUl0ZW1zKTsgcmV0dXJuOyB9CiAgICAgICAgZmV0Y2goQVBJX1VSTCwgeyBtZXRob2Q6ICJQT1NUIiwgYm9keTogSlNPTi5zdHJpbmdpZnkoe2FjdGlvbjogIkdFVF9MSVNUIiwgcGFzc2NvZGU6IFBBU1NDT0RFfSkgfSkKICAgICAgICAudGhlbihyID0+IHIuanNvbigpKS50aGVuKHJlcyA9PiB7IAogICAgICAgICAgICBsZXQgc2VydmVySXRlbXMgPSByZXMuZGF0YSB8fCByZXM7IAogICAgICAgICAgICBjdXJyZW50TGlzdCA9IFsuLi5vZmZsaW5lSXRlbXMsIC4uLnNlcnZlckl0ZW1zXTsKICAgICAgICAgICAgcmVuZGVyTGlzdChjdXJyZW50TGlzdCk7CiAgICAgICAgICAgIGNoZWNrQXV0b1N0YXR1cyhjdXJyZW50TGlzdCk7CiAgICAgICAgfSkuY2F0Y2goKCkgPT4geyByZW5kZXJMaXN0KG9mZmxpbmVJdGVtcyk7IH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIHJlbmRlckxpc3QoaXRlbXMpIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY291bnQnKS5pbm5lclRleHQgPSBpdGVtcy5sZW5ndGg7IAogICAgICAgIGxldCBoID0gIiI7IAogICAgICAgIGxldCBkZWZBdmF0YXIgPSAiaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMzEzNS8zMTM1NzE1LnBuZyI7CiAgICAgICAgaXRlbXMuZm9yRWFjaCgoaSwgaWR4KSA9PiB7IAogICAgICAgICAgICBsZXQgaW1nQnRuID0gKGkua2F0ZWdvcmkgPT09ICJQRUxBV0FUIiAmJiBpLmZvdG8pID8gYDxzcGFuIGNsYXNzPSJpY29uLWJ0biIgb25jbGljaz0idmlld0ltYWdlKCR7aWR4fSkiPjxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC8zMzQyLzMzNDIxMzcucG5nIiBjbGFzcz0iaWNvbi0zZC1taW5pIj48L3NwYW4+YCA6ICIiOwogICAgICAgICAgICBsZXQgeEJ0biA9IGA8c3BhbiBjbGFzcz0iaWNvbi1idG4iIHN0eWxlPSJib3JkZXItY29sb3I6I2ZhZGJkODsiIG9uY2xpY2s9ImtlbHVhck1hbnVhbCgnJHtpLm5hbWF9JykiPjxpbWcgc3JjPSJodHRwczovL2Nkbi1pY29ucy1wbmcuZmxhdGljb24uY29tLzEyOC82ODYxLzY4NjEzNjIucG5nIiBjbGFzcz0iaWNvbi0zZC1taW5pIj48L3NwYW4+YDsKICAgICAgICAgICAgbGV0IG9mZmxpbmVDbGFzcyA9IGkuaXNPZmZsaW5lID8gIm9mZmxpbmUtaXRlbSIgOiAiIjsKICAgICAgICAgICAgbGV0IG9mZmxpbmVJY29uID0gaS5pc09mZmxpbmUgPyBgPGltZyBzcmM9Imh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzE1OS8xNTk2MDQucG5nIiBjbGFzcz0iaWNvbi0zZC1taW5pIiB0aXRsZT0iTWVudW5nZ3UgU3luYyI+IGAgOiAiIjsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIExPR0lLIEFWQVRBUiBESVBFUkJBSUtJOiBLZXV0YW1hYW4ga2VwYWRhIHBpbGloYW4gdXNlciwgb3ZlcnJpZGUgcGVsYXdhdCBoYW55YSBqaWthIHRpYWRhIGF2YXRhcgogICAgICAgICAgICBsZXQgY3VycmVudERlZiA9IChpLmthdGVnb3JpID09PSAiUEVMQVdBVCIpID8gImh0dHBzOi8vY2RuLWljb25zLXBuZy5mbGF0aWNvbi5jb20vMTI4LzMxMzUvMzEzNTc2OC5wbmciIDogZGVmQXZhdGFyOwogICAgICAgICAgICBsZXQgdXNlckF2YXRhciA9IChpLmF2YXRhciAmJiBpLmF2YXRhciAhPT0gIi0iKSA/IGkuYXZhdGFyIDogY3VycmVudERlZjsKCiAgICAgICAgICAgIGxldCBhdmF0YXJJbWcgPSBgPGltZyBzcmM9IiR7dXNlckF2YXRhcn0iIHN0eWxlPSJ3aWR0aDozNXB4OyBoZWlnaHQ6MzVweDsgYm9yZGVyLXJhZGl1czo1MCU7IG1hcmdpbi1yaWdodDoxMHB4OyBib3JkZXI6MnB4IHNvbGlkICNkZGQ7IGJhY2tncm91bmQ6I2ZmZjsgcGFkZGluZzoycHg7IGZsZXgtc2hyaW5rOjA7Ij5gOwoKICAgICAgICAgICAgaCArPSBgPGRpdiBjbGFzcz0idXNlci1jYXJkICR7b2ZmbGluZUNsYXNzfSI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBhbGlnbi1pdGVtczpjZW50ZXI7IHdpZHRoOjEwMCU7Ij4KICAgICAgICAgICAgICAgICAgICAgICAgJHthdmF0YXJJbWd9CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InVzZXItaW5mbyI+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPiR7b2ZmbGluZUljb259JHtpLm5hbWF9PC9zdHJvbmc+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJ1c2VyLWRldGFpbHMiPjxzcGFuPiR7aS5rYXRlZ29yaX08L3NwYW4+PHNwYW4gY2xhc3M9ImxpdmUtdGltZXIiIGRhdGEtbWFzdWs9IiR7aS5qYW18fCgidW5kZWZpbmVkIil9Ij48aW1nIHNyYz0iaHR0cHM6Ly9jZG4taWNvbnMtcG5nLmZsYXRpY29uLmNvbS8xMjgvMjk3Mi8yOTcyNTMxLnBuZyIgc3R5bGU9IndpZHRoOjEycHg7aGVpZ2h0OjEycHg7dmVydGljYWwtYWxpZ246bWlkZGxlIj4gMEggME08L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Imxpc3QtYWN0aW9ucyI+JHtpbWdCdG59JHt4QnRufTwvZGl2PgogICAgICAgICAgICAgICAgICA8L2Rpdj5gOyAKICAgICAgICB9KTsgCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xpc3RDb250YWluZXInKS5pbm5lckhUTUwgPSBoIHx8ICI8ZGl2IHN0eWxlPSdwYWRkaW5nOjIwcHg7IGNvbG9yOiM5OTk7IGZvbnQtc2l6ZToxMnB4Oyc+VGlhZGEgcmVrb2QgaGFyaSBpbmkuPC9kaXY+IjsgCiAgICAgICAgdXBkYXRlTGl2ZVRpbWVycygpOwogICAgfQoKICAgIGZ1bmN0aW9uIHZpZXdJbWFnZShpbmRleCkgeyBsZXQgZGF0YSA9IGN1cnJlbnRMaXN0W2luZGV4XTsgaWYoZGF0YSAmJiBkYXRhLmZvdG8pIHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ltZ0Z1bGwnKS5zcmMgPSBkYXRhLmZvdG87IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZU1vZGFsJykuc3R5bGUuZGlzcGxheSA9ICJmbGV4IjsgfSB9CiAgICBmdW5jdGlvbiBjbG9zZU1vZGFsKCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW1hZ2VNb2RhbCcpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7IH0KICAgIGZ1bmN0aW9uIHByb2Nlc3NJbWFnZShpKXtpZihpLmZpbGVzJiZpLmZpbGVzWzBdKXtsZXQgcj1uZXcgRmlsZVJlYWRlcigpO3Iub25sb2FkPWZ1bmN0aW9uKGUpe2xldCBpbT1uZXcgSW1hZ2UoKTtpbS5zcmM9ZS50YXJnZXQucmVzdWx0O2ltLm9ubG9hZD1mdW5jdGlvbigpe2xldCBjdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTtsZXQgY3R4PWN2LmdldENvbnRleHQoIjJkIik7Y3Yud2lkdGg9NDAwO2N2LmhlaWdodD00MDAqKGltLmhlaWdodC9pbS53aWR0aCk7Y3R4LmRyYXdJbWFnZShpbSwwLDAsY3Yud2lkdGgsY3YuaGVpZ2h0KTtsZXQgZD1jdi50b0RhdGFVUkwoImltYWdlL2pwZWciLDAuNyk7ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXdJbWcnKS5zcmM9ZDtkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJldmlld0ltZycpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJztkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFzZTY0Rm90bycpLnZhbHVlPWQ7fTt9O3IucmVhZEFzRGF0YVVSTChpLmZpbGVzWzBdKTt9fQogICAgZnVuY3Rpb24gY2hlY2tLYXRlZ29yaSgpeyBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgna2F0ZWdvcmknKS52YWx1ZT09PSdQRUxBV0FUJykgc2hvd1BlbGF3YXRGb3JtKCk7IH0KICAgIGZ1bmN0aW9uIHNob3dQZWxhd2F0Rm9ybSgpeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVmYXVsdEZvcm0nKS5zdHlsZS5kaXNwbGF5PSdub25lJzsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BlbGF3YXRQYW5lbCcpLnN0eWxlLmRpc3BsYXk9J2Jsb2NrJzsgfQogICAgZnVuY3Rpb24gY2FuY2VsUGVsYXdhdCgpeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGVsYXdhdFBhbmVsJykuc3R5bGUuZGlzcGxheT0nbm9uZSc7IGNoZWNrU2Vzc2lvbigpOyBsb2NhdGlvbi5yZWxvYWQoKTsgfQogICAgZnVuY3Rpb24gcmVzZXRTZXNpKCl7IGlmKGNvbmZpcm0oIlJlc2V0IHNlc2k/Iikpe2xvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdlaGFkaXJfc2Vzc2lvbicpO2xvY2F0aW9uLnJlbG9hZCgpO30gfQ=="));</script>
</script>
</body>
</html>
